(()=>{var e={1265:(e,t,r)=>{e.exports=r(4598)},6984:(e,t,r)=>{e.exports=r(9792)},7201:(e,t,r)=>{e.exports=r(3042)},1829:(e,t,r)=>{"use strict";var i=r(2222);e.exports=i},6040:(e,t,r)=>{"use strict";var i=r(8251);e.exports=i},7264:(e,t,r)=>{"use strict";var i=r(4139);r(768),r(8549),r(7152),r(1372),e.exports=i},9692:(e,t,r)=>{"use strict";var i=r(7045);e.exports=i},5663:(e,t,r)=>{"use strict";var i=r(70);e.exports=i},6823:(e,t,r)=>{"use strict";var i=r(8280),s=r(2017),n=String.prototype;e.exports=function(e){var t=e.replaceAll;return"string"==typeof e||e===n||i(n,e)&&t===n.replaceAll?s:t}},1042:(e,t,r)=>{"use strict";var i=r(8280),s=r(7511),n=String.prototype;e.exports=function(e){var t=e.trim;return"string"==typeof e||e===n||i(n,e)&&t===n.trim?s:t}},1926:(e,t,r)=>{"use strict";r(6750);var i=r(2046).Object,s=e.exports=function(e,t,r){return i.defineProperty(e,t,r)};i.defineProperty.sham&&(s.sham=!0)},2017:(e,t,r)=>{"use strict";r(1398),r(1995),r(929);var i=r(1747);e.exports=i("String","replaceAll")},7511:(e,t,r)=>{"use strict";r(727);var i=r(1747);e.exports=i("String","trim")},3842:(e,t,r)=>{"use strict";r(8545),r(3643),r(4452),r(3997),r(5084),r(2596),r(5721),r(4954),r(4123),r(3377),r(2230),r(5344),r(1660),r(4610),r(3669),r(4810),r(3325),r(7024),r(8172),r(5205);var i=r(2046);e.exports=i.Symbol},1730:(e,t,r)=>{"use strict";r(9363),r(3643),r(7057),r(4954);var i=r(560);e.exports=i.f("iterator")},1661:(e,t,r)=>{"use strict";r(8537),r(3669);var i=r(560);e.exports=i.f("toPrimitive")},3042:(e,t,r)=>{"use strict";e.exports=r(9604)},9604:(e,t,r)=>{"use strict";r(6038);var i=r(1829);e.exports=i},4997:(e,t,r)=>{"use strict";var i=r(6040);e.exports=i},2321:(e,t,r)=>{"use strict";var i=r(7264);r(3939),r(1785),r(1697),r(4664),r(3422),r(36),r(8703),r(6878),r(9671),r(359),e.exports=i},2231:(e,t,r)=>{"use strict";var i=r(9692);e.exports=i},9280:(e,t,r)=>{"use strict";var i=r(5663);e.exports=i},2159:(e,t,r)=>{"use strict";var i=r(2250),s=r(4640),n=TypeError;e.exports=function(e){if(i(e))return e;throw new n(s(e)+" is not a function")}},43:(e,t,r)=>{"use strict";var i=r(4018),s=String,n=TypeError;e.exports=function(e){if(i(e))return e;throw new n("Can't set "+s(e)+" as a prototype")}},2156:e=>{"use strict";e.exports=function(){}},9596:(e,t,r)=>{"use strict";var i=r(8280),s=TypeError;e.exports=function(e,t){if(i(t,e))return e;throw new s("Incorrect invocation")}},6624:(e,t,r)=>{"use strict";var i=r(6285),s=String,n=TypeError;e.exports=function(e){if(i(e))return e;throw new n(s(e)+" is not an object")}},1229:(e,t,r)=>{"use strict";var i=r(8311),s=r(3930),n=r(9298),o=r(6818),a=r(7812),c=r(5468),h=r(575),u=r(5543),l=r(300),f=r(3448),d=Array;e.exports=function(e){var t=n(e),r=c(this),p=arguments.length,m=p>1?arguments[1]:void 0,v=void 0!==m;v&&(m=i(m,p>2?arguments[2]:void 0));var _,g,y,b,x,w,R=f(t),E=0;if(!R||this===d&&a(R))for(_=h(t),g=r?new this(_):d(_);_>E;E++)w=v?m(t[E],E):t[E],u(g,E,w);else for(g=r?new this:[],x=(b=l(t,R)).next;!(y=s(x,b)).done;E++)w=v?o(b,m,[y.value,E],!0):y.value,u(g,E,w);return g.length=E,g}},4436:(e,t,r)=>{"use strict";var i=r(7374),s=r(4849),n=r(575),o=function(e){return function(t,r,o){var a=i(t),c=n(a);if(0===c)return!e&&-1;var h,u=s(o,c);if(e&&r!=r){for(;c>u;)if((h=a[u++])!=h)return!0}else for(;c>u;u++)if((e||u in a)&&a[u]===r)return e||u||0;return!e&&-1}};e.exports={includes:o(!0),indexOf:o(!1)}},726:(e,t,r)=>{"use strict";var i=r(8311),s=r(1907),n=r(6946),o=r(9298),a=r(575),c=r(6968),h=s([].push),u=function(e){var t=1===e,r=2===e,s=3===e,u=4===e,l=6===e,f=7===e,d=5===e||l;return function(p,m,v,_){for(var g,y,b=o(p),x=n(b),w=a(x),R=i(m,v),E=0,T=_||c,S=t?T(p,w):r||f?T(p,0):void 0;w>E;E++)if((d||E in x)&&(y=R(g=x[E],E,b),e))if(t)S[E]=y;else if(y)switch(e){case 3:return!0;case 5:return g;case 6:return E;case 2:h(S,g)}else switch(e){case 4:return!1;case 7:h(S,g)}return l?-1:s||u?u:S}};e.exports={forEach:u(0),map:u(1),filter:u(2),some:u(3),every:u(4),find:u(5),findIndex:u(6),filterReject:u(7)}},7171:(e,t,r)=>{"use strict";var i=r(8828),s=r(6264),n=r(798),o=s("species");e.exports=function(e){return n>=51||!i((function(){var t=[];return(t.constructor={})[o]=function(){return{foo:1}},1!==t[e](Boolean).foo}))}},3427:(e,t,r)=>{"use strict";var i=r(1907);e.exports=i([].slice)},4321:(e,t,r)=>{"use strict";var i=r(3427),s=Math.floor,n=function(e,t){var r=e.length;if(r<8)for(var o,a,c=1;c<r;){for(a=c,o=e[c];a&&t(e[a-1],o)>0;)e[a]=e[--a];a!==c++&&(e[a]=o)}else for(var h=s(r/2),u=n(i(e,0,h),t),l=n(i(e,h),t),f=u.length,d=l.length,p=0,m=0;p<f||m<d;)e[p+m]=p<f&&m<d?t(u[p],l[m])<=0?u[p++]:l[m++]:p<f?u[p++]:l[m++];return e};e.exports=n},4010:(e,t,r)=>{"use strict";var i=r(1793),s=r(5468),n=r(6285),o=r(6264)("species"),a=Array;e.exports=function(e){var t;return i(e)&&(t=e.constructor,(s(t)&&(t===a||i(t.prototype))||n(t)&&null===(t=t[o]))&&(t=void 0)),void 0===t?a:t}},6968:(e,t,r)=>{"use strict";var i=r(4010);e.exports=function(e,t){return new(i(e))(0===t?0:t)}},6818:(e,t,r)=>{"use strict";var i=r(6624),s=r(154);e.exports=function(e,t,r,n){try{return n?t(i(r)[0],r[1]):t(r)}catch(t){s(e,"throw",t)}}},5807:(e,t,r)=>{"use strict";var i=r(1907),s=i({}.toString),n=i("".slice);e.exports=function(e){return n(s(e),8,-1)}},3948:(e,t,r)=>{"use strict";var i=r(2623),s=r(2250),n=r(5807),o=r(6264)("toStringTag"),a=Object,c="Arguments"===n(function(){return arguments}());e.exports=i?n:function(e){var t,r,i;return void 0===e?"Undefined":null===e?"Null":"string"==typeof(r=function(e,t){try{return e[t]}catch(e){}}(t=a(e),o))?r:c?n(t):"Object"===(i=n(t))&&s(t.callee)?"Arguments":i}},7382:(e,t,r)=>{"use strict";var i=r(8828);e.exports=!i((function(){function e(){}return e.prototype.constructor=null,Object.getPrototypeOf(new e)!==e.prototype}))},9550:e=>{"use strict";e.exports=function(e,t){return{value:e,done:t}}},1626:(e,t,r)=>{"use strict";var i=r(9447),s=r(4284),n=r(5817);e.exports=i?function(e,t,r){return s.f(e,t,n(1,r))}:function(e,t,r){return e[t]=r,e}},5817:e=>{"use strict";e.exports=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}}},5543:(e,t,r)=>{"use strict";var i=r(9447),s=r(4284),n=r(5817);e.exports=function(e,t,r){i?s.f(e,t,n(0,r)):e[t]=r}},9251:(e,t,r)=>{"use strict";var i=r(4284);e.exports=function(e,t,r){return i.f(e,t,r)}},8055:(e,t,r)=>{"use strict";var i=r(1626);e.exports=function(e,t,r,s){return s&&s.enumerable?e[t]=r:i(e,t,r),e}},2802:(e,t,r)=>{"use strict";var i=r(8055);e.exports=function(e,t,r){for(var s in t)r&&r.unsafe&&e[s]?e[s]=t[s]:i(e,s,t[s],r);return e}},2532:(e,t,r)=>{"use strict";var i=r(5951),s=Object.defineProperty;e.exports=function(e,t){try{s(i,e,{value:t,configurable:!0,writable:!0})}catch(r){i[e]=t}return t}},9447:(e,t,r)=>{"use strict";var i=r(8828);e.exports=!i((function(){return 7!==Object.defineProperty({},1,{get:function(){return 7}})[1]}))},9552:(e,t,r)=>{"use strict";var i=r(5951),s=r(6285),n=i.document,o=s(n)&&s(n.createElement);e.exports=function(e){return o?n.createElement(e):{}}},8024:e=>{"use strict";var t=TypeError;e.exports=function(e){if(e>9007199254740991)throw t("Maximum allowed index exceeded");return e}},9287:e=>{"use strict";e.exports={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0}},376:e=>{"use strict";e.exports=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]},6794:(e,t,r)=>{"use strict";var i=r(5951).navigator,s=i&&i.userAgent;e.exports=s?String(s):""},798:(e,t,r)=>{"use strict";var i,s,n=r(5951),o=r(6794),a=n.process,c=n.Deno,h=a&&a.versions||c&&c.version,u=h&&h.v8;u&&(s=(i=u.split("."))[0]>0&&i[0]<4?1:+(i[0]+i[1])),!s&&o&&(!(i=o.match(/Edge\/(\d+)/))||i[1]>=74)&&(i=o.match(/Chrome\/(\d+)/))&&(s=+i[1]),e.exports=s},1091:(e,t,r)=>{"use strict";var i=r(5951),s=r(6024),n=r(2361),o=r(2250),a=r(3846).f,c=r(7463),h=r(2046),u=r(8311),l=r(1626),f=r(9724);r(6128);var d=function(e){var t=function(r,i,n){if(this instanceof t){switch(arguments.length){case 0:return new e;case 1:return new e(r);case 2:return new e(r,i)}return new e(r,i,n)}return s(e,this,arguments)};return t.prototype=e.prototype,t};e.exports=function(e,t){var r,s,p,m,v,_,g,y,b,x=e.target,w=e.global,R=e.stat,E=e.proto,T=w?i:R?i[x]:i[x]&&i[x].prototype,S=w?h:h[x]||l(h,x,{})[x],A=S.prototype;for(m in t)s=!(r=c(w?m:x+(R?".":"#")+m,e.forced))&&T&&f(T,m),_=S[m],s&&(g=e.dontCallGetSet?(b=a(T,m))&&b.value:T[m]),v=s&&g?g:t[m],(r||E||typeof _!=typeof v)&&(y=e.bind&&s?u(v,i):e.wrap&&s?d(v):E&&o(v)?n(v):v,(e.sham||v&&v.sham||_&&_.sham)&&l(y,"sham",!0),l(S,m,y),E&&(f(h,p=x+"Prototype")||l(h,p,{}),l(h[p],m,v),e.real&&A&&(r||!A[m])&&l(A,m,v)))}},8828:e=>{"use strict";e.exports=function(e){try{return!!e()}catch(e){return!0}}},6024:(e,t,r)=>{"use strict";var i=r(1505),s=Function.prototype,n=s.apply,o=s.call;e.exports="object"==typeof Reflect&&Reflect.apply||(i?o.bind(n):function(){return o.apply(n,arguments)})},8311:(e,t,r)=>{"use strict";var i=r(2361),s=r(2159),n=r(1505),o=i(i.bind);e.exports=function(e,t){return s(e),void 0===t?e:n?o(e,t):function(){return e.apply(t,arguments)}}},1505:(e,t,r)=>{"use strict";var i=r(8828);e.exports=!i((function(){var e=function(){}.bind();return"function"!=typeof e||e.hasOwnProperty("prototype")}))},3930:(e,t,r)=>{"use strict";var i=r(1505),s=Function.prototype.call;e.exports=i?s.bind(s):function(){return s.apply(s,arguments)}},6833:(e,t,r)=>{"use strict";var i=r(9447),s=r(9724),n=Function.prototype,o=i&&Object.getOwnPropertyDescriptor,a=s(n,"name"),c=a&&"something"===function(){}.name,h=a&&(!i||i&&o(n,"name").configurable);e.exports={EXISTS:a,PROPER:c,CONFIGURABLE:h}},1871:(e,t,r)=>{"use strict";var i=r(1907),s=r(2159);e.exports=function(e,t,r){try{return i(s(Object.getOwnPropertyDescriptor(e,t)[r]))}catch(e){}}},2361:(e,t,r)=>{"use strict";var i=r(5807),s=r(1907);e.exports=function(e){if("Function"===i(e))return s(e)}},1907:(e,t,r)=>{"use strict";var i=r(1505),s=Function.prototype,n=s.call,o=i&&s.bind.bind(n,n);e.exports=i?o:function(e){return function(){return n.apply(e,arguments)}}},1747:(e,t,r)=>{"use strict";var i=r(5951),s=r(2046);e.exports=function(e,t){var r=s[e+"Prototype"],n=r&&r[t];if(n)return n;var o=i[e],a=o&&o.prototype;return a&&a[t]}},5582:(e,t,r)=>{"use strict";var i=r(2046),s=r(5951),n=r(2250),o=function(e){return n(e)?e:void 0};e.exports=function(e,t){return arguments.length<2?o(i[e])||o(s[e]):i[e]&&i[e][t]||s[e]&&s[e][t]}},3448:(e,t,r)=>{"use strict";var i=r(3948),s=r(9367),n=r(7136),o=r(3742),a=r(6264)("iterator");e.exports=function(e){if(!n(e))return s(e,a)||s(e,"@@iterator")||o[i(e)]}},300:(e,t,r)=>{"use strict";var i=r(3930),s=r(2159),n=r(6624),o=r(4640),a=r(3448),c=TypeError;e.exports=function(e,t){var r=arguments.length<2?a(e):t;if(s(r))return n(i(r,e));throw new c(o(e)+" is not iterable")}},6656:(e,t,r)=>{"use strict";var i=r(1907),s=r(1793),n=r(2250),o=r(5807),a=r(160),c=i([].push);e.exports=function(e){if(n(e))return e;if(s(e)){for(var t=e.length,r=[],i=0;i<t;i++){var h=e[i];"string"==typeof h?c(r,h):"number"!=typeof h&&"Number"!==o(h)&&"String"!==o(h)||c(r,a(h))}var u=r.length,l=!0;return function(e,t){if(l)return l=!1,t;if(s(this))return t;for(var i=0;i<u;i++)if(r[i]===e)return t}}}},9367:(e,t,r)=>{"use strict";var i=r(2159),s=r(7136);e.exports=function(e,t){var r=e[t];return s(r)?void 0:i(r)}},7703:(e,t,r)=>{"use strict";var i=r(1907),s=r(9298),n=Math.floor,o=i("".charAt),a=i("".replace),c=i("".slice),h=/\$([$&'`]|\d{1,2}|<[^>]*>)/g,u=/\$([$&'`]|\d{1,2})/g;e.exports=function(e,t,r,i,l,f){var d=r+e.length,p=i.length,m=u;return void 0!==l&&(l=s(l),m=h),a(f,m,(function(s,a){var h;switch(o(a,0)){case"$":return"$";case"&":return e;case"`":return c(t,0,r);case"'":return c(t,d);case"<":h=l[c(a,1,-1)];break;default:var u=+a;if(0===u)return s;if(u>p){var f=n(u/10);return 0===f?s:f<=p?void 0===i[f-1]?o(a,1):i[f-1]+o(a,1):s}h=i[u-1]}return void 0===h?"":h}))}},5951:function(e,t,r){"use strict";var i=function(e){return e&&e.Math===Math&&e};e.exports=i("object"==typeof globalThis&&globalThis)||i("object"==typeof window&&window)||i("object"==typeof self&&self)||i("object"==typeof r.g&&r.g)||i("object"==typeof this&&this)||function(){return this}()||Function("return this")()},9724:(e,t,r)=>{"use strict";var i=r(1907),s=r(9298),n=i({}.hasOwnProperty);e.exports=Object.hasOwn||function(e,t){return n(s(e),t)}},8530:e=>{"use strict";e.exports={}},2416:(e,t,r)=>{"use strict";var i=r(5582);e.exports=i("document","documentElement")},3648:(e,t,r)=>{"use strict";var i=r(9447),s=r(8828),n=r(9552);e.exports=!i&&!s((function(){return 7!==Object.defineProperty(n("div"),"a",{get:function(){return 7}}).a}))},6946:(e,t,r)=>{"use strict";var i=r(1907),s=r(8828),n=r(5807),o=Object,a=i("".split);e.exports=s((function(){return!o("z").propertyIsEnumerable(0)}))?function(e){return"String"===n(e)?a(e,""):o(e)}:o},2647:(e,t,r)=>{"use strict";var i=r(1907),s=r(2250),n=r(6128),o=i(Function.toString);s(n.inspectSource)||(n.inspectSource=function(e){return o(e)}),e.exports=n.inspectSource},4932:(e,t,r)=>{"use strict";var i,s,n,o=r(551),a=r(5951),c=r(6285),h=r(1626),u=r(9724),l=r(6128),f=r(2522),d=r(8530),p="Object already initialized",m=a.TypeError,v=a.WeakMap;if(o||l.state){var _=l.state||(l.state=new v);_.get=_.get,_.has=_.has,_.set=_.set,i=function(e,t){if(_.has(e))throw new m(p);return t.facade=e,_.set(e,t),t},s=function(e){return _.get(e)||{}},n=function(e){return _.has(e)}}else{var g=f("state");d[g]=!0,i=function(e,t){if(u(e,g))throw new m(p);return t.facade=e,h(e,g,t),t},s=function(e){return u(e,g)?e[g]:{}},n=function(e){return u(e,g)}}e.exports={set:i,get:s,has:n,enforce:function(e){return n(e)?s(e):i(e,{})},getterFor:function(e){return function(t){var r;if(!c(t)||(r=s(t)).type!==e)throw new m("Incompatible receiver, "+e+" required");return r}}}},7812:(e,t,r)=>{"use strict";var i=r(6264),s=r(3742),n=i("iterator"),o=Array.prototype;e.exports=function(e){return void 0!==e&&(s.Array===e||o[n]===e)}},1793:(e,t,r)=>{"use strict";var i=r(5807);e.exports=Array.isArray||function(e){return"Array"===i(e)}},2250:e=>{"use strict";var t="object"==typeof document&&document.all;e.exports=void 0===t&&void 0!==t?function(e){return"function"==typeof e||e===t}:function(e){return"function"==typeof e}},5468:(e,t,r)=>{"use strict";var i=r(1907),s=r(8828),n=r(2250),o=r(3948),a=r(5582),c=r(2647),h=function(){},u=a("Reflect","construct"),l=/^\s*(?:class|function)\b/,f=i(l.exec),d=!l.test(h),p=function(e){if(!n(e))return!1;try{return u(h,[],e),!0}catch(e){return!1}},m=function(e){if(!n(e))return!1;switch(o(e)){case"AsyncFunction":case"GeneratorFunction":case"AsyncGeneratorFunction":return!1}try{return d||!!f(l,c(e))}catch(e){return!0}};m.sham=!0,e.exports=!u||s((function(){var e;return p(p.call)||!p(Object)||!p((function(){e=!0}))||e}))?m:p},7463:(e,t,r)=>{"use strict";var i=r(8828),s=r(2250),n=/#|\.prototype\./,o=function(e,t){var r=c[a(e)];return r===u||r!==h&&(s(t)?i(t):!!t)},a=o.normalize=function(e){return String(e).replace(n,".").toLowerCase()},c=o.data={},h=o.NATIVE="N",u=o.POLYFILL="P";e.exports=o},7136:e=>{"use strict";e.exports=function(e){return null==e}},6285:(e,t,r)=>{"use strict";var i=r(2250);e.exports=function(e){return"object"==typeof e?null!==e:i(e)}},4018:(e,t,r)=>{"use strict";var i=r(6285);e.exports=function(e){return i(e)||null===e}},7376:e=>{"use strict";e.exports=!0},2087:(e,t,r)=>{"use strict";var i=r(6285),s=r(5807),n=r(6264)("match");e.exports=function(e){var t;return i(e)&&(void 0!==(t=e[n])?!!t:"RegExp"===s(e))}},5594:(e,t,r)=>{"use strict";var i=r(5582),s=r(2250),n=r(8280),o=r(1175),a=Object;e.exports=o?function(e){return"symbol"==typeof e}:function(e){var t=i("Symbol");return s(t)&&n(t.prototype,a(e))}},154:(e,t,r)=>{"use strict";var i=r(3930),s=r(6624),n=r(9367);e.exports=function(e,t,r){var o,a;s(e);try{if(!(o=n(e,"return"))){if("throw"===t)throw r;return r}o=i(o,e)}catch(e){a=!0,o=e}if("throw"===t)throw r;if(a)throw o;return s(o),r}},7181:(e,t,r)=>{"use strict";var i=r(5116).IteratorPrototype,s=r(8075),n=r(5817),o=r(4840),a=r(3742),c=function(){return this};e.exports=function(e,t,r,h){var u=t+" Iterator";return e.prototype=s(i,{next:n(+!h,r)}),o(e,u,!1,!0),a[u]=c,e}},183:(e,t,r)=>{"use strict";var i=r(1091),s=r(3930),n=r(7376),o=r(6833),a=r(2250),c=r(7181),h=r(5972),u=r(9192),l=r(4840),f=r(1626),d=r(8055),p=r(6264),m=r(3742),v=r(5116),_=o.PROPER,g=o.CONFIGURABLE,y=v.IteratorPrototype,b=v.BUGGY_SAFARI_ITERATORS,x=p("iterator"),w="keys",R="values",E="entries",T=function(){return this};e.exports=function(e,t,r,o,p,v,S){c(r,t,o);var A,L,O,C=function(e){if(e===p&&I)return I;if(!b&&e&&e in P)return P[e];switch(e){case w:case R:case E:return function(){return new r(this,e)}}return function(){return new r(this)}},M=t+" Iterator",F=!1,P=e.prototype,k=P[x]||P["@@iterator"]||p&&P[p],I=!b&&k||C(p),U="Array"===t&&P.entries||k;if(U&&(A=h(U.call(new e)))!==Object.prototype&&A.next&&(n||h(A)===y||(u?u(A,y):a(A[x])||d(A,x,T)),l(A,M,!0,!0),n&&(m[M]=T)),_&&p===R&&k&&k.name!==R&&(!n&&g?f(P,"name",R):(F=!0,I=function(){return s(k,this)})),p)if(L={values:C(R),keys:v?I:C(w),entries:C(E)},S)for(O in L)(b||F||!(O in P))&&d(P,O,L[O]);else i({target:t,proto:!0,forced:b||F},L);return n&&!S||P[x]===I||d(P,x,I,{name:p}),m[t]=I,L}},5116:(e,t,r)=>{"use strict";var i,s,n,o=r(8828),a=r(2250),c=r(6285),h=r(8075),u=r(5972),l=r(8055),f=r(6264),d=r(7376),p=f("iterator"),m=!1;[].keys&&("next"in(n=[].keys())?(s=u(u(n)))!==Object.prototype&&(i=s):m=!0),!c(i)||o((function(){var e={};return i[p].call(e)!==e}))?i={}:d&&(i=h(i)),a(i[p])||l(i,p,(function(){return this})),e.exports={IteratorPrototype:i,BUGGY_SAFARI_ITERATORS:m}},3742:e=>{"use strict";e.exports={}},575:(e,t,r)=>{"use strict";var i=r(3121);e.exports=function(e){return i(e.length)}},1176:e=>{"use strict";var t=Math.ceil,r=Math.floor;e.exports=Math.trunc||function(e){var i=+e;return(i>0?r:t)(i)}},9538:(e,t,r)=>{"use strict";var i=r(9447),s=r(1907),n=r(3930),o=r(8828),a=r(2875),c=r(7170),h=r(2574),u=r(9298),l=r(6946),f=Object.assign,d=Object.defineProperty,p=s([].concat);e.exports=!f||o((function(){if(i&&1!==f({b:1},f(d({},"a",{enumerable:!0,get:function(){d(this,"b",{value:3,enumerable:!1})}}),{b:2})).b)return!0;var e={},t={},r=Symbol("assign detection"),s="abcdefghijklmnopqrst";return e[r]=7,s.split("").forEach((function(e){t[e]=e})),7!==f({},e)[r]||a(f({},t)).join("")!==s}))?function(e,t){for(var r=u(e),s=arguments.length,o=1,f=c.f,d=h.f;s>o;)for(var m,v=l(arguments[o++]),_=f?p(a(v),f(v)):a(v),g=_.length,y=0;g>y;)m=_[y++],i&&!n(d,v,m)||(r[m]=v[m]);return r}:f},8075:(e,t,r)=>{"use strict";var i,s=r(6624),n=r(2220),o=r(376),a=r(8530),c=r(2416),h=r(9552),u=r(2522),l="prototype",f="script",d=u("IE_PROTO"),p=function(){},m=function(e){return"<"+f+">"+e+"</"+f+">"},v=function(e){e.write(m("")),e.close();var t=e.parentWindow.Object;return e=null,t},_=function(){try{i=new ActiveXObject("htmlfile")}catch(e){}var e,t,r;_="undefined"!=typeof document?document.domain&&i?v(i):(t=h("iframe"),r="java"+f+":",t.style.display="none",c.appendChild(t),t.src=String(r),(e=t.contentWindow.document).open(),e.write(m("document.F=Object")),e.close(),e.F):v(i);for(var s=o.length;s--;)delete _[l][o[s]];return _()};a[d]=!0,e.exports=Object.create||function(e,t){var r;return null!==e?(p[l]=s(e),r=new p,p[l]=null,r[d]=e):r=_(),void 0===t?r:n.f(r,t)}},2220:(e,t,r)=>{"use strict";var i=r(9447),s=r(8661),n=r(4284),o=r(6624),a=r(7374),c=r(2875);t.f=i&&!s?Object.defineProperties:function(e,t){o(e);for(var r,i=a(t),s=c(t),h=s.length,u=0;h>u;)n.f(e,r=s[u++],i[r]);return e}},4284:(e,t,r)=>{"use strict";var i=r(9447),s=r(3648),n=r(8661),o=r(6624),a=r(470),c=TypeError,h=Object.defineProperty,u=Object.getOwnPropertyDescriptor,l="enumerable",f="configurable",d="writable";t.f=i?n?function(e,t,r){if(o(e),t=a(t),o(r),"function"==typeof e&&"prototype"===t&&"value"in r&&d in r&&!r[d]){var i=u(e,t);i&&i[d]&&(e[t]=r.value,r={configurable:f in r?r[f]:i[f],enumerable:l in r?r[l]:i[l],writable:!1})}return h(e,t,r)}:h:function(e,t,r){if(o(e),t=a(t),o(r),s)try{return h(e,t,r)}catch(e){}if("get"in r||"set"in r)throw new c("Accessors not supported");return"value"in r&&(e[t]=r.value),e}},3846:(e,t,r)=>{"use strict";var i=r(9447),s=r(3930),n=r(2574),o=r(5817),a=r(7374),c=r(470),h=r(9724),u=r(3648),l=Object.getOwnPropertyDescriptor;t.f=i?l:function(e,t){if(e=a(e),t=c(t),u)try{return l(e,t)}catch(e){}if(h(e,t))return o(!s(n.f,e,t),e[t])}},5407:(e,t,r)=>{"use strict";var i=r(5807),s=r(7374),n=r(4443).f,o=r(3427),a="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[];e.exports.f=function(e){return a&&"Window"===i(e)?function(e){try{return n(e)}catch(e){return o(a)}}(e):n(s(e))}},4443:(e,t,r)=>{"use strict";var i=r(3045),s=r(376).concat("length","prototype");t.f=Object.getOwnPropertyNames||function(e){return i(e,s)}},7170:(e,t)=>{"use strict";t.f=Object.getOwnPropertySymbols},5972:(e,t,r)=>{"use strict";var i=r(9724),s=r(2250),n=r(9298),o=r(2522),a=r(7382),c=o("IE_PROTO"),h=Object,u=h.prototype;e.exports=a?h.getPrototypeOf:function(e){var t=n(e);if(i(t,c))return t[c];var r=t.constructor;return s(r)&&t instanceof r?r.prototype:t instanceof h?u:null}},8280:(e,t,r)=>{"use strict";var i=r(1907);e.exports=i({}.isPrototypeOf)},3045:(e,t,r)=>{"use strict";var i=r(1907),s=r(9724),n=r(7374),o=r(4436).indexOf,a=r(8530),c=i([].push);e.exports=function(e,t){var r,i=n(e),h=0,u=[];for(r in i)!s(a,r)&&s(i,r)&&c(u,r);for(;t.length>h;)s(i,r=t[h++])&&(~o(u,r)||c(u,r));return u}},2875:(e,t,r)=>{"use strict";var i=r(3045),s=r(376);e.exports=Object.keys||function(e){return i(e,s)}},2574:(e,t)=>{"use strict";var r={}.propertyIsEnumerable,i=Object.getOwnPropertyDescriptor,s=i&&!r.call({1:2},1);t.f=s?function(e){var t=i(this,e);return!!t&&t.enumerable}:r},9192:(e,t,r)=>{"use strict";var i=r(1871),s=r(6285),n=r(4239),o=r(43);e.exports=Object.setPrototypeOf||("__proto__"in{}?function(){var e,t=!1,r={};try{(e=i(Object.prototype,"__proto__","set"))(r,[]),t=r instanceof Array}catch(e){}return function(r,i){return n(r),o(i),s(r)?(t?e(r,i):r.__proto__=i,r):r}}():void 0)},4878:(e,t,r)=>{"use strict";var i=r(2623),s=r(3948);e.exports=i?{}.toString:function(){return"[object "+s(this)+"]"}},581:(e,t,r)=>{"use strict";var i=r(3930),s=r(2250),n=r(6285),o=TypeError;e.exports=function(e,t){var r,a;if("string"===t&&s(r=e.toString)&&!n(a=i(r,e)))return a;if(s(r=e.valueOf)&&!n(a=i(r,e)))return a;if("string"!==t&&s(r=e.toString)&&!n(a=i(r,e)))return a;throw new o("Can't convert object to primitive value")}},2046:e=>{"use strict";e.exports={}},5606:(e,t,r)=>{"use strict";var i=r(6624);e.exports=function(){var e=i(this),t="";return e.hasIndices&&(t+="d"),e.global&&(t+="g"),e.ignoreCase&&(t+="i"),e.multiline&&(t+="m"),e.dotAll&&(t+="s"),e.unicode&&(t+="u"),e.unicodeSets&&(t+="v"),e.sticky&&(t+="y"),t}},663:(e,t,r)=>{"use strict";var i=r(3930),s=r(9724),n=r(8280),o=r(5606),a=RegExp.prototype;e.exports=function(e){var t=e.flags;return void 0!==t||"flags"in a||s(e,"flags")||!n(a,e)?t:i(o,e)}},4239:(e,t,r)=>{"use strict";var i=r(7136),s=TypeError;e.exports=function(e){if(i(e))throw new s("Can't call method on "+e);return e}},2098:(e,t,r)=>{"use strict";var i=r(5951),s=r(9447),n=Object.getOwnPropertyDescriptor;e.exports=function(e){if(!s)return i[e];var t=n(i,e);return t&&t.value}},4840:(e,t,r)=>{"use strict";var i=r(2623),s=r(4284).f,n=r(1626),o=r(9724),a=r(4878),c=r(6264)("toStringTag");e.exports=function(e,t,r,h){var u=r?e:e&&e.prototype;u&&(o(u,c)||s(u,c,{configurable:!0,value:t}),h&&!i&&n(u,"toString",a))}},2522:(e,t,r)=>{"use strict";var i=r(5816),s=r(6499),n=i("keys");e.exports=function(e){return n[e]||(n[e]=s(e))}},6128:(e,t,r)=>{"use strict";var i=r(7376),s=r(5951),n=r(2532),o="__core-js_shared__",a=e.exports=s[o]||n(o,{});(a.versions||(a.versions=[])).push({version:"3.39.0",mode:i?"pure":"global",copyright:"© 2014-2024 Denis Pushkarev (zloirock.ru)",license:"https://github.com/zloirock/core-js/blob/v3.39.0/LICENSE",source:"https://github.com/zloirock/core-js"})},5816:(e,t,r)=>{"use strict";var i=r(6128);e.exports=function(e,t){return i[e]||(i[e]=t||{})}},1470:(e,t,r)=>{"use strict";var i=r(1907),s=r(5482),n=r(160),o=r(4239),a=i("".charAt),c=i("".charCodeAt),h=i("".slice),u=function(e){return function(t,r){var i,u,l=n(o(t)),f=s(r),d=l.length;return f<0||f>=d?e?"":void 0:(i=c(l,f))<55296||i>56319||f+1===d||(u=c(l,f+1))<56320||u>57343?e?a(l,f):i:e?h(l,f,f+2):u-56320+(i-55296<<10)+65536}};e.exports={codeAt:u(!1),charAt:u(!0)}},9156:(e,t,r)=>{"use strict";var i=r(1907),s=2147483647,n=/[^\0-\u007E]/,o=/[.\u3002\uFF0E\uFF61]/g,a="Overflow: input needs wider integers to process",c=RangeError,h=i(o.exec),u=Math.floor,l=String.fromCharCode,f=i("".charCodeAt),d=i([].join),p=i([].push),m=i("".replace),v=i("".split),_=i("".toLowerCase),g=function(e){return e+22+75*(e<26)},y=function(e,t,r){var i=0;for(e=r?u(e/700):e>>1,e+=u(e/t);e>455;)e=u(e/35),i+=36;return u(i+36*e/(e+38))},b=function(e){var t=[];e=function(e){for(var t=[],r=0,i=e.length;r<i;){var s=f(e,r++);if(s>=55296&&s<=56319&&r<i){var n=f(e,r++);56320==(64512&n)?p(t,((1023&s)<<10)+(1023&n)+65536):(p(t,s),r--)}else p(t,s)}return t}(e);var r,i,n=e.length,o=128,h=0,m=72;for(r=0;r<e.length;r++)(i=e[r])<128&&p(t,l(i));var v=t.length,_=v;for(v&&p(t,"-");_<n;){var b=s;for(r=0;r<e.length;r++)(i=e[r])>=o&&i<b&&(b=i);var x=_+1;if(b-o>u((s-h)/x))throw new c(a);for(h+=(b-o)*x,o=b,r=0;r<e.length;r++){if((i=e[r])<o&&++h>s)throw new c(a);if(i===o){for(var w=h,R=36;;){var E=R<=m?1:R>=m+26?26:R-m;if(w<E)break;var T=w-E,S=36-E;p(t,l(g(E+T%S))),w=u(T/S),R+=36}p(t,l(g(w))),m=y(h,x,_===v),h=0,_++}}h++,o++}return d(t,"")};e.exports=function(e){var t,r,i=[],s=v(m(_(e),o,"."),".");for(t=0;t<s.length;t++)r=s[t],p(i,h(n,r)?"xn--"+b(r):r);return d(i,".")}},5819:(e,t,r)=>{"use strict";var i=r(6833).PROPER,s=r(8828),n=r(6395);e.exports=function(e){return s((function(){return!!n[e]()||"​᠎"!=="​᠎"[e]()||i&&n[e].name!==e}))}},5993:(e,t,r)=>{"use strict";var i=r(1907),s=r(4239),n=r(160),o=r(6395),a=i("".replace),c=RegExp("^["+o+"]+"),h=RegExp("(^|[^"+o+"])["+o+"]+$"),u=function(e){return function(t){var r=n(s(t));return 1&e&&(r=a(r,c,"")),2&e&&(r=a(r,h,"$1")),r}};e.exports={start:u(1),end:u(2),trim:u(3)}},9846:(e,t,r)=>{"use strict";var i=r(798),s=r(8828),n=r(5951).String;e.exports=!!Object.getOwnPropertySymbols&&!s((function(){var e=Symbol("symbol detection");return!n(e)||!(Object(e)instanceof Symbol)||!Symbol.sham&&i&&i<41}))},3467:(e,t,r)=>{"use strict";var i=r(3930),s=r(5582),n=r(6264),o=r(8055);e.exports=function(){var e=s("Symbol"),t=e&&e.prototype,r=t&&t.valueOf,a=n("toPrimitive");t&&!t[a]&&o(t,a,(function(e){return i(r,this)}),{arity:1})}},2595:(e,t,r)=>{"use strict";var i=r(5582),s=r(1907),n=i("Symbol"),o=n.keyFor,a=s(n.prototype.valueOf);e.exports=n.isRegisteredSymbol||function(e){try{return void 0!==o(a(e))}catch(e){return!1}}},9197:(e,t,r)=>{"use strict";for(var i=r(5816),s=r(5582),n=r(1907),o=r(5594),a=r(6264),c=s("Symbol"),h=c.isWellKnownSymbol,u=s("Object","getOwnPropertyNames"),l=n(c.prototype.valueOf),f=i("wks"),d=0,p=u(c),m=p.length;d<m;d++)try{var v=p[d];o(c[v])&&a(v)}catch(e){}e.exports=function(e){if(h&&h(e))return!0;try{for(var t=l(e),r=0,i=u(f),s=i.length;r<s;r++)if(f[i[r]]==t)return!0}catch(e){}return!1}},4411:(e,t,r)=>{"use strict";var i=r(9846);e.exports=i&&!!Symbol.for&&!!Symbol.keyFor},4849:(e,t,r)=>{"use strict";var i=r(5482),s=Math.max,n=Math.min;e.exports=function(e,t){var r=i(e);return r<0?s(r+t,0):n(r,t)}},7374:(e,t,r)=>{"use strict";var i=r(6946),s=r(4239);e.exports=function(e){return i(s(e))}},5482:(e,t,r)=>{"use strict";var i=r(1176);e.exports=function(e){var t=+e;return t!=t||0===t?0:i(t)}},3121:(e,t,r)=>{"use strict";var i=r(5482),s=Math.min;e.exports=function(e){var t=i(e);return t>0?s(t,9007199254740991):0}},9298:(e,t,r)=>{"use strict";var i=r(4239),s=Object;e.exports=function(e){return s(i(e))}},6028:(e,t,r)=>{"use strict";var i=r(3930),s=r(6285),n=r(5594),o=r(9367),a=r(581),c=r(6264),h=TypeError,u=c("toPrimitive");e.exports=function(e,t){if(!s(e)||n(e))return e;var r,c=o(e,u);if(c){if(void 0===t&&(t="default"),r=i(c,e,t),!s(r)||n(r))return r;throw new h("Can't convert object to primitive value")}return void 0===t&&(t="number"),a(e,t)}},470:(e,t,r)=>{"use strict";var i=r(6028),s=r(5594);e.exports=function(e){var t=i(e,"string");return s(t)?t:t+""}},2623:(e,t,r)=>{"use strict";var i={};i[r(6264)("toStringTag")]="z",e.exports="[object z]"===String(i)},160:(e,t,r)=>{"use strict";var i=r(3948),s=String;e.exports=function(e){if("Symbol"===i(e))throw new TypeError("Cannot convert a Symbol value to a string");return s(e)}},4640:e=>{"use strict";var t=String;e.exports=function(e){try{return t(e)}catch(e){return"Object"}}},6499:(e,t,r)=>{"use strict";var i=r(1907),s=0,n=Math.random(),o=i(1..toString);e.exports=function(e){return"Symbol("+(void 0===e?"":e)+")_"+o(++s+n,36)}},4791:(e,t,r)=>{"use strict";var i=r(8828),s=r(6264),n=r(9447),o=r(7376),a=s("iterator");e.exports=!i((function(){var e=new URL("b?a=1&b=2&c=3","https://a"),t=e.searchParams,r=new URLSearchParams("a=1&a=2&b=3"),i="";return e.pathname="c%20d",t.forEach((function(e,r){t.delete("b"),i+=r+e})),r.delete("a",2),r.delete("b",void 0),o&&(!e.toJSON||!r.has("a",1)||r.has("a",2)||!r.has("a",void 0)||r.has("b"))||!t.size&&(o||!n)||!t.sort||"https://a/c%20d?a=1&c=3"!==e.href||"3"!==t.get("c")||"a=1"!==String(new URLSearchParams("?a=1"))||!t[a]||"a"!==new URL("https://a@b").username||"b"!==new URLSearchParams(new URLSearchParams("a=b")).get("a")||"xn--e1aybc"!==new URL("https://тест").host||"#%D0%B1"!==new URL("https://a#б").hash||"a1c3"!==i||"x"!==new URL("https://x",void 0).host}))},1175:(e,t,r)=>{"use strict";var i=r(9846);e.exports=i&&!Symbol.sham&&"symbol"==typeof Symbol.iterator},8661:(e,t,r)=>{"use strict";var i=r(9447),s=r(8828);e.exports=i&&s((function(){return 42!==Object.defineProperty((function(){}),"prototype",{value:42,writable:!1}).prototype}))},4787:e=>{"use strict";var t=TypeError;e.exports=function(e,r){if(e<r)throw new t("Not enough arguments");return e}},551:(e,t,r)=>{"use strict";var i=r(5951),s=r(2250),n=i.WeakMap;e.exports=s(n)&&/native code/.test(String(n))},366:(e,t,r)=>{"use strict";var i=r(2046),s=r(9724),n=r(560),o=r(4284).f;e.exports=function(e){var t=i.Symbol||(i.Symbol={});s(t,e)||o(t,e,{value:n.f(e)})}},560:(e,t,r)=>{"use strict";var i=r(6264);t.f=i},6264:(e,t,r)=>{"use strict";var i=r(5951),s=r(5816),n=r(9724),o=r(6499),a=r(9846),c=r(1175),h=i.Symbol,u=s("wks"),l=c?h.for||h:h&&h.withoutSetter||o;e.exports=function(e){return n(u,e)||(u[e]=a&&n(h,e)?h[e]:l("Symbol."+e)),u[e]}},6395:e=>{"use strict";e.exports="\t\n\v\f\r                　\u2028\u2029\ufeff"},8545:(e,t,r)=>{"use strict";var i=r(1091),s=r(8828),n=r(1793),o=r(6285),a=r(9298),c=r(575),h=r(8024),u=r(5543),l=r(6968),f=r(7171),d=r(6264),p=r(798),m=d("isConcatSpreadable"),v=p>=51||!s((function(){var e=[];return e[m]=!1,e.concat()[0]!==e})),_=function(e){if(!o(e))return!1;var t=e[m];return void 0!==t?!!t:n(e)};i({target:"Array",proto:!0,arity:1,forced:!v||!f("concat")},{concat:function(e){var t,r,i,s,n,o=a(this),f=l(o,0),d=0;for(t=-1,i=arguments.length;t<i;t++)if(_(n=-1===t?o:arguments[t]))for(s=c(n),h(d+s),r=0;r<s;r++,d++)r in n&&u(f,d,n[r]);else h(d+1),u(f,d++,n);return f.length=d,f}})},9363:(e,t,r)=>{"use strict";var i=r(7374),s=r(2156),n=r(3742),o=r(4932),a=r(4284).f,c=r(183),h=r(9550),u=r(7376),l=r(9447),f="Array Iterator",d=o.set,p=o.getterFor(f);e.exports=c(Array,"Array",(function(e,t){d(this,{type:f,target:i(e),index:0,kind:t})}),(function(){var e=p(this),t=e.target,r=e.index++;if(!t||r>=t.length)return e.target=null,h(void 0,!0);switch(e.kind){case"keys":return h(r,!1);case"values":return h(t[r],!1)}return h([r,t[r]],!1)}),"values");var m=n.Arguments=n.Array;if(s("keys"),s("values"),s("entries"),!u&&l&&"values"!==m.name)try{a(m,"name",{value:"values"})}catch(e){}},8537:()=>{},9721:(e,t,r)=>{"use strict";var i=r(1091),s=r(5582),n=r(6024),o=r(3930),a=r(1907),c=r(8828),h=r(2250),u=r(5594),l=r(3427),f=r(6656),d=r(9846),p=String,m=s("JSON","stringify"),v=a(/./.exec),_=a("".charAt),g=a("".charCodeAt),y=a("".replace),b=a(1..toString),x=/[\uD800-\uDFFF]/g,w=/^[\uD800-\uDBFF]$/,R=/^[\uDC00-\uDFFF]$/,E=!d||c((function(){var e=s("Symbol")("stringify detection");return"[null]"!==m([e])||"{}"!==m({a:e})||"{}"!==m(Object(e))})),T=c((function(){return'"\\udf06\\ud834"'!==m("\udf06\ud834")||'"\\udead"'!==m("\udead")})),S=function(e,t){var r=l(arguments),i=f(t);if(h(i)||void 0!==e&&!u(e))return r[1]=function(e,t){if(h(i)&&(t=o(i,this,p(e),t)),!u(t))return t},n(m,null,r)},A=function(e,t,r){var i=_(r,t-1),s=_(r,t+1);return v(w,e)&&!v(R,s)||v(R,e)&&!v(w,i)?"\\u"+b(g(e,0),16):e};m&&i({target:"JSON",stat:!0,arity:3,forced:E||T},{stringify:function(e,t,r){var i=l(arguments),s=n(E?S:m,null,i);return T&&"string"==typeof s?y(s,x,A):s}})},7024:(e,t,r)=>{"use strict";var i=r(5951);r(4840)(i.JSON,"JSON",!0)},8172:()=>{},6750:(e,t,r)=>{"use strict";var i=r(1091),s=r(9447),n=r(4284).f;i({target:"Object",stat:!0,forced:Object.defineProperty!==n,sham:!s},{defineProperty:n})},5264:(e,t,r)=>{"use strict";var i=r(1091),s=r(9846),n=r(8828),o=r(7170),a=r(9298);i({target:"Object",stat:!0,forced:!s||n((function(){o.f(1)}))},{getOwnPropertySymbols:function(e){var t=o.f;return t?t(a(e)):[]}})},3643:()=>{},5205:()=>{},1398:()=>{},1074:(e,t,r)=>{"use strict";var i=r(1091),s=r(1907),n=r(4849),o=RangeError,a=String.fromCharCode,c=String.fromCodePoint,h=s([].join);i({target:"String",stat:!0,arity:1,forced:!!c&&1!==c.length},{fromCodePoint:function(e){for(var t,r=[],i=arguments.length,s=0;i>s;){if(t=+arguments[s++],n(t,1114111)!==t)throw new o(t+" is not a valid code point");r[s]=t<65536?a(t):a(55296+((t-=65536)>>10),t%1024+56320)}return h(r,"")}})},7057:(e,t,r)=>{"use strict";var i=r(1470).charAt,s=r(160),n=r(4932),o=r(183),a=r(9550),c="String Iterator",h=n.set,u=n.getterFor(c);o(String,"String",(function(e){h(this,{type:c,string:s(e),index:0})}),(function(){var e,t=u(this),r=t.string,s=t.index;return s>=r.length?a(void 0,!0):(e=i(r,s),t.index+=e.length,a(e,!1))}))},929:(e,t,r)=>{"use strict";var i=r(1091),s=r(3930),n=r(1907),o=r(4239),a=r(2250),c=r(7136),h=r(2087),u=r(160),l=r(9367),f=r(663),d=r(7703),p=r(6264),m=r(7376),v=p("replace"),_=TypeError,g=n("".indexOf),y=n("".replace),b=n("".slice),x=Math.max;i({target:"String",proto:!0},{replaceAll:function(e,t){var r,i,n,p,w,R,E,T,S,A,L=o(this),O=0,C="";if(!c(e)){if((r=h(e))&&(i=u(o(f(e))),!~g(i,"g")))throw new _("`.replaceAll` does not allow non-global regexes");if(n=l(e,v))return s(n,e,L,t);if(m&&r)return y(u(L),e,t)}for(p=u(L),w=u(e),(R=a(t))||(t=u(t)),E=w.length,T=x(1,E),S=g(p,w);-1!==S;)A=R?u(t(w,S,p)):d(w,p,S,[],void 0,t),C+=b(p,O,S)+A,O=S+E,S=S+T>p.length?-1:g(p,w,S+T);return O<p.length&&(C+=b(p,O)),C}})},1995:()=>{},727:(e,t,r)=>{"use strict";var i=r(1091),s=r(5993).trim;i({target:"String",proto:!0,forced:r(5819)("trim")},{trim:function(){return s(this)}})},3997:(e,t,r)=>{"use strict";r(366)("asyncIterator")},3674:(e,t,r)=>{"use strict";var i=r(1091),s=r(5951),n=r(3930),o=r(1907),a=r(7376),c=r(9447),h=r(9846),u=r(8828),l=r(9724),f=r(8280),d=r(6624),p=r(7374),m=r(470),v=r(160),_=r(5817),g=r(8075),y=r(2875),b=r(4443),x=r(5407),w=r(7170),R=r(3846),E=r(4284),T=r(2220),S=r(2574),A=r(8055),L=r(9251),O=r(5816),C=r(2522),M=r(8530),F=r(6499),P=r(6264),k=r(560),I=r(366),U=r(3467),D=r(4840),B=r(4932),N=r(726).forEach,G=C("hidden"),V="Symbol",W="prototype",z=B.set,j=B.getterFor(V),H=Object[W],X=s.Symbol,q=X&&X[W],Y=s.RangeError,K=s.TypeError,$=s.QObject,J=R.f,Z=E.f,Q=x.f,ee=S.f,te=o([].push),re=O("symbols"),ie=O("op-symbols"),se=O("wks"),ne=!$||!$[W]||!$[W].findChild,oe=function(e,t,r){var i=J(H,t);i&&delete H[t],Z(e,t,r),i&&e!==H&&Z(H,t,i)},ae=c&&u((function(){return 7!==g(Z({},"a",{get:function(){return Z(this,"a",{value:7}).a}})).a}))?oe:Z,ce=function(e,t){var r=re[e]=g(q);return z(r,{type:V,tag:e,description:t}),c||(r.description=t),r},he=function(e,t,r){e===H&&he(ie,t,r),d(e);var i=m(t);return d(r),l(re,i)?(r.enumerable?(l(e,G)&&e[G][i]&&(e[G][i]=!1),r=g(r,{enumerable:_(0,!1)})):(l(e,G)||Z(e,G,_(1,g(null))),e[G][i]=!0),ae(e,i,r)):Z(e,i,r)},ue=function(e,t){d(e);var r=p(t),i=y(r).concat(pe(r));return N(i,(function(t){c&&!n(le,r,t)||he(e,t,r[t])})),e},le=function(e){var t=m(e),r=n(ee,this,t);return!(this===H&&l(re,t)&&!l(ie,t))&&(!(r||!l(this,t)||!l(re,t)||l(this,G)&&this[G][t])||r)},fe=function(e,t){var r=p(e),i=m(t);if(r!==H||!l(re,i)||l(ie,i)){var s=J(r,i);return!s||!l(re,i)||l(r,G)&&r[G][i]||(s.enumerable=!0),s}},de=function(e){var t=Q(p(e)),r=[];return N(t,(function(e){l(re,e)||l(M,e)||te(r,e)})),r},pe=function(e){var t=e===H,r=Q(t?ie:p(e)),i=[];return N(r,(function(e){!l(re,e)||t&&!l(H,e)||te(i,re[e])})),i};h||(A(q=(X=function(){if(f(q,this))throw new K("Symbol is not a constructor");var e=arguments.length&&void 0!==arguments[0]?v(arguments[0]):void 0,t=F(e),r=function(e){var i=void 0===this?s:this;i===H&&n(r,ie,e),l(i,G)&&l(i[G],t)&&(i[G][t]=!1);var o=_(1,e);try{ae(i,t,o)}catch(e){if(!(e instanceof Y))throw e;oe(i,t,o)}};return c&&ne&&ae(H,t,{configurable:!0,set:r}),ce(t,e)})[W],"toString",(function(){return j(this).tag})),A(X,"withoutSetter",(function(e){return ce(F(e),e)})),S.f=le,E.f=he,T.f=ue,R.f=fe,b.f=x.f=de,w.f=pe,k.f=function(e){return ce(P(e),e)},c&&(L(q,"description",{configurable:!0,get:function(){return j(this).description}}),a||A(H,"propertyIsEnumerable",le,{unsafe:!0}))),i({global:!0,constructor:!0,wrap:!0,forced:!h,sham:!h},{Symbol:X}),N(y(se),(function(e){I(e)})),i({target:V,stat:!0,forced:!h},{useSetter:function(){ne=!0},useSimple:function(){ne=!1}}),i({target:"Object",stat:!0,forced:!h,sham:!c},{create:function(e,t){return void 0===t?g(e):ue(g(e),t)},defineProperty:he,defineProperties:ue,getOwnPropertyDescriptor:fe}),i({target:"Object",stat:!0,forced:!h},{getOwnPropertyNames:de}),U(),D(X,V),M[G]=!0},5084:()=>{},3313:(e,t,r)=>{"use strict";var i=r(1091),s=r(5582),n=r(9724),o=r(160),a=r(5816),c=r(4411),h=a("string-to-symbol-registry"),u=a("symbol-to-string-registry");i({target:"Symbol",stat:!0,forced:!c},{for:function(e){var t=o(e);if(n(h,t))return h[t];var r=s("Symbol")(t);return h[t]=r,u[r]=t,r}})},2596:(e,t,r)=>{"use strict";r(366)("hasInstance")},5721:(e,t,r)=>{"use strict";r(366)("isConcatSpreadable")},4954:(e,t,r)=>{"use strict";r(366)("iterator")},4452:(e,t,r)=>{"use strict";r(3674),r(3313),r(751),r(9721),r(5264)},751:(e,t,r)=>{"use strict";var i=r(1091),s=r(9724),n=r(5594),o=r(4640),a=r(5816),c=r(4411),h=a("symbol-to-string-registry");i({target:"Symbol",stat:!0,forced:!c},{keyFor:function(e){if(!n(e))throw new TypeError(o(e)+" is not a symbol");if(s(h,e))return h[e]}})},3377:(e,t,r)=>{"use strict";r(366)("matchAll")},4123:(e,t,r)=>{"use strict";r(366)("match")},2230:(e,t,r)=>{"use strict";r(366)("replace")},5344:(e,t,r)=>{"use strict";r(366)("search")},1660:(e,t,r)=>{"use strict";r(366)("species")},4610:(e,t,r)=>{"use strict";r(366)("split")},3669:(e,t,r)=>{"use strict";var i=r(366),s=r(3467);i("toPrimitive"),s()},4810:(e,t,r)=>{"use strict";var i=r(5582),s=r(366),n=r(4840);s("toStringTag"),n(i("Symbol"),"Symbol")},3325:(e,t,r)=>{"use strict";r(366)("unscopables")},768:(e,t,r)=>{"use strict";var i=r(6264),s=r(4284).f,n=i("metadata"),o=Function.prototype;void 0===o[n]&&s(o,n,{value:null})},6038:(e,t,r)=>{"use strict";r(929)},8549:(e,t,r)=>{"use strict";r(366)("asyncDispose")},1697:(e,t,r)=>{"use strict";r(366)("customMatcher")},7152:(e,t,r)=>{"use strict";r(366)("dispose")},3939:(e,t,r)=>{"use strict";r(1091)({target:"Symbol",stat:!0},{isRegisteredSymbol:r(2595)})},3422:(e,t,r)=>{"use strict";r(1091)({target:"Symbol",stat:!0,name:"isRegisteredSymbol"},{isRegistered:r(2595)})},1785:(e,t,r)=>{"use strict";r(1091)({target:"Symbol",stat:!0,forced:!0},{isWellKnownSymbol:r(9197)})},36:(e,t,r)=>{"use strict";r(1091)({target:"Symbol",stat:!0,name:"isWellKnownSymbol",forced:!0},{isWellKnown:r(9197)})},8703:(e,t,r)=>{"use strict";r(366)("matcher")},6878:(e,t,r)=>{"use strict";r(366)("metadataKey")},1372:(e,t,r)=>{"use strict";r(366)("metadata")},4664:(e,t,r)=>{"use strict";r(366)("observable")},9671:(e,t,r)=>{"use strict";r(366)("patternMatch")},359:(e,t,r)=>{"use strict";r(366)("replaceAll")},2560:(e,t,r)=>{"use strict";r(9363);var i=r(9287),s=r(5951),n=r(4840),o=r(3742);for(var a in i)n(s[a],a),o[a]=o.Array},7105:(e,t,r)=>{"use strict";r(9363),r(1074);var i=r(1091),s=r(5951),n=r(2098),o=r(5582),a=r(3930),c=r(1907),h=r(9447),u=r(4791),l=r(8055),f=r(9251),d=r(2802),p=r(4840),m=r(7181),v=r(4932),_=r(9596),g=r(2250),y=r(9724),b=r(8311),x=r(3948),w=r(6624),R=r(6285),E=r(160),T=r(8075),S=r(5817),A=r(300),L=r(3448),O=r(9550),C=r(4787),M=r(6264),F=r(4321),P=M("iterator"),k="URLSearchParams",I=k+"Iterator",U=v.set,D=v.getterFor(k),B=v.getterFor(I),N=n("fetch"),G=n("Request"),V=n("Headers"),W=G&&G.prototype,z=V&&V.prototype,j=s.TypeError,H=s.encodeURIComponent,X=String.fromCharCode,q=o("String","fromCodePoint"),Y=parseInt,K=c("".charAt),$=c([].join),J=c([].push),Z=c("".replace),Q=c([].shift),ee=c([].splice),te=c("".split),re=c("".slice),ie=c(/./.exec),se=/\+/g,ne=/^[0-9a-f]+$/i,oe=function(e,t){var r=re(e,t,t+2);return ie(ne,r)?Y(r,16):NaN},ae=function(e){for(var t=0,r=128;r>0&&e&r;r>>=1)t++;return t},ce=function(e){var t=null;switch(e.length){case 1:t=e[0];break;case 2:t=(31&e[0])<<6|63&e[1];break;case 3:t=(15&e[0])<<12|(63&e[1])<<6|63&e[2];break;case 4:t=(7&e[0])<<18|(63&e[1])<<12|(63&e[2])<<6|63&e[3]}return t>1114111?null:t},he=function(e){for(var t=(e=Z(e,se," ")).length,r="",i=0;i<t;){var s=K(e,i);if("%"===s){if("%"===K(e,i+1)||i+3>t){r+="%",i++;continue}var n=oe(e,i+1);if(n!=n){r+=s,i++;continue}i+=2;var o=ae(n);if(0===o)s=X(n);else{if(1===o||o>4){r+="�",i++;continue}for(var a=[n],c=1;c<o&&!(3+ ++i>t||"%"!==K(e,i));){var h=oe(e,i+1);if(h!=h){i+=3;break}if(h>191||h<128)break;J(a,h),i+=2,c++}if(a.length!==o){r+="�";continue}var u=ce(a);null===u?r+="�":s=q(u)}}r+=s,i++}return r},ue=/[!'()~]|%20/g,le={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+"},fe=function(e){return le[e]},de=function(e){return Z(H(e),ue,fe)},pe=m((function(e,t){U(this,{type:I,target:D(e).entries,index:0,kind:t})}),k,(function(){var e=B(this),t=e.target,r=e.index++;if(!t||r>=t.length)return e.target=null,O(void 0,!0);var i=t[r];switch(e.kind){case"keys":return O(i.key,!1);case"values":return O(i.value,!1)}return O([i.key,i.value],!1)}),!0),me=function(e){this.entries=[],this.url=null,void 0!==e&&(R(e)?this.parseObject(e):this.parseQuery("string"==typeof e?"?"===K(e,0)?re(e,1):e:E(e)))};me.prototype={type:k,bindURL:function(e){this.url=e,this.update()},parseObject:function(e){var t,r,i,s,n,o,c,h=this.entries,u=L(e);if(u)for(r=(t=A(e,u)).next;!(i=a(r,t)).done;){if(n=(s=A(w(i.value))).next,(o=a(n,s)).done||(c=a(n,s)).done||!a(n,s).done)throw new j("Expected sequence with length 2");J(h,{key:E(o.value),value:E(c.value)})}else for(var l in e)y(e,l)&&J(h,{key:l,value:E(e[l])})},parseQuery:function(e){if(e)for(var t,r,i=this.entries,s=te(e,"&"),n=0;n<s.length;)(t=s[n++]).length&&(r=te(t,"="),J(i,{key:he(Q(r)),value:he($(r,"="))}))},serialize:function(){for(var e,t=this.entries,r=[],i=0;i<t.length;)e=t[i++],J(r,de(e.key)+"="+de(e.value));return $(r,"&")},update:function(){this.entries.length=0,this.parseQuery(this.url.query)},updateURL:function(){this.url&&this.url.update()}};var ve=function(){_(this,_e);var e=U(this,new me(arguments.length>0?arguments[0]:void 0));h||(this.size=e.entries.length)},_e=ve.prototype;if(d(_e,{append:function(e,t){var r=D(this);C(arguments.length,2),J(r.entries,{key:E(e),value:E(t)}),h||this.length++,r.updateURL()},delete:function(e){for(var t=D(this),r=C(arguments.length,1),i=t.entries,s=E(e),n=r<2?void 0:arguments[1],o=void 0===n?n:E(n),a=0;a<i.length;){var c=i[a];if(c.key!==s||void 0!==o&&c.value!==o)a++;else if(ee(i,a,1),void 0!==o)break}h||(this.size=i.length),t.updateURL()},get:function(e){var t=D(this).entries;C(arguments.length,1);for(var r=E(e),i=0;i<t.length;i++)if(t[i].key===r)return t[i].value;return null},getAll:function(e){var t=D(this).entries;C(arguments.length,1);for(var r=E(e),i=[],s=0;s<t.length;s++)t[s].key===r&&J(i,t[s].value);return i},has:function(e){for(var t=D(this).entries,r=C(arguments.length,1),i=E(e),s=r<2?void 0:arguments[1],n=void 0===s?s:E(s),o=0;o<t.length;){var a=t[o++];if(a.key===i&&(void 0===n||a.value===n))return!0}return!1},set:function(e,t){var r=D(this);C(arguments.length,1);for(var i,s=r.entries,n=!1,o=E(e),a=E(t),c=0;c<s.length;c++)(i=s[c]).key===o&&(n?ee(s,c--,1):(n=!0,i.value=a));n||J(s,{key:o,value:a}),h||(this.size=s.length),r.updateURL()},sort:function(){var e=D(this);F(e.entries,(function(e,t){return e.key>t.key?1:-1})),e.updateURL()},forEach:function(e){for(var t,r=D(this).entries,i=b(e,arguments.length>1?arguments[1]:void 0),s=0;s<r.length;)i((t=r[s++]).value,t.key,this)},keys:function(){return new pe(this,"keys")},values:function(){return new pe(this,"values")},entries:function(){return new pe(this,"entries")}},{enumerable:!0}),l(_e,P,_e.entries,{name:"entries"}),l(_e,"toString",(function(){return D(this).serialize()}),{enumerable:!0}),h&&f(_e,"size",{get:function(){return D(this).entries.length},configurable:!0,enumerable:!0}),p(ve,k),i({global:!0,constructor:!0,forced:!u},{URLSearchParams:ve}),!u&&g(V)){var ge=c(z.has),ye=c(z.set),be=function(e){if(R(e)){var t,r=e.body;if(x(r)===k)return t=e.headers?new V(e.headers):new V,ge(t,"content-type")||ye(t,"content-type","application/x-www-form-urlencoded;charset=UTF-8"),T(e,{body:S(0,E(r)),headers:S(0,t)})}return e};if(g(N)&&i({global:!0,enumerable:!0,dontCallGetSet:!0,forced:!0},{fetch:function(e){return N(e,arguments.length>1?be(arguments[1]):{})}}),g(G)){var xe=function(e){return _(this,W),new G(e,arguments.length>1?be(arguments[1]):{})};W.constructor=xe,xe.prototype=W,i({global:!0,constructor:!0,dontCallGetSet:!0,forced:!0},{Request:xe})}}e.exports={URLSearchParams:ve,getState:D}},5042:()=>{},7649:()=>{},6299:(e,t,r)=>{"use strict";r(7105)},3604:()=>{},8669:(e,t,r)=>{"use strict";var i=r(1091),s=r(5582),n=r(8828),o=r(4787),a=r(160),c=r(4791),h=s("URL"),u=c&&n((function(){h.canParse()})),l=n((function(){return 1!==h.canParse.length}));i({target:"URL",stat:!0,forced:!u||l},{canParse:function(e){var t=o(arguments.length,1),r=a(e),i=t<2||void 0===arguments[1]?void 0:a(arguments[1]);try{return!!new h(r,i)}catch(e){return!1}}})},6909:(e,t,r)=>{"use strict";r(7057);var i,s=r(1091),n=r(9447),o=r(4791),a=r(5951),c=r(8311),h=r(1907),u=r(8055),l=r(9251),f=r(9596),d=r(9724),p=r(9538),m=r(1229),v=r(3427),_=r(1470).codeAt,g=r(9156),y=r(160),b=r(4840),x=r(4787),w=r(7105),R=r(4932),E=R.set,T=R.getterFor("URL"),S=w.URLSearchParams,A=w.getState,L=a.URL,O=a.TypeError,C=a.parseInt,M=Math.floor,F=Math.pow,P=h("".charAt),k=h(/./.exec),I=h([].join),U=h(1..toString),D=h([].pop),B=h([].push),N=h("".replace),G=h([].shift),V=h("".split),W=h("".slice),z=h("".toLowerCase),j=h([].unshift),H="Invalid scheme",X="Invalid host",q="Invalid port",Y=/[a-z]/i,K=/[\d+-.a-z]/i,$=/\d/,J=/^0x/i,Z=/^[0-7]+$/,Q=/^\d+$/,ee=/^[\da-f]+$/i,te=/[\0\t\n\r #%/:<>?@[\\\]^|]/,re=/[\0\t\n\r #/:<>?@[\\\]^|]/,ie=/^[\u0000-\u0020]+/,se=/(^|[^\u0000-\u0020])[\u0000-\u0020]+$/,ne=/[\t\n\r]/g,oe=function(e){var t,r,i,s;if("number"==typeof e){for(t=[],r=0;r<4;r++)j(t,e%256),e=M(e/256);return I(t,".")}if("object"==typeof e){for(t="",i=function(e){for(var t=null,r=1,i=null,s=0,n=0;n<8;n++)0!==e[n]?(s>r&&(t=i,r=s),i=null,s=0):(null===i&&(i=n),++s);return s>r?i:t}(e),r=0;r<8;r++)s&&0===e[r]||(s&&(s=!1),i===r?(t+=r?":":"::",s=!0):(t+=U(e[r],16),r<7&&(t+=":")));return"["+t+"]"}return e},ae={},ce=p({},ae,{" ":1,'"':1,"<":1,">":1,"`":1}),he=p({},ce,{"#":1,"?":1,"{":1,"}":1}),ue=p({},he,{"/":1,":":1,";":1,"=":1,"@":1,"[":1,"\\":1,"]":1,"^":1,"|":1}),le=function(e,t){var r=_(e,0);return r>32&&r<127&&!d(t,e)?e:encodeURIComponent(e)},fe={ftp:21,file:null,http:80,https:443,ws:80,wss:443},de=function(e,t){var r;return 2===e.length&&k(Y,P(e,0))&&(":"===(r=P(e,1))||!t&&"|"===r)},pe=function(e){var t;return e.length>1&&de(W(e,0,2))&&(2===e.length||"/"===(t=P(e,2))||"\\"===t||"?"===t||"#"===t)},me=function(e){return"."===e||"%2e"===z(e)},ve={},_e={},ge={},ye={},be={},xe={},we={},Re={},Ee={},Te={},Se={},Ae={},Le={},Oe={},Ce={},Me={},Fe={},Pe={},ke={},Ie={},Ue={},De=function(e,t,r){var i,s,n,o=y(e);if(t){if(s=this.parse(o))throw new O(s);this.searchParams=null}else{if(void 0!==r&&(i=new De(r,!0)),s=this.parse(o,null,i))throw new O(s);(n=A(new S)).bindURL(this),this.searchParams=n}};De.prototype={type:"URL",parse:function(e,t,r){var s,n,o,a,c,h=this,u=t||ve,l=0,f="",p=!1,_=!1,g=!1;for(e=y(e),t||(h.scheme="",h.username="",h.password="",h.host=null,h.port=null,h.path=[],h.query=null,h.fragment=null,h.cannotBeABaseURL=!1,e=N(e,ie,""),e=N(e,se,"$1")),e=N(e,ne,""),s=m(e);l<=s.length;){switch(n=s[l],u){case ve:if(!n||!k(Y,n)){if(t)return H;u=ge;continue}f+=z(n),u=_e;break;case _e:if(n&&(k(K,n)||"+"===n||"-"===n||"."===n))f+=z(n);else{if(":"!==n){if(t)return H;f="",u=ge,l=0;continue}if(t&&(h.isSpecial()!==d(fe,f)||"file"===f&&(h.includesCredentials()||null!==h.port)||"file"===h.scheme&&!h.host))return;if(h.scheme=f,t)return void(h.isSpecial()&&fe[h.scheme]===h.port&&(h.port=null));f="","file"===h.scheme?u=Oe:h.isSpecial()&&r&&r.scheme===h.scheme?u=ye:h.isSpecial()?u=Re:"/"===s[l+1]?(u=be,l++):(h.cannotBeABaseURL=!0,B(h.path,""),u=ke)}break;case ge:if(!r||r.cannotBeABaseURL&&"#"!==n)return H;if(r.cannotBeABaseURL&&"#"===n){h.scheme=r.scheme,h.path=v(r.path),h.query=r.query,h.fragment="",h.cannotBeABaseURL=!0,u=Ue;break}u="file"===r.scheme?Oe:xe;continue;case ye:if("/"!==n||"/"!==s[l+1]){u=xe;continue}u=Ee,l++;break;case be:if("/"===n){u=Te;break}u=Pe;continue;case xe:if(h.scheme=r.scheme,n===i)h.username=r.username,h.password=r.password,h.host=r.host,h.port=r.port,h.path=v(r.path),h.query=r.query;else if("/"===n||"\\"===n&&h.isSpecial())u=we;else if("?"===n)h.username=r.username,h.password=r.password,h.host=r.host,h.port=r.port,h.path=v(r.path),h.query="",u=Ie;else{if("#"!==n){h.username=r.username,h.password=r.password,h.host=r.host,h.port=r.port,h.path=v(r.path),h.path.length--,u=Pe;continue}h.username=r.username,h.password=r.password,h.host=r.host,h.port=r.port,h.path=v(r.path),h.query=r.query,h.fragment="",u=Ue}break;case we:if(!h.isSpecial()||"/"!==n&&"\\"!==n){if("/"!==n){h.username=r.username,h.password=r.password,h.host=r.host,h.port=r.port,u=Pe;continue}u=Te}else u=Ee;break;case Re:if(u=Ee,"/"!==n||"/"!==P(f,l+1))continue;l++;break;case Ee:if("/"!==n&&"\\"!==n){u=Te;continue}break;case Te:if("@"===n){p&&(f="%40"+f),p=!0,o=m(f);for(var b=0;b<o.length;b++){var x=o[b];if(":"!==x||g){var w=le(x,ue);g?h.password+=w:h.username+=w}else g=!0}f=""}else if(n===i||"/"===n||"?"===n||"#"===n||"\\"===n&&h.isSpecial()){if(p&&""===f)return"Invalid authority";l-=m(f).length+1,f="",u=Se}else f+=n;break;case Se:case Ae:if(t&&"file"===h.scheme){u=Me;continue}if(":"!==n||_){if(n===i||"/"===n||"?"===n||"#"===n||"\\"===n&&h.isSpecial()){if(h.isSpecial()&&""===f)return X;if(t&&""===f&&(h.includesCredentials()||null!==h.port))return;if(a=h.parseHost(f))return a;if(f="",u=Fe,t)return;continue}"["===n?_=!0:"]"===n&&(_=!1),f+=n}else{if(""===f)return X;if(a=h.parseHost(f))return a;if(f="",u=Le,t===Ae)return}break;case Le:if(!k($,n)){if(n===i||"/"===n||"?"===n||"#"===n||"\\"===n&&h.isSpecial()||t){if(""!==f){var R=C(f,10);if(R>65535)return q;h.port=h.isSpecial()&&R===fe[h.scheme]?null:R,f=""}if(t)return;u=Fe;continue}return q}f+=n;break;case Oe:if(h.scheme="file","/"===n||"\\"===n)u=Ce;else{if(!r||"file"!==r.scheme){u=Pe;continue}switch(n){case i:h.host=r.host,h.path=v(r.path),h.query=r.query;break;case"?":h.host=r.host,h.path=v(r.path),h.query="",u=Ie;break;case"#":h.host=r.host,h.path=v(r.path),h.query=r.query,h.fragment="",u=Ue;break;default:pe(I(v(s,l),""))||(h.host=r.host,h.path=v(r.path),h.shortenPath()),u=Pe;continue}}break;case Ce:if("/"===n||"\\"===n){u=Me;break}r&&"file"===r.scheme&&!pe(I(v(s,l),""))&&(de(r.path[0],!0)?B(h.path,r.path[0]):h.host=r.host),u=Pe;continue;case Me:if(n===i||"/"===n||"\\"===n||"?"===n||"#"===n){if(!t&&de(f))u=Pe;else if(""===f){if(h.host="",t)return;u=Fe}else{if(a=h.parseHost(f))return a;if("localhost"===h.host&&(h.host=""),t)return;f="",u=Fe}continue}f+=n;break;case Fe:if(h.isSpecial()){if(u=Pe,"/"!==n&&"\\"!==n)continue}else if(t||"?"!==n)if(t||"#"!==n){if(n!==i&&(u=Pe,"/"!==n))continue}else h.fragment="",u=Ue;else h.query="",u=Ie;break;case Pe:if(n===i||"/"===n||"\\"===n&&h.isSpecial()||!t&&("?"===n||"#"===n)){if(".."===(c=z(c=f))||"%2e."===c||".%2e"===c||"%2e%2e"===c?(h.shortenPath(),"/"===n||"\\"===n&&h.isSpecial()||B(h.path,"")):me(f)?"/"===n||"\\"===n&&h.isSpecial()||B(h.path,""):("file"===h.scheme&&!h.path.length&&de(f)&&(h.host&&(h.host=""),f=P(f,0)+":"),B(h.path,f)),f="","file"===h.scheme&&(n===i||"?"===n||"#"===n))for(;h.path.length>1&&""===h.path[0];)G(h.path);"?"===n?(h.query="",u=Ie):"#"===n&&(h.fragment="",u=Ue)}else f+=le(n,he);break;case ke:"?"===n?(h.query="",u=Ie):"#"===n?(h.fragment="",u=Ue):n!==i&&(h.path[0]+=le(n,ae));break;case Ie:t||"#"!==n?n!==i&&("'"===n&&h.isSpecial()?h.query+="%27":h.query+="#"===n?"%23":le(n,ae)):(h.fragment="",u=Ue);break;case Ue:n!==i&&(h.fragment+=le(n,ce))}l++}},parseHost:function(e){var t,r,i;if("["===P(e,0)){if("]"!==P(e,e.length-1))return X;if(t=function(e){var t,r,i,s,n,o,a,c=[0,0,0,0,0,0,0,0],h=0,u=null,l=0,f=function(){return P(e,l)};if(":"===f()){if(":"!==P(e,1))return;l+=2,u=++h}for(;f();){if(8===h)return;if(":"!==f()){for(t=r=0;r<4&&k(ee,f());)t=16*t+C(f(),16),l++,r++;if("."===f()){if(0===r)return;if(l-=r,h>6)return;for(i=0;f();){if(s=null,i>0){if(!("."===f()&&i<4))return;l++}if(!k($,f()))return;for(;k($,f());){if(n=C(f(),10),null===s)s=n;else{if(0===s)return;s=10*s+n}if(s>255)return;l++}c[h]=256*c[h]+s,2!=++i&&4!==i||h++}if(4!==i)return;break}if(":"===f()){if(l++,!f())return}else if(f())return;c[h++]=t}else{if(null!==u)return;l++,u=++h}}if(null!==u)for(o=h-u,h=7;0!==h&&o>0;)a=c[h],c[h--]=c[u+o-1],c[u+--o]=a;else if(8!==h)return;return c}(W(e,1,-1)),!t)return X;this.host=t}else if(this.isSpecial()){if(e=g(e),k(te,e))return X;if(t=function(e){var t,r,i,s,n,o,a,c=V(e,".");if(c.length&&""===c[c.length-1]&&c.length--,(t=c.length)>4)return e;for(r=[],i=0;i<t;i++){if(""===(s=c[i]))return e;if(n=10,s.length>1&&"0"===P(s,0)&&(n=k(J,s)?16:8,s=W(s,8===n?1:2)),""===s)o=0;else{if(!k(10===n?Q:8===n?Z:ee,s))return e;o=C(s,n)}B(r,o)}for(i=0;i<t;i++)if(o=r[i],i===t-1){if(o>=F(256,5-t))return null}else if(o>255)return null;for(a=D(r),i=0;i<r.length;i++)a+=r[i]*F(256,3-i);return a}(e),null===t)return X;this.host=t}else{if(k(re,e))return X;for(t="",r=m(e),i=0;i<r.length;i++)t+=le(r[i],ae);this.host=t}},cannotHaveUsernamePasswordPort:function(){return!this.host||this.cannotBeABaseURL||"file"===this.scheme},includesCredentials:function(){return""!==this.username||""!==this.password},isSpecial:function(){return d(fe,this.scheme)},shortenPath:function(){var e=this.path,t=e.length;!t||"file"===this.scheme&&1===t&&de(e[0],!0)||e.length--},serialize:function(){var e=this,t=e.scheme,r=e.username,i=e.password,s=e.host,n=e.port,o=e.path,a=e.query,c=e.fragment,h=t+":";return null!==s?(h+="//",e.includesCredentials()&&(h+=r+(i?":"+i:"")+"@"),h+=oe(s),null!==n&&(h+=":"+n)):"file"===t&&(h+="//"),h+=e.cannotBeABaseURL?o[0]:o.length?"/"+I(o,"/"):"",null!==a&&(h+="?"+a),null!==c&&(h+="#"+c),h},setHref:function(e){var t=this.parse(e);if(t)throw new O(t);this.searchParams.update()},getOrigin:function(){var e=this.scheme,t=this.port;if("blob"===e)try{return new Be(e.path[0]).origin}catch(e){return"null"}return"file"!==e&&this.isSpecial()?e+"://"+oe(this.host)+(null!==t?":"+t:""):"null"},getProtocol:function(){return this.scheme+":"},setProtocol:function(e){this.parse(y(e)+":",ve)},getUsername:function(){return this.username},setUsername:function(e){var t=m(y(e));if(!this.cannotHaveUsernamePasswordPort()){this.username="";for(var r=0;r<t.length;r++)this.username+=le(t[r],ue)}},getPassword:function(){return this.password},setPassword:function(e){var t=m(y(e));if(!this.cannotHaveUsernamePasswordPort()){this.password="";for(var r=0;r<t.length;r++)this.password+=le(t[r],ue)}},getHost:function(){var e=this.host,t=this.port;return null===e?"":null===t?oe(e):oe(e)+":"+t},setHost:function(e){this.cannotBeABaseURL||this.parse(e,Se)},getHostname:function(){var e=this.host;return null===e?"":oe(e)},setHostname:function(e){this.cannotBeABaseURL||this.parse(e,Ae)},getPort:function(){var e=this.port;return null===e?"":y(e)},setPort:function(e){this.cannotHaveUsernamePasswordPort()||(""===(e=y(e))?this.port=null:this.parse(e,Le))},getPathname:function(){var e=this.path;return this.cannotBeABaseURL?e[0]:e.length?"/"+I(e,"/"):""},setPathname:function(e){this.cannotBeABaseURL||(this.path=[],this.parse(e,Fe))},getSearch:function(){var e=this.query;return e?"?"+e:""},setSearch:function(e){""===(e=y(e))?this.query=null:("?"===P(e,0)&&(e=W(e,1)),this.query="",this.parse(e,Ie)),this.searchParams.update()},getSearchParams:function(){return this.searchParams.facade},getHash:function(){var e=this.fragment;return e?"#"+e:""},setHash:function(e){""!==(e=y(e))?("#"===P(e,0)&&(e=W(e,1)),this.fragment="",this.parse(e,Ue)):this.fragment=null},update:function(){this.query=this.searchParams.serialize()||null}};var Be=function(e){var t=f(this,Ne),r=x(arguments.length,1)>1?arguments[1]:void 0,i=E(t,new De(e,!1,r));n||(t.href=i.serialize(),t.origin=i.getOrigin(),t.protocol=i.getProtocol(),t.username=i.getUsername(),t.password=i.getPassword(),t.host=i.getHost(),t.hostname=i.getHostname(),t.port=i.getPort(),t.pathname=i.getPathname(),t.search=i.getSearch(),t.searchParams=i.getSearchParams(),t.hash=i.getHash())},Ne=Be.prototype,Ge=function(e,t){return{get:function(){return T(this)[e]()},set:t&&function(e){return T(this)[t](e)},configurable:!0,enumerable:!0}};if(n&&(l(Ne,"href",Ge("serialize","setHref")),l(Ne,"origin",Ge("getOrigin")),l(Ne,"protocol",Ge("getProtocol","setProtocol")),l(Ne,"username",Ge("getUsername","setUsername")),l(Ne,"password",Ge("getPassword","setPassword")),l(Ne,"host",Ge("getHost","setHost")),l(Ne,"hostname",Ge("getHostname","setHostname")),l(Ne,"port",Ge("getPort","setPort")),l(Ne,"pathname",Ge("getPathname","setPathname")),l(Ne,"search",Ge("getSearch","setSearch")),l(Ne,"searchParams",Ge("getSearchParams")),l(Ne,"hash",Ge("getHash","setHash"))),u(Ne,"toJSON",(function(){return T(this).serialize()}),{enumerable:!0}),u(Ne,"toString",(function(){return T(this).serialize()}),{enumerable:!0}),L){var Ve=L.createObjectURL,We=L.revokeObjectURL;Ve&&u(Be,"createObjectURL",c(Ve,L)),We&&u(Be,"revokeObjectURL",c(We,L))}b(Be,"URL"),s({global:!0,constructor:!0,forced:!o,sham:!n},{URL:Be})},3487:(e,t,r)=>{"use strict";r(6909)},8670:(e,t,r)=>{"use strict";var i=r(1091),s=r(5582),n=r(4787),o=r(160),a=r(4791),c=s("URL");i({target:"URL",stat:!0,forced:!a},{parse:function(e){var t=n(arguments.length,1),r=o(e),i=t<2||void 0===arguments[1]?void 0:o(arguments[1]);try{return new c(r,i)}catch(e){return null}}})},4783:()=>{},2222:(e,t,r)=>{"use strict";var i=r(6823);e.exports=i},4598:(e,t,r)=>{"use strict";var i=r(1042);e.exports=i},8251:(e,t,r)=>{"use strict";var i=r(1926);e.exports=i},4139:(e,t,r)=>{"use strict";var i=r(3842);r(2560),e.exports=i},7045:(e,t,r)=>{"use strict";var i=r(1730);r(2560),e.exports=i},70:(e,t,r)=>{"use strict";var i=r(1661);e.exports=i},9792:(e,t,r)=>{"use strict";var i=r(6908);e.exports=i},9076:(e,t,r)=>{"use strict";r(6299),r(5042),r(7649),r(3604);var i=r(2046);e.exports=i.URLSearchParams},6908:(e,t,r)=>{"use strict";r(9076),r(3487),r(8669),r(8670),r(4783);var i=r(2046);e.exports=i.URL}},t={};function r(i){var s=t[i];if(void 0!==s)return s.exports;var n=t[i]={exports:{}};return e[i].call(n.exports,n,n.exports,r),n.exports}r.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return r.d(t,{a:t}),t},r.d=(e,t)=>{for(var i in t)r.o(t,i)&&!r.o(e,i)&&Object.defineProperty(e,i,{enumerable:!0,get:t[i]})},r.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),r.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{"use strict";const e="MEDIASDK_CACHE_INFO",t=new class{constructor(){this._highFrequencyLogs={},this.fixVersion="",this.cacheLogStack=[],this.isFlushing=!1}setInstance(e,t){this._instance=e,this.fixVersion=t}getMessageFromErrorOrEvent(e,t){let r=e;return t instanceof ErrorEvent?(t.filename&&(r+=" File: ".concat(t.filename)),(t.lineno||t.colno)&&(r+=" Line: ".concat(t.lineno,":").concat(t.colno)),t.message&&(r+=" Message: ".concat(t.message)),t.error&&(r+="\nStack: ".concat(t.error.stack))):t instanceof Error?(t.message&&(r+=" Message: ".concat(t.message)),t.stack&&(r+=" Stack: ".concat(t.stack)),t.name&&(r+=" Name: ".concat(t.name)),t.constraint&&(r+=" Constraint: ".concat(t.constraint))):t instanceof CloseEvent?(t.code&&(r+=" Code: ".concat(t.code)),t.reason&&(r+=" Reason: ".concat(t.reason)),r+=" wasClean: ".concat(t.wasClean)):t instanceof DOMException?(t.message&&(r+=" Message: ".concat(t.message)),t.name&&(r+=" Name: ".concat(t.name))):r+=t?t.toString():"",r}_addCacheLog(e,t){this.cacheLogStack.length<100&&this.cacheLogStack.push({type:e,message:t})}flushCacheLog(){if(this._instance&&this.cacheLogStack.length>0&&!this.isFlushing){this.isFlushing=!0;let t="";this.cacheLogStack.forEach((r=>{let{type:i,message:{message:s="",tags:n=[]}}=r;const o=s?"".concat(n.join("|"),":").concat(s).concat("|----|"):"";switch(i){case"log":this._log(s,[...n,e]);break;case"warn":case"error":case"severityerror":case"directReport":t+=o}})),t&&this._directReport(t,[e]),this.cacheLogStack=[],this.isFlushing=!1}}log(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];this._instance?(this.flushCacheLog(),this._log(e,t)):this._addCacheLog("log",{message:e,tags:t})}warn(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];e=this.getMessageFromErrorOrEvent(e,t),this._instance?(this.flushCacheLog(),this._warn(e,r)):this._addCacheLog("warn",{message:e,tags:r})}error(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];var i;e=this.getMessageFromErrorOrEvent(e,t),this._highFrequencyLogs[e]?this._highFrequencyLogs[e]+=1:this._highFrequencyLogs[e]=1,!((i=this._highFrequencyLogs[e])&i-1)&&(this._instance?(this.flushCacheLog(),this._error(e,r)):this._addCacheLog("error",{message:e,tags:r}))}severityerror(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];this._instance?(this.flushCacheLog(),this._severityerror(JSON.stringify(e),t)):this._addCacheLog("severityerror",{message:JSON.stringify(e),tags:t})}directReport(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:["MEDIASDK_INFO"];var r;this._instance?(this.flushCacheLog(),null===(r=this._directReport)||void 0===r||r.call(this,e,t)):this._addCacheLog("directReport",{message:e,tags:t})}_log(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];this._instance&&this._instance.log(e,t)}_warn(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];this._instance&&this._instance.warn(e,t)}_error(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];this._instance&&this._instance.error(e,[this.fixVersion,...t])}_severityerror(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];this._instance&&this._instance.error(e,t)}_directReport(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];var r,i;this._instance&&(null===(i=(r=this._instance).directReport)||void 0===i||i.call(r,{msg:e},t))}clearHighFrequencyLogs(){this._highFrequencyLogs={}}};var i=r(7201),s=r.n(i);new Error;const n=new Map;function o(e){var t;let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"|";return e?s()(t=e.toString()).call(t,/[,，]/g,r):""}const a="function"!=typeof importScripts;function c(e){let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;a?t.error(e,r):h(e,r)}function h(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;var r,i;if(t instanceof Error||t instanceof ErrorEvent){const s=t;e+=" Code: "+(null==s?void 0:s.code)+" Message: "+(null==t?void 0:t.message)+" Stack: "+(null!==(i=null===(r=null==s?void 0:s.error)||void 0===r?void 0:r.stack)&&void 0!==i?i:null==s?void 0:s.stack),t=null}postMessage({status:61,errorMessage:e,errorEvent:t})}function u(e){postMessage({status:61,errorMessage:e,level:"low"})}function l(e){a?function(e,r){if(!function(e){const t=performance.now();return(!n.has(e)||t-n.get(e)>5e3)&&(n.set(e,t),!0)}(e))return;let i;try{i=o("object"==typeof r?JSON.stringify(r):r)}catch(e){i=o(r)}t.error("NotifyUIError,event=".concat(e,",data=").concat(i))}(-51,e):postMessage({status:-27,where:e})}let f;const d=()=>f,p=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";if(e)return;const r=new Error(t);d().tracing.Log_Error("Assert: ".concat(t),r)},m=.005;function v(e,t){const r=Math.pow(10,t);return Math.floor(e*r)/r}function _(e,t){const r=Math.pow(10,t);return Math.ceil(e*r)/r}var g=r(4997),y=r(2321),b=r(2231);function x(e){return x="function"==typeof y&&"symbol"==typeof b?function(e){return typeof e}:function(e){return e&&"function"==typeof y&&e.constructor===y&&e!==y.prototype?"symbol":typeof e},x(e)}var w=r(9280);function R(e,t,r){return(t=function(e){var t=function(e){if("object"!=x(e)||!e)return e;var t=e[w];if(void 0!==t){var r=t.call(e,"string");if("object"!=x(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==x(t)?t:t+""}(t))in e?g(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}const E={NO_CONFIG:0,FALLBACK_TO_TAG_RENDERER_ON_CHROME:1,FALLBACK_TO_TAG_RENDERER_ON_SAFARI:2,FALLBACK_TO_TAG_RENDERER_ON_FIREFOX:4,LOWER_PERFORMANCE_DEVICE:8},T={NO_CONFIG:0,TAG_RENDERER_ON_CHROME:1,TAG_RENDERER_ON_SAFARI:2,TAG_RENDERER_ON_FIREFOX:4},S=new class{constructor(){R(this,"_platformDesc",{supportGraphicsAcceleration:!1,supportVideoFrame:!1,supportMediaStreamTrackGenerator:!1,supportTransferableStream:!1,supportDrawWatermark:!1,supportVideoFrameInWorker:!1,supportVideoTrackGeneratorInWorker:!1,supportOffscreenCanvasInWorker:!1,supportImageBitmapRenderingInWorker:!1,supportTransferableTrackAcrossWork:!1,supportsRequestAnimationFrameInWork:!1}),R(this,"_inferedDesc",{supportVideoTagRenderer:!1}),R(this,"_analyzing_promise",null),R(this,"_main_analyzed",!1),R(this,"_remote_analyzed",!1),R(this,"_analyzedPromise",void 0),R(this,"_resolveAnalyzedPromise",void 0),this._analyzedPromise=new Promise(((e,t)=>{this._resolveAnalyzedPromise=e}))}init(e){this._platformDesc=e.platform,this._inferedDesc=e.infered,this._main_analyzed=!0,this._remote_analyzed=!0,this._resolveAnalyzedPromise(this._remote_analyzed)}desc(){return{platform:this._platformDesc,infered:this._inferedDesc}}analyzed(){return this._remote_analyzed}analyzedPromise(){return this._analyzedPromise}_analyzeInferredCapabilites(){this._inferedDesc.supportVideoTagRenderer=this._platformDesc.supportVideoFrame&&this._platformDesc.supportVideoFrameInWorker&&(!0===this._platformDesc.supportMediaStreamTrackGenerator&&!0===this._platformDesc.supportTransferableStream||!0===this._platformDesc.supportVideoTrackGeneratorInWorker)}analyze(e){if(this._analyzing_promise)return this._analyzing_promise;const t=e.analyzeMainCapabilites();return Object.assign(this._platformDesc,t),this._main_analyzed=!0,this._analyzing_promise=new Promise(((t,r)=>{e.analyzeRemoteCapabilities().then((e=>{Object.assign(this._platformDesc,e),this._analyzeInferredCapabilites(),this._remote_analyzed=!0,this._resolveAnalyzedPromise(this._remote_analyzed),t(!0)})).catch((e=>{this._resolveAnalyzedPromise(this._remote_analyzed),t(!1)}))})),this._analyzing_promise}supportGraphicsAcceleration(){return p(this._main_analyzed),this._platformDesc.supportGraphicsAcceleration}supportTransferableStream(){return p(this._main_analyzed),this._platformDesc.supportTransferableStream}supportDrawWatermark(){return p(this._main_analyzed),this._platformDesc.supportDrawWatermark}supportVideoTagRenderer(){return!!this._remote_analyzed&&this._inferedDesc.supportVideoTagRenderer}supportMediaStreamTrackGenerator(){return p(this._main_analyzed),this._platformDesc.supportMediaStreamTrackGenerator}supportVideoTrackGeneratorInWorker(){return!!this._remote_analyzed&&this._platformDesc.supportVideoTrackGeneratorInWorker}supportTransferableTrackAcrossWork(){return!!this._remote_analyzed&&this._platformDesc.supportTransferableTrackAcrossWork}supportsRequestAnimationFrameInWork(){return!!this._remote_analyzed&&this._platformDesc.supportsRequestAnimationFrameInWork}supportMediaStreamTrackProcessor(){return!!this._remote_analyzed&&this._platformDesc.supportMediaStreamTrackProcessor}};var A=r(1265),L=r.n(A);const O=new class{constructor(){R(this,"_info",void 0),this._info={browser:{brand:"",version:"",isBlink:!1,isWebkit:!1},sysinfo:{osType:"",os:"",osVersion:""},gpuinfo:{vendor:"",renderInfo:"",isAstcSupported:!1,isWebGLContextInvalid:!1},browserVersionInfo:{ie:"",edge:"",firefox:"",opera:"",chrome:"",safari:""},isLowerPerformanceDevice:!1,isSwiftShader:!1,isMacIntelSafari:!1},this._derived={gpuArchitecture:"unknown",normalizedOS:"",normalizedBrowser:""},this._updateDerivedInfo()}init(e){this._info=e,this._updateDerivedInfo()}info(){return this._info}browserInfo(){return this._info.browser}browserVersionInfo(){return this._info.browserVersionInfo}browserName(){var e;return null===(e=this._info.browser.brand)||void 0===e?void 0:e.toLocaleLowerCase()}isChrome(){var e;return"chrome"===(null===(e=this._info.browser.brand)||void 0===e?void 0:e.toLocaleLowerCase())}isSafari(){var e;return"safari"===(null===(e=this._info.browser.brand)||void 0===e?void 0:e.toLocaleLowerCase())}isFirefox(){var e;return"firefox"===(null===(e=this._info.browser.brand)||void 0===e?void 0:e.toLocaleLowerCase())}isEdge(){var e;return"edge"===(null===(e=this._info.browser.brand)||void 0===e?void 0:e.toLocaleLowerCase())}isBlink(){return this._info.browser.isBlink}isWebkit(){return this._info.browser.isWebkit}isLowerPerformanceDevice(){return!!this._info.isLowerPerformanceDevice}_updateDerivedInfo(){this._derived.normalizedOS=this._computeNormalizedOS(),this._derived.normalizedBrowser=this._computeNormalizedBrowser(),this._derived.gpuArchitecture=this._computeGPUArchitecture()}_computeGPUArchitecture(){var e,t;const r=(null===(e=this._info.gpuinfo)||void 0===e?void 0:e.vendor)||"",i=(null===(t=this._info.gpuinfo)||void 0===t?void 0:t.renderInfo)||"",s=r.toLowerCase(),n=i.toLowerCase(),o=e=>s.includes(e)||n.includes(e);if(this.isSafari())return this._info.isMacIntelSafari?"intel":"apple";if(o("intel"))return"intel";if(o("nvidia")||o("geforce"))return"nvidia";if(o("amd")||o("radeon")||o("ati"))return"amd";if(o("apple")||o("m1")||o("m2")||o("m3"))return"apple";if(o("qualcomm")||o("adreno"))return"qualcomm";if(o("mediatek")||o("mtk"))return"mediatek";if(o("mali"))return"mali";if(o("arm"))return"arm";if(s){var a;const e=L()(a=s.replace(/[^a-z0-9]+/g," ")).call(a).split(" ")[0];if(e)return e.toLowerCase()}return"unknown"}_computeNormalizedOS(){var e;const t=(null===(e=this._info.sysinfo)||void 0===e||null===(e=e.os)||void 0===e?void 0:e.toLowerCase())||"";return"ios"===t?"ios":t.includes("android")?"android":t.includes("chrome os")||t.includes("chromium os")?"chromeos":t.includes("mac")?"mac":t.includes("win")?"win":t.includes("linux")?"linux":t}_computeNormalizedBrowser(){var e,t;return(null===(e=this._info.browser)||void 0===e||null===(e=e.brand)||void 0===e||null===(t=e.toLocaleLowerCase)||void 0===t?void 0:t.call(e))||""}isOnWhitelist(e){if(!Array.isArray(e)||0===e.length)return!1;const t=this._derived.gpuArchitecture,r=this._derived.normalizedOS,i=this._derived.normalizedBrowser,s=!!this._info.isLowerPerformanceDevice,n=!!this._info.isSwiftShader;return e.some((e=>{var o;if("string"!=typeof e)return!1;const a=L()(e).call(e).toLowerCase();if("low-device"===a)return s;if("swift-shader"===a)return n;const[c,h,u]=a.split("/");if(!c||!h)return!1;const l=L()(c).call(c),f=L()(h).call(h),d=L()(o=u||"").call(o);return!(l&&l!==t||f&&!r.includes(f)&&!f.includes(r)||d&&d!==i)}))}},C=new class{constructor(){R(this,"_desc",{blockConfig:void 0,defaultRendererType:1,isEnableCanvasCtxOptionsOpt:!1,isEnableFallbackToTagRender:!1,isEnableWasmTagRenderer:!1,safariYuvPaddingFixVer:void 0,chromeYuvLeftTopPaddingFixVer:void 0,disableVideoTagOnEdge:void 0,preferredUseSsrcStream:void 0,canUseSsrcStream:void 0,isUseSsrcStream:!1,shouldCropWasmFrameOnPosMismatch:void 0,shouldCropWasmFrameOnSizeMismatchOnly:void 0,avStreamMode:void 0,baseScriptUrl:"",cssPixelScale:1,isVideoHasWaterMark:!1,isSharingHasWaterMark:!1,videoWatermarkInfo:void 0,sharingWatermarkInfo:void 0}),R(this,"_configDone",!1),R(this,"_configDonePromise",void 0),R(this,"_resolveConfigDonePromise",void 0),this._configDonePromise=new Promise(((e,t)=>{this._resolveConfigDonePromise=e}))}_tryResetDerivedConfigIfNeeded(){this._configDone&&(this._desc.canUseSsrcStream=void 0,this._desc.shouldCropWasmFrameOnPosMismatch=void 0,this._desc.shouldCropWasmFrameOnSizeMismatchOnly=void 0)}init(e){this._desc=e,this._configDone=!0}setBlockConfig(e){if(!e)return;this._desc.blockConfig=e;const t=e.safariYuvPaddingFixVer;t&&this.setSafariYuvPaddingFixVer(t);const r=e.chromeYuvLeftTopPaddingFixVer;r&&this.setChromeYuvLeftTopPaddingFixVer(r);const i=e.disableVideoTagOnEdge;"true"===i&&this.setDisableVideoTagOnEdge(i)}configDone(){return this._configDone}configDonePromise(){return this._configDonePromise}markConfigDone(){this._configDone=!0,this._resolveConfigDonePromise(!0)}desc(){return this._desc}preferredUseSsrcStream(){var e;return void 0!==this._desc.preferredUseSsrcStream?!!this._desc.preferredUseSsrcStream:this.canUseSsrcStream()?(this._desc.preferredUseSsrcStream=O.isOnWhitelist((null===(e=this._desc.blockConfig)||void 0===e?void 0:e.SsrcStreamPreferredWhitelist)||[]),this._desc.preferredUseSsrcStream):(this._desc.preferredUseSsrcStream=!1,!1)}defaultRendererType(){return this._desc.defaultRendererType}setDefaultRendererType(e){this._desc.defaultRendererType=e,this._tryResetDerivedConfigIfNeeded()}isEnableCanvasCtxOptionsOpt(){return this._desc.isEnableCanvasCtxOptionsOpt}setIsEnableCanvasCtxOptionsOpt(e){this._desc.isEnableCanvasCtxOptionsOpt=e,this._tryResetDerivedConfigIfNeeded()}isEnableWasmTagRenderer(){return this._desc.isEnableWasmTagRenderer}setWasmTagRendererFlags(e){let t=!1;O.isBlink()?(t=!!(e&T.TAG_RENDERER_ON_CHROME),O.isEdge()&&this._desc.disableVideoTagOnEdge&&(t=!1)):O.isWebkit()?t=!!(e&T.TAG_RENDERER_ON_SAFARI):O.isFirefox()&&(t=!!(e&T.TAG_RENDERER_ON_FIREFOX)),this._desc.isEnableWasmTagRenderer=t,this._tryResetDerivedConfigIfNeeded()}isEnableFallbackToTagRender(){return this._desc.isEnableFallbackToTagRender}setFallbackToTagRenderFlags(e){let t=!1;O.isBlink()?t=!!(e&E.FALLBACK_TO_TAG_RENDERER_ON_CHROME):O.isWebkit()?t=!!(e&E.FALLBACK_TO_TAG_RENDERER_ON_SAFARI):O.isFirefox()&&(t=!!(e&E.FALLBACK_TO_TAG_RENDERER_ON_FIREFOX)),t||O.isLowerPerformanceDevice()&&(t=!!(e&E.LOWER_PERFORMANCE_DEVICE)),this._desc.isEnableFallbackToTagRender=t,this._tryResetDerivedConfigIfNeeded()}canUseSsrcStream(){return!!this._configDone&&(void 0!==this._desc.canUseSsrcStream?this._desc.canUseSsrcStream:S.supportVideoTagRenderer()?S.supportGraphicsAcceleration()&&!O.isLowerPerformanceDevice()||!this.isEnableFallbackToTagRender()?this.isEnableWasmTagRenderer()?(this._desc.canUseSsrcStream=!0,this._desc.canUseSsrcStream):(this._desc.canUseSsrcStream=!1,!1):(this._desc.canUseSsrcStream=!0,this._desc.canUseSsrcStream):(this._desc.canUseSsrcStream=!1,!1))}isUseSsrcStream(){return this._desc.isUseSsrcStream}setIsUseSsrcStream(e){this._desc.isUseSsrcStream=e}setSafariYuvPaddingFixVer(e){"[object String]"===Object.prototype.toString.call(e)&&(this._desc.safariYuvPaddingFixVer=e)}setChromeYuvLeftTopPaddingFixVer(e){"[object String]"===Object.prototype.toString.call(e)&&(this._desc.chromeYuvLeftTopPaddingFixVer=e)}setDisableVideoTagOnEdge(e){this._desc.disableVideoTagOnEdge=e}_versionGreaterThan(e,t){const r=t.toString().split("."),i=e.toString().split("."),s=r.length,n=i.length,o=Math.min(s,n);for(let e=0;e<o;e++){const t=parseInt(r[e],10),s=parseInt(i[e],10);if(t!==s)return s>t}return n>=s}_logWasmFrameOnPosMismatch(e){d().tracing.Log_DT("[vtagq] WasmFrameOnPosMismatch: ".concat(e?"Crop":"No Crop"))}shouldCropWasmFrameOnPosMismatch(){return!!this._configDone&&(void 0!==this._desc.shouldCropWasmFrameOnPosMismatch?this._desc.shouldCropWasmFrameOnPosMismatch:this.isUseSsrcStream()?(this._desc.shouldCropWasmFrameOnPosMismatch=!0,O.isChrome()?this._desc.chromeYuvLeftTopPaddingFixVer&&this._versionGreaterThan(O.browserVersionInfo().chrome,this._desc.chromeYuvLeftTopPaddingFixVer)&&(this._desc.shouldCropWasmFrameOnPosMismatch=!1):O.isSafari()&&this._desc.safariYuvPaddingFixVer&&this._versionGreaterThan(O.browserVersionInfo().safari,this._desc.safariYuvPaddingFixVer)&&(this._desc.shouldCropWasmFrameOnPosMismatch=!1),this._logWasmFrameOnPosMismatch(this._desc.shouldCropWasmFrameOnPosMismatch),this._desc.shouldCropWasmFrameOnPosMismatch):(this._desc.shouldCropWasmFrameOnPosMismatch=!1,this._logWasmFrameOnPosMismatch(!1),!1))}_logWasmFrameOnSizeMismatch(e){d().tracing.Log_DT("[vtagq] WasmFrameOnSizeMismatch: ".concat(e?"Crop":"No Crop"))}shouldCropWasmFrameOnSizeMismatchOnly(){return!!this._configDone&&(void 0!==this._desc.shouldCropWasmFrameOnSizeMismatchOnly?this._desc.shouldCropWasmFrameOnSizeMismatchOnly:this.isUseSsrcStream()&&O.isWebkit()?(O.isSafari()&&this._desc.safariYuvPaddingFixVer&&this._versionGreaterThan(O.browserVersionInfo().safari,this._desc.safariYuvPaddingFixVer)?this._desc.shouldCropWasmFrameOnSizeMismatchOnly=!1:this._desc.shouldCropWasmFrameOnSizeMismatchOnly=!0,this._logWasmFrameOnSizeMismatch(this._desc.shouldCropWasmFrameOnSizeMismatchOnly),this._desc.shouldCropWasmFrameOnSizeMismatchOnly):(this._desc.shouldCropWasmFrameOnSizeMismatchOnly=!1,this._logWasmFrameOnSizeMismatch(!1),!1))}shouldCropWasmFrame(e,t,r){return!!this._configDone&&(e!=r.width||t!=r.height)&&(C.shouldCropWasmFrameOnSizeMismatchOnly()||C.shouldCropWasmFrameOnPosMismatch()&&(0!=r.x||0!=r.y))}getAVStreamMode(){return this._configDone?(void 0!==this._desc.avStreamMode||(S.supportTransferableStream()?this._desc.avStreamMode="writable-stream":S.supportTransferableTrackAcrossWork()?this._desc.avStreamMode="track":this._desc.avStreamMode="none"),this._desc.avStreamMode):"none"}getBaseScriptUrl(){return this._desc.baseScriptUrl}setBaseScriptUrl(e){this._desc.baseScriptUrl=e}getCssPixelScale(){return this._desc.cssPixelScale}setCssPixelScale(e){this._desc.cssPixelScale=e}isVideoHasWaterMark(){return this._desc.isVideoHasWaterMark}setIsVideoHasWaterMark(e){this._desc.isVideoHasWaterMark=e,this._tryResetDerivedConfigIfNeeded()}isSharingHasWaterMark(){return this._desc.isSharingHasWaterMark}setIsSharingHasWaterMark(e){this._desc.isSharingHasWaterMark=e,this._tryResetDerivedConfigIfNeeded()}getVideoWatermarkInfo(){return this._desc.videoWatermarkInfo}setVideoWatermarkInfo(e){this._desc.videoWatermarkInfo=e}getSharingWatermarkInfo(){return this._desc.sharingWatermarkInfo}setSharingWatermarkInfo(e){this._desc.sharingWatermarkInfo=e}},M={mgr:null,config:C,capabilities:S,userAgent:O,tracing:{add_monitor(e){!function(e){postMessage({status:35,data:e})}(e)},globaltracing_error(e){h(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:null)},Log_Error(e){c(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:null)},Log_DT(e){var r;r=e,a?t.directReport(r):u(r)}},graphics:{create_webgl_context_failed_monitor(e){l(e)},calculateUVCoord:(e,t,r,i)=>function(e,t,r,i){if(!e||!t||!r)return null;const s=t.width/t.height;let n=t.width,o=t.height;if(t.width>e.width||t.height>e.height){const r=e.width/t.width,i=e.height/t.height,s=Math.min(r,i);n*=s,o*=s}let a=0,c=0;e.width/e.height>s?(c=Math.floor(e.height/o)*o,a=Math.floor(c*s/n)*n,a>e.width&&(a=Math.floor(e.width/n)*n,c=Math.floor(a/s/o)*o)):(a=Math.floor(e.width/n)*n,c=Math.floor(a/s/o)*o,c>e.height&&(c=Math.floor(e.height/o)*o,a=Math.floor(c*s/n)*n));let h=0,u=0,l=0,f=0,d={x:u,y:h,w:l,h:f};0==i?(h=1-(h+(o-1)/e.height),u=t.left/e.width,f=1-t.top/e.height,l=u+n/e.width,d.x=u,d.y=1-f,d.w=l,d.h=1-h):1==i?(u=1-(h+(o-1)/e.height),l=1-t.top/e.height,h=t.left/e.width,f=u+n/e.width):2==i?(h=t.top/e.height,u=t.left/e.width,f=h+(o-1)/e.height,l=u+n/e.width):3==i&&(u=t.top/e.height,l=h+(o-1)/e.height,h=t.left/e.width,f=u+n/e.width);let p=[],m=[{x:l,y:f},{x:l,y:h},{x:u,y:h},{x:l,y:f},{x:u,y:f},{x:u,y:h}];for(let e=0;e<m.length;++e){let t={u:m[e].x,v:m[e].y};p.push(t)}let v=[];for(let e=0;e<p.length;++e){let t=p[e];v.push(t.u),v.push(t.v)}return{uvCoords:v,uvRect:d}}(e,t,r,i),calculateUVCoordsForMultiView:(e,t,r,i,s,n)=>function(e,t,r,i,s,n){let o=0,a=0,c=0,h=0,u={x:a,y:o,w:c,h};if(e){const e=1==s||3==s?t.height/t.width:t.width/t.height,n=i.left||0,u=i.top||0;if(i.width/i.height>e){const t=i.height*e;o=u/r.height,a=(Math.round((i.width-t)/2)+n)/r.width,h=o+(i.height-1)/r.height,c=a+t/r.width}else{const t=i.width/e;o=(Math.round((i.height-t)/2)+u)/r.height,a=n/r.width,h=o+(t-1)/r.height,c=a+i.width/r.width}0==s?(o=1-(o+(i.height-1)/r.height),a=i.left/r.width,h=1-i.top/r.height,c=a+i.width/r.width):1==s?(a=1-(o+(i.height-1)/r.height),c=1-i.top/r.height,o=i.left/r.width,h=a+i.width/r.width):2==s?(o=i.top/r.height,a=i.left/r.width,h=o+(i.height-1)/r.height,c=a+i.width/r.width):3==s&&(a=i.top/r.height,c=o+(i.height-1)/r.height,o=i.left/r.width,h=a+i.width/r.width)}else{const e=i.width/i.height;let t=i.width,n=i.height;if(i.width>r.width||i.height>r.height){const e=r.width/i.width,s=r.height/i.height,o=Math.min(e,s);t*=o,n*=o}let l=0,f=0;r.width/r.height>e?(f=Math.floor(r.height/n)*n,l=Math.floor(f*e/t)*t,l>r.width&&(l=Math.floor(r.width/t)*t,f=Math.floor(l/e/n)*n)):(l=Math.floor(r.width/t)*t,f=Math.floor(l/e/n)*n,f>r.height&&(f=Math.floor(r.height/n)*n,l=Math.floor(f*e/t)*t)),0==s?(o=1-(o+(n-1)/r.height),a=i.left/r.width,h=1-i.top/r.height,c=a+t/r.width,u.x=a,u.y=1-h,u.w=c,u.h=1-o,i.height>i.width&&(a=_(a,2),c=v(c,2))):1==s?(a=1-(o+(n-1)/r.height),c=1-i.top/r.height,o=i.left/r.width,h=a+t/r.width):2==s?(o=i.top/r.height,a=i.left/r.width,h=o+(n-1)/r.height,c=a+t/r.width):3==s&&(a=i.top/r.height,c=o+(n-1)/r.height,o=i.left/r.width,h=a+t/r.width)}let l=[],f=[{x:c,y:h},{x:c,y:o},{x:a,y:o},{x:c,y:h},{x:a,y:h},{x:a,y:o}];for(let e=0;e<f.length;++e){let t=null;if(n){let r=-1*Math.abs(f[e].x);f[e].x=r,t={u:f[e].x+1,v:f[e].y}}else t={u:f[e].x,v:f[e].y};l.push(t)}let d=[];for(let e=0;e<l.length;++e){let t=l[e];d.push(t.u),d.push(t.v)}return{uvCoords:d,uvRect:u}}(e,t,r,i,s,n),calculateRenderRect:(e,t)=>function(e,t){let r=0,i=0,s=0,n=0;const o=t.width/t.height;return e.width/e.height>o?(i=e.height,r=i*o,s=(e.width-r)/2,n=0):(r=e.width,i=r/o,s=0,n=(e.height-i)/2),r<=e.canvas.width&&(s=(e.canvas.width-r)/2),i<=e.canvas.height&&(n=(e.canvas.height-i)/2),{x:s,y:n,width:r,height:i}}(e,t),evalCroppingRect:(e,t)=>function(e,t){if(!e||null==t)throw new Error("evalCroppingRect() invalid parameters!");return 1===t||3===t?{top:e.top,left:e.left,width:e.height,height:e.width}:e}(e,t)},assertion:{assert(e){p(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:"")},assertWithFailed(e){!function(e){const t=new Error(e);d().tracing.Log_Error("AssertWithFailed: ".concat(e),t)}(e)},abstractMethod(){!function(){const e=new Error("call abstract method!");d().tracing.Log_Error("AbstractMethod!",e)}()},unreachable(){!function(){const e=new Error("Unreachable code reached!");d().tracing.Log_Error("Unreachable!",e)}()}}};var F=Object.defineProperty,P=(e,t,r)=>((e,t,r)=>t in e?F(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r)(e,"symbol"!=typeof t?t+"":t,r);const k=new class{constructor(){P(this,"_enabled",!1),P(this,"_reportLog",(()=>{})),P(this,"_cacheName",""),P(this,"_enableLocalDebugLog",!1),P(this,"_resourcePath","")}get enabled(){return this._enabled}set enabled(e){this._enabled=e}get reportLog(){return this._reportLog}set reportLog(e){this._reportLog=e}get cacheName(){return this._cacheName}set cacheName(e){this._cacheName=e}get enableLocalDebugLog(){return this._enableLocalDebugLog}set enableLocalDebugLog(e){this._enableLocalDebugLog=e}get resourcePath(){return this._resourcePath}set resourcePath(e){this._resourcePath=e}},I=(...e)=>{if(!k.enableLocalDebugLog)return;const t=e[0];console.log(`FWB | ${t} -`,...e.slice(1))},U=e=>{let t=`/${e.fileName}`;e.hash&&(t=`/${e.fileName}/${e.hash}`);const r=[];return e.cdnPath&&r.push(`v=${e.cdnPath}`),e.timestamp&&r.push(`t=${e.timestamp}`),r.length>0?`${t}?${r.join("&")}`:t},D=()=>k.cacheName,B=e=>"function"==typeof e,N=void 0!==self.caches&&void 0!==self.Cache&&!!(B(self.caches.open)&&B(self.caches.delete)&&B(self.Cache.prototype.match)&&B(self.Cache.prototype.put)&&B(self.Cache.prototype.delete)&&B(self.Cache.prototype.keys)),G=e=>new Promise((t=>setTimeout(t,e))),V=(e,t,r)=>Number.isInteger(null==r?void 0:r.maxRetries)&&(null==r?void 0:r.maxRetries)>1?(async(e,t,r)=>{let i;const s=null==r?void 0:r.maxRetries,n=(null==r?void 0:r.delayMs)??-1;for(let r=0;r<s;r++)try{const r=await self.fetch(e,t);if(!r.ok)throw new Error(`Fetch resource error: ${r.status}`);return r}catch(e){if(i=e,"AbortError"===(null==e?void 0:e.name))break;r<s-1&&n>=0&&await G(n)}throw i})(e,t,r):self.fetch(e,t),W=async({cdnPath:e,fileName:t,hash:r,size:i,fetchOptions:s,fetchCustomOptions:n})=>{try{const s=await(async(e,t)=>(async e=>{const t=await caches.open(D()),r=new URL(e,self.location.origin),i=await t.match(r,{ignoreSearch:!0});if(!i)throw new Error("Not Found");return i})(U({fileName:e,hash:t})))(t,r),n=s.url||"",o=n.slice(0,n.length-t.length-1);return I(`/${e}/${t}`,"get file from cache"),k.reportLog({isHitCache:!0,isCrossRelease:o!==e,fileName:t,hash:r,size:i}),s}catch{try{const o=await(async({cdnPath:e,fileName:t,hash:r,fetchOptions:i,fetchCustomOptions:s})=>{const n=`${e}/${t}`,o=await V(n,i,s),a=U({cdnPath:e,fileName:t,hash:r,timestamp:Date.now()});try{await(async(e,t)=>{try{const r=await caches.open(D()),i=new URL(e,self.location.origin);await r.put(i,t.clone())}catch(e){console.error("Failed to save to cache",e)}})(a,o)}catch(r){I(`/${e}/${t}`,"save to cache failed",r)}return o})({cdnPath:e,fileName:t,hash:r,fetchOptions:s,fetchCustomOptions:n});return I(`/${e}/${t}`,"get file from network"),k.reportLog({isHitCache:!1,isCrossRelease:!1,fileName:t,hash:r,size:i,cachedVersion:""}),o}catch(r){throw I(`/${e}/${t}`,"get file from network - Failed"),r}}},z={},j=async(e,t)=>{z[e]||(z[e]={}),I(`/${e}/${t}`,"start to get manifest");let r=z[e].manifest;return r?(I(`/${e}/${t}`,"get manifest from memory"),{manifest:r}):(r=await(async(e,t)=>{const r=z[e];if(null==r?void 0:r.manifest)return r.manifest;const i=await(async(e,t)=>{const r=`${e}/manifest.json`,i=z[e];let s=null==i?void 0:i.ongoingPromise;return s?(I(`/${e}/${t}`,"fetchManifest","existing fetch pending"),s):(s=fetch(r,{headers:{Accept:"application/json"}}).then((async r=>{if(I(`/${e}/${t}`,"fetchManifest","get response",r.status),z[e].lastResponseStatus=r.status,!r.ok)throw r;const i=await r.json();return z[e].manifest=i,I(`/${e}/${t}`,"fetchManifest","success"),i})).finally((()=>{z[e].ongoingPromise=void 0})),z[e].ongoingPromise=s,I(`/${e}/${t}`,"fetchManifest","send request"),s)})(e,t);return i})(e,t),I(`/${e}/${t}`,"get manifest from network"),{manifest:r})},H=async(e,t,r)=>{const i=((e,t)=>{if(!e.startsWith(t))return null;t.endsWith("/")&&(t=t.slice(0,-1));const r=e.slice(t.length+1);return r?{cdnPath:t,fileName:r}:null})(new URL(e.toString()).href,k.resourcePath);if(!i)return V(e,t,r);const{cdnPath:s,fileName:n}=i;I(`/${s}/${n}`,"get file request");let o=null;try{const{manifest:e}=await j(s,n);o=e,I(`/${s}/${n}`,"get manifest success")}catch{return I(`/${s}/${n}`,"get manifest failed => fallback to browser"),V(e,t,r)}const a=null==o?void 0:o[n];return(null==a?void 0:a.hash)?W({cdnPath:s,fileName:n,hash:a.hash,size:a.size,fetchOptions:t,fetchCustomOptions:r}):V(e,t,r)};let X;self.setTimeout((async()=>{const e=D(),t=await caches.open(e);let r=[];try{r=await t.keys()}catch{return}const i=new Map;for(const e of r){const t=new URL(e.url),r=t.searchParams.get("t");if(!r)continue;const s=parseInt(r,10);if(isNaN(s))continue;const n=t.pathname.split("/").slice(0,-1).join("/");n&&(i.has(n)||i.set(n,[]),i.get(n).push({request:e,timestamp:s}))}for(const[e,r]of i){if(r.sort(((e,t)=>t.timestamp-e.timestamp)),r.length<=1)continue;let e=r.slice(2);r[0].timestamp-r[1].timestamp>5184e6&&(e=r.slice(1));for(const r of e){try{await t.delete(r.request)}catch{continue}I(`delete from cache: ${r.request.url}`)}}}),6e4);const q=(e,t)=>X&&"function"==typeof X?X(e,t):(console.log("initializeFetchWithCache not initialized: ",e),fetch(e,t));var Y;!function(e){e.VB_INIT_SUCCESS="VB_INIT_SUCCESS",e.VB_INIT_FAILED="VB_INIT_FAILED",e.VB_GENERATED_FRAME="VB_GENERATED_FRAME",e.VB_SEND_FRAME="VB_SEND_FRAME",e.VB_UPDATE_BG="VB_UPDATE_BG",e.VB_PREDICT_DONE="VB_PREDICT_DONE",e.VB_MODEL_READY="VB_MODEL_READY",e.VB_FREE_MEMORY="VB_FREE_MEMORY",e.VB_VIDEO_FORMAT_UNSUPPORTED="VB_VIDEO_FORMAT_UNSUPPORTED",e.VB_WORKER_INIT="VB_WORKER_INIT",e.VB_WORKER_ERROR="VB_WORKER_ERROR",e.VB_RENDER_CANVAS="VB_RENDER_CANVAS",e.VB_RENDER_FRAME="VB_RENDER_FRAME",e.VB_START="VB_START",e.VB_REQUEST_FRAME="VB_REQUEST_FRAME",e.VB_TOGGLE_VB="VB_TOGGLE_VB",e.VB_STOP="VB_STOP",e.VB_MIRROR="VB_MIRROR",e.VB_GENERATE_STREAM="VB_GENERATE_STREAM",e.VB_STOP_STREAM="VB_STOP_STREAM",e.VB_CHANGE_STREAM_CANVAS_SIZE="VB_CHANGE_STREAM_CANVAS_SIZE",e.VB_GENERATE_FIRST_FRAME="VB_GENERATE_FIRST_FRAME",e.VB_UPDATE_STATS="VB_UPDATE_STATS",e.VB_UPDATE_NEED_FRAME="VB_UPDATE_NEED_FRAME",e.VB_UPDATE_FRAME_RATE="VB_UPDATE_FRAME_RATE",e.VB_RESOLUTION_CHANGE="VB_RESOLUTION_CHANGE",e.VB_GLOBAL_TRACING_LOG="VB_GLOBAL_TRACING_LOG"}(Y||(Y={}));const K={VIDEO_ENCODE:"0",VIDEO_DECODE:"1",AUDIO_ENCODE:"2",AUDIO_DECODE:"3",SHARING_ENCODE:"4",SHARING_DECODE:"5",WORKER_SERVICE:"6",COMMON:"7",NET:"net",MESH:"mesh"};(()=>{const e={};for(const t in K)e[K[t]]="WCL_"+t})();const $=["","MOZ_","OP_","WEBKIT_"];function J(e,t){for(var r=0;r<$.length;++r){var i=$[r]+t,s=e.getExtension(i);if(s)return s}}new Map,new class{constructor(){this.ssrcInfoMap=new Map,this.timer=null}updateSSRCInfo(e,t){this.ssrcInfoMap.has(e)||this.ssrcInfoMap.set(e,{firstTime:0,lastTime:0,frames:0,fps:0}),this._calculateFPS(e,t),this._removeZeroFPS()}_calculateFPS(e,t){const r=this.ssrcInfoMap.get(e);if(0===r.frames?r.firstTime=t:r.lastTime=t,r.frames+=1,r.frames>2&&r.frames%5==0&&r.lastTime-r.firstTime>=1e3){const t=Math.floor(1e3/((r.lastTime-r.firstTime)/(r.frames-1)));r.fps!==t&&(this._notifyFPS(e,t),r.fps=t),r.firstTime=r.lastTime,r.frames=1}}_removeZeroFPS(){let e=Date.now();this.ssrcInfoMap.forEach(((t,r)=>{const i=this.ssrcInfoMap.get(r);i&&i.lastTime&&e-i.lastTime>2e3&&(this.ssrcInfoMap.delete(r),this._notifyFPS(r,0))}))}_notifyFPS(e,t){postMessage({status:66.6,data:{ssrc:e,fps:t}})}_checkIfNewFrameComing(){this.timer&&(clearTimeout(this.timer),this.timer=null),this.timer=setTimeout((()=>{this._removeZeroFPS(),this.timer=null}),2500)}},new class{constructor(){this.ssrcInfoMap=new Map,this.timer=null}updateSSRCInfo(e,t){this.ssrcInfoMap.has(e)||this.ssrcInfoMap.set(e,{timeList:[],lastTime:0,fps:0}),this._calculateFPS(e,t),this._removeZeroFPS(),this._checkIfNewFrameComing()}_calculateFPS(e,t){const r=this.ssrcInfoMap.get(e);if(r.timeList.push(t),r.lastTime=t,r.timeList.length>2){const t=r.timeList[0],i=r.timeList[r.timeList.length-1];if(i-t>=1e3){const s=Math.floor(1e3/((i-t)/(r.timeList.length-1)));r.fps!==s&&(this._notifyFPS(e,s),r.fps=s),r.timeList=[]}}r.timeList.length>30&&(r.timeList=r.timeList.slice(r.timeList.length-30))}_removeZeroFPS(){this.ssrcInfoMap.forEach(((e,t)=>{const r=this.ssrcInfoMap.get(t);r&&Date.now()-r.lastTime>2e3&&(this.ssrcInfoMap.delete(t),this._notifyFPS(t,0))}))}_notifyFPS(e,t){postMessage({status:66.6,data:{ssrc:e,fps:t}})}_checkIfNewFrameComing(){this.timer&&(clearTimeout(this.timer),this.timer=null),this.timer=setTimeout((()=>{this._removeZeroFPS(),this.timer=null}),2500)}};class Z{constructor(e,t,r){var i;this.canvas=e,this.gl=null===(i=this.canvas)||void 0===i?void 0:i.getContext("webgl2"),this.glExtension=J(this.gl,"WEBGL_lose_context"),this.onContextLost=t,this.onContextRestored=r,this.addEventListeners()}addEventListeners(){var e,t;null===(e=this.canvas)||void 0===e||e.addEventListener("webglcontextlost",(e=>{var t;e.preventDefault(),this.onContextLost&&this.onContextLost(e),null===(t=this.glExtension)||void 0===t||t.restoreContext()})),null===(t=this.canvas)||void 0===t||t.addEventListener("webglcontextrestored",(()=>{this.onContextRestored&&this.onContextRestored()}))}}var Q=r(6984),ee=r.n(Q),te=function(e,t,r,i){return new(r||(r=Promise))((function(s,n){function o(e){try{c(i.next(e))}catch(e){n(e)}}function a(e){try{c(i.throw(e))}catch(e){n(e)}}function c(e){var t;e.done?s(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(o,a)}c((i=i.apply(e,t||[])).next())}))};function re(e){return te(this,void 0,void 0,(function*(){const t=yield function(e){return te(this,void 0,void 0,(function*(){const t=yield q(e);return yield t.blob()}))}(e),r=ee().createObjectURL(t);"function"==typeof importScripts&&importScripts(r),ee().revokeObjectURL(r)}))}var ie=function(e,t,r,i){return new(r||(r=Promise))((function(s,n){function o(e){try{c(i.next(e))}catch(e){n(e)}}function a(e){try{c(i.throw(e))}catch(e){n(e)}}function c(e){var t;e.done?s(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(o,a)}c((i=i.apply(e,t||[])).next())}))};let se=function(){};se.prototype={threads:()=>ie(void 0,void 0,void 0,(function*(){return e=new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,2,1,0,5,4,1,3,1,1,10,11,1,9,0,65,0,254,16,2,0,26,11]),ie(void 0,void 0,void 0,(function*(){if(!WebAssembly.validate(e))return!1;try{return(new MessageChannel).port1.postMessage(new SharedArrayBuffer(1)),!0}catch(e){return!1}}));var e})),simd:()=>ie(void 0,void 0,void 0,(function*(){return WebAssembly.validate(new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,2,1,0,10,9,1,7,0,65,0,253,15,26,11]))}))};const ne=new se;var oe=function(e,t,r,i){return new(r||(r=Promise))((function(s,n){function o(e){try{c(i.next(e))}catch(e){n(e)}}function a(e){try{c(i.throw(e))}catch(e){n(e)}}function c(e){var t;e.done?s(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(o,a)}c((i=i.apply(e,t||[])).next())}))};self.GetWebCodecsEncoderL1T2Flag_js=()=>1,self.GetWebCodecsEncoderFallbackFlag_js=()=>1,self.LimitWebCodecsEncoderTo360_js=()=>!1,self.LimitWebCodecsDecoderTo360_js=()=>!1,self.hardcodecpunumber=()=>navigator.hardwareConcurrency||1,self.IsSupportMultiThread=()=>0,self.js_info_from_wcl_video_data=(e,t,r,i,s,n)=>{Module._free(t)},self.GetLogLevel_js=()=>0;const ae=class{constructor(){this.isSABEnable=!!self.SharedArrayBuffer,this.afnModelArtifacts={},this.afnIOHandle={},this.baseModelArtifacts={},this.baseIOHandle={},this.modelLoadedCount=0,this.manualFreeMemory=!1,this.backend="",this.tfHelper=null,this.afnIOHandle.load=()=>this.afnModelArtifacts,this.afnIOHandle.save=()=>{},this.baseIOHandle.load=()=>this.baseModelArtifacts,this.baseIOHandle.save=()=>{},this.vbFrameCallback=this.vbFrameCallback.bind(this),this.executeBase=this.executeBase.bind(this),this.executeAfn=this.executeAfn.bind(this)}GET_HEAP_U8(){return self.GROWABLE_HEAP_U8?self.GROWABLE_HEAP_U8():Module.HEAPU8}GET_HEAD_F32(){return self.GROWABLE_HEAP_F32?self.GROWABLE_HEAP_F32():Module.HEAPF32}vbFrameCallback(e,t,r,i,s,n,o,a,c,h){const u={data:this.GET_HEAP_U8().subarray(t+0,t+r),data_ptr:this.isSABEnable?t:null,len_of_data:r,format_width:i,format_height:s,valid_x:n,valid_y:o,valid_width:a,valid_height:c,yuv_limited:h};this.onVBFrame&&this.onVBFrame(u),this.isSABEnable&&this.manualFreeMemory||Module._free(t)}executeBase(e,t,r,i){return tf.tidy((()=>{var s=new Float32Array(wasmMemory.buffer,e,t),n=tf.tensor4d(s,[1,144,256,3],"float32"),o=this.baseModel.predict(n);1==o[1].size?(this.mask=Float32Array.from(o[0].as1D(36864).arraySync()),this.prob=Float32Array.from(o[1].as1D(1).arraySync())):(this.mask=Float32Array.from(o[1].as1D(36864).arraySync()),this.prob=Float32Array.from(o[0].as1D(1).arraySync()));let a=new Float32Array(wasmMemory.buffer);a.set(this.mask,r>>2),a.set(this.prob,i>>2)})),0}executeAfn(e,t,r,i,s){return tf.tidy((()=>{var n=new Float32Array(wasmMemory.buffer,e,i),o=new Float32Array(wasmMemory.buffer,t,i),a=new Float32Array(wasmMemory.buffer,r,i/3),c=tf.tensor4d(n,[1,144,256,3],"float32"),h=tf.tensor4d(o,[1,144,256,3],"float32"),u=tf.tensor4d(a,[1,144,256,1],"float32"),l=this.afnModel.predict([c,h,u]);this.mask=Float32Array.from(l.as1D(36864).arraySync()),this.GET_HEAD_F32().set(this.mask,s>>2)})),0}getResourceUrl(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const i="".concat(e,"/vb-resource/tf.min.js"),s="".concat(e,"/vb-resource/dualModel.bin");let n,o;return t?(n="".concat(e,r?"/video.mtsimd.js":"/video.simd.js"),o="".concat(e,r?"/video.mtsimd.wasm":"/video.simd.wasm")):(n="".concat(e,r?"/video.mt.js":"/video.decode.js"),o="".concat(e,r?"/video.mt.wasm":"/video.decode.wasm")),{tfJsUrl:i,modelUrl:s,wasmGlueCodeUrl:n,wasmUrl:o,wasmBackendUrl:"".concat(e,"/vb-resource/tf-backend-wasm.min.js")}}decryptData(e,t,r){return self.crypto.subtle.decrypt({name:"AES-GCM",iv:r},t,e)}modelLoadReady(){this.modelLoadedCount++,2===this.modelLoadedCount&&this.onModelReady&&this.onModelReady()}loadWasm(e,t){return oe(this,void 0,void 0,(function*(){return self.Module={instantiateWasm:(e,r)=>oe(this,void 0,void 0,(function*(){let i;try{const e=yield q(t);if(!e.ok)return void console.error("fetch vb wasm error",e.statusText);i=yield e.arrayBuffer()}catch(e){return void console.error("fetch vb wasm error",e)}const{instance:s}=yield WebAssembly.instantiate(i,e);return r(s),s.exports}))},yield re(e),new Promise(((e,t)=>{Module.onRuntimeInitialized=()=>{this.create_vb_no_sab_thread=Module.cwrap("_create_vb_no_sab_thread","number",[]),this.signal_vb_thread_bg=Module.cwrap("_signal_vb_thread_bg","number",["number","number","number","number"]),this.signal_vb_thread_blur=Module.cwrap("_signal_vb_thread_blur","number",["number","number"]),this.signal_vb_thread_video_yuv=Module.cwrap("_signal_vb_thread_video_yuv","number",["number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number"]),this.signal_vb_thread_video_rgba=Module.cwrap("_signal_vb_thread_video_rgba","number",["number","number","number","number","number","number","number","number"]),e()},Module.onAbort=()=>{t("wasm initialize failed")}}))}))}initTF(e,t,r,i,s){return oe(this,void 0,void 0,(function*(){var n;let o=!1,a=!1,c=null;yield re(e);try{o=yield tf.setBackend("webgl"),tf.env().set("WEBGL_PACK_CONV2DTRANSPOSE",!1)}catch(e){c=e}if(!o&&r){if(!i||!s)return Promise.reject("No webAssembly backend resource provided");yield re(i),tf.wasm.setWasmPaths(s+"/vb-resource/");try{a=yield tf.setBackend("wasm")}catch(e){c=e}}return o||a?(this.backend=tf.getBackend(),o&&!this.tfHelper&&(this.tfHelper=new Z(null===(n=tf.backend())||void 0===n?void 0:n.canvas,null,(()=>oe(this,void 0,void 0,(function*(){tf.disposeVariables(),tf.engine().reset(),tf.setBackend("webgl").then((()=>{this.initializeAiModel(t)}))}))))),this.initializeAiModel(t)):Promise.reject(c)}))}initializeAiModel(e){return oe(this,void 0,void 0,(function*(){if("string"==typeof e){const t=yield q(e);if(!t.ok){const{url:e,status:r}=t;throw new Error("Fetch model file failed. url: ".concat(e,", status: ").concat(r))}e=yield t.arrayBuffer()}yield this.DecryptDualModel(e),this.onPredictDone&&this.onPredictDone()}))}initializeAfnModel(e,t){return oe(this,void 0,void 0,(function*(){var r=JSON.parse(t);if(this.afnModelArtifacts.modelTopology=r.modelTopology,this.afnModelArtifacts.format=r.format,this.afnModelArtifacts.generatedBy=r.generatedBy,this.afnModelArtifacts.convertedBy=r.convertedBy,r.weightsManifest)for(var i=0;i<r.weightsManifest.length;i++)this.afnModelArtifacts.weightSpecs=r.weightsManifest[i].weights;r.trainingConfig&&(this.afnModelArtifacts.trainingConfig=r.trainingConfig),r.userDefinedMetadata&&(this.afnModelArtifacts.userDefinedMetadata=r.userDefinedMetadata),this.afnModelArtifacts.weightData=e,this.afnModel=yield tf.loadGraphModel(this.afnIOHandle),this.modelLoadReady();var s=new Float32Array(110592),n=new Float32Array(110592),o=new Float32Array(36864),a=tf.tensor4d(s,[1,144,256,3],"float32"),c=tf.tensor4d(n,[1,144,256,3],"float32"),h=tf.tensor4d(o,[1,144,256,1],"float32");this.afnModel.predict([a,c,h])}))}initializeBaseModel(e,t){return oe(this,void 0,void 0,(function*(){var r=JSON.parse(t);if(this.baseModelArtifacts.modelTopology=r.modelTopology,this.baseModelArtifacts.format=r.format,this.baseModelArtifacts.generatedBy=r.generatedBy,this.baseModelArtifacts.convertedBy=r.convertedBy,r.weightsManifest)for(var i=0;i<r.weightsManifest.length;i++)this.baseModelArtifacts.weightSpecs=r.weightsManifest[i].weights;r.trainingConfig&&(this.baseModelArtifacts.trainingConfig=r.trainingConfig),r.userDefinedMetadata&&(this.baseModelArtifacts.userDefinedMetadata=r.userDefinedMetadata),this.baseModelArtifacts.weightData=e,this.baseModel=yield tf.loadGraphModel(this.baseIOHandle),this.modelLoadReady();var s=new Float32Array(110592),n=tf.tensor4d(s,[1,144,256,3],"float32");this.baseModel.predict(n)}))}DecryptDualModel(e){return oe(this,void 0,void 0,(function*(){let t=new Uint8Array(e,0,12),r=new Uint8Array(e,12,32);const i=yield self.crypto.subtle.importKey("raw",r,"AES-GCM",!0,["encrypt","decrypt"]);let s=t.length+r.length,n=new Uint32Array(e.slice(s,s+4))[0];s+=4;let o=e.slice(s,s+n);s+=n,n=new Uint32Array(e.slice(s,s+4))[0],s+=4;let a=new Uint8Array(e,s,n);s+=n,n=new Uint32Array(e.slice(s,s+4))[0],s+=4;let c=e.slice(s,s+n);s+=n,n=new Uint32Array(e.slice(s,s+4))[0],s+=4;let h=new Uint8Array(e,s,n);yield Promise.all([(()=>oe(this,void 0,void 0,(function*(){const e=yield this.decryptData(h,i,t),r=(new TextDecoder).decode(e);yield this.initializeAfnModel(c,r)})))(),(()=>oe(this,void 0,void 0,(function*(){const e=yield this.decryptData(a,i,t),r=(new TextDecoder).decode(e);yield this.initializeBaseModel(o,r)})))()])}))}initialize(e){return oe(this,void 0,void 0,(function*(){const{cdnPath:t,enableWasm:r=!1,needFrame:i=!1}=e;let s=null,n=!1,o=!1;try{n=yield ne.simd(),o=yield ne.threads()}catch(e){console.error(e)}t&&(s=this.getResourceUrl(t,n,o));const{tfJsUrl:a=(null==s?void 0:s.tfJsUrl),wasmGlueCodeUrl:c=(null==s?void 0:s.wasmGlueCodeUrl),wasmUrl:h=(null==s?void 0:s.wasmUrl),model:u=(null==s?void 0:s.modelUrl)}=e;if(!(a&&c&&h&&u))return Promise.reject("Wrong parameter");this.manualFreeMemory=i,yield Promise.all([this.initTF(a,u,r,null==s?void 0:s.wasmBackendUrl,t),this.loadWasm(c,h)]),this.create_vb_no_sab_thread(),this.signal_vb_thread_blur(0,0),self.execute_base=this.executeBase,self.execute_afn=this.executeAfn,self.processed_capture_data_callback=this.vbFrameCallback}))}generateVBFrame(e){return oe(this,void 0,void 0,(function*(){if("format"in e){const{format:t}=e,{width:r,height:i}=e.visibleRect;let s,n,o,a,c,h,u,l,f,d,p,m,v,_;if(n=r,o=i,d=e.allocationSize(),"NV12"===t||"BGRA"===t||"I420"===t||"I420A"===t){p=Module._malloc(d);const g=this.GET_HEAP_U8().subarray(p,p+d);try{yield e.copyTo(g)}catch(t){throw e.close(),Module._free(p),new Error("VB_VIDEOFRAME_COPYTO_ERROR")}try{"NV12"===t?(a=r*i,c=r*i/2,h=r,u=h,l=0,f=0,this.signal_vb_thread_video_yuv(p,0,n,o,p,a,p+a,c,p+a,c,h,u,u,l,f,3)):"BGRA"===t?(h=r,m=i,l=0,f=0,s=4,this.signal_vb_thread_video_rgba(p,d,n,o,4*n,0,0,s)):"I420"!==t&&"I420A"!==t||(h=r,m=i,u=h/2,v=h/2,a=r*i,c=r*i/4,_=r*i/4,l=0,f=0,s=2,this.signal_vb_thread_video_yuv(p,0,n,o,p,a,p+a,c,p+a+c,c,h,u,u,l,f,s))}catch(e){Module._free(p)}}else this.onUnsupportedFrame&&this.onUnsupportedFrame(t||"");e.close()}else{const{width:t,height:r,data:i}=e,s=Module._malloc(t*r*4);let n=this.GET_HEAP_U8().subarray(s,s+i.length);const o=i.length;n.set(i,0),this.signal_vb_thread_video_rgba(s,o,t,r,4*t,0,0,1)}}))}free(e){Module._free(e)}setBackgroundImage(e){const{data:t,width:r,height:i}=e,s=Module._malloc(t.length);let n=new Uint8Array(t);this.GET_HEAP_U8().subarray(s,s+t.length).set(n,0),this.signal_vb_thread_bg(s,n.length,r,i)}blur(){this.signal_vb_thread_blur(0,0)}},ce=0,he=3;function ue(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,i)}return r}function le(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ue(Object(r),!0).forEach((function(t){R(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ue(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}new Map([["useinbandfec",1],["maxaveragebitrate",48e3],["maxplaybackrate",24e3],["sprop-maxcapturerate",24e3],["sprop-stereo",null],["stereo",null]]),new Map([["useinbandfec",null],["maxaveragebitrate",96e3],["maxplaybackrate",48e3],["sprop-maxcapturerate",48e3],["sprop-stereo",1],["stereo",1]]),new Map([["useinbandfec",null],["maxaveragebitrate",96e3],["maxplaybackrate",48e3],["sprop-maxcapturerate",48e3],["sprop-stereo",1],["stereo",1]]),new Map([["useinbandfec",null],["maxaveragebitrate",128e3],["maxplaybackrate",48e3],["sprop-maxcapturerate",48e3],["sprop-stereo",1],["stereo",1]]),new Map([["useinbandfec",null],["maxaveragebitrate",128e3],["maxplaybackrate",48e3],["sprop-maxcapturerate",48e3],["sprop-stereo",1],["stereo",1]]),new Map([["useinbandfec",null],["maxaveragebitrate",96e3],["maxplaybackrate",48e3],["sprop-maxcapturerate",48e3]]),new Map([["useinbandfec",1],["maxaveragebitrate",64e3],["maxplaybackrate",24e3],["sprop-maxcapturerate",24e3],["sprop-stereo",null],["stereo",null]]),new Map([["stereo",1]]);let fe=new Map,de=[];function pe(e){e.preventDefault()}function me(e,t,r,i,s,n,o){let a=arguments.length>7&&void 0!==arguments[7]&&arguments[7];this.canvasElement=e,this.canvasID=t,this.contextOptions=s,this.textureindex=r||0,this.initmask=!!o,this.isEnableCanvasAlphaChannel=a,me.prototype.ROTATION_CLOCK0=0,me.prototype.ROTATION_CLOCK90=1,me.prototype.ROTATION_CLOCK180=2,me.prototype.ROTATION_CLOCK270=3,this.webGLResources=n,n||(this.initContextGL(),this.contextGL&&(this.webGLContextLostProtect(),this.contextGL.isContextLost()&&this.restoreContext())),this.webglVertexPos=[0,0,0,0],this.webglTexturePos=[0,0,0,0],this.vertexPos=[0,0,0,0],this.texturePos=[0,0,0,0],this.reinit(n);var c=new ArrayBuffer(4);this.dummpyCursor=new Uint8Array(c),this.dummpyWaterMark=new Uint8Array(c),this.cursorWidth=0,this.cursorHeight=0,this.hasCursor=0,this.lastcursorSyncId=-1,this.hasWaterMark=0,this.watermarkOpacity=.15,this.watermarkWidth=0,this.watermarkHeight=0,this.isMultiView=!1,this.hasWholeFrame=0,this.croppingParams={},this.croppingParams.top=0,this.croppingParams.left=0,this.croppingParams.width=0,this.croppingParams.height=0,this.textureWidth=0,this.textureHeight=0,this.viewWidth=0,this.viewHeight=0,this.picRotation=-1,this.bgColor=[0,0,0],this.cx=0,this.cy=0,this.cw=0,this.ch=0,this.colorRange=-1,this.videoMode=-1,this.rotation=this.ROTATION_CLOCK0,this.fillMode=0,this.fillModeForResolution=0,this.viewPostion=null,this.enable_rounded_corner=0,this.radius_lt_x=0,this.radius_lt_y=0,this.radius_lb_x=0,this.radius_lb_y=0,this.radius_rt_x=0,this.radius_rt_y=0,this.radius_rb_x=0,this.radius_rb_y=0,this.aa_width=m,this.viewport_rect=null}me.prototype.isLocalDisplay=function(){return 0==this.textureindex},me.prototype.reinit=function(e){if(this.webGLResources=e,!this.contextGL||this.contextGL.isContextLost()||this.contextGL.glInitSucceed||this.webGLResources){if(this.webGLResources&&this.webGLResources.contextgl&&!this.webGLResources.contextgl.isContextLost()){this.contextGL=this.webGLResources.contextgl,this.shaderProgram=this.webGLResources.program,this.vertexPosBuffer=this.webGLResources.vBuffer,this.texturePosBuffer=this.webGLResources.tBuffer,this.webglTexturePos=this.webGLResources.webglTexturePos,this.webglVertexPos=this.webGLResources.webglVertexPos,this.initTextures(!1);let e=this.contextGL.getError();this.contextGL.glInitSucceed=e!=this.contextGL.NO_ERROR&&e!=this.contextGL.CONTEXT_LOST_WEBGL?0:1}}else{this.initProgram(),this.initmask?this.initTextures(!1):this.initTextures(!0),this.initBuffers();let e=this.contextGL.getError();this.contextGL.glInitSucceed=e!=this.contextGL.NO_ERROR&&e!=this.contextGL.CONTEXT_LOST_WEBGL?0:1}},me.prototype.webGLContextLostSimulate=function(){const e=J(this.contextGL,"WEBGL_lose_context");null==e||e.loseContext()},me.prototype.restoreContext=function(){if(this.contextGL)try{var e,t;null!==(e=this.canvasElement)&&void 0!==e&&e.loseContextExtension&&!this.canvasElement.restoreTimeoutId&&this.contextGL.isContextLost()&&(this.canvasElement.restoreTimeoutId=setTimeout((()=>{this.canvasElement.reportcontextloss||(this.canvasElement.reportcontextloss=!0,l("WebGLRestoreTimeout")),this.canvasElement.restoreTimeoutId=0}),1500),null===(t=this.canvasElement)||void 0===t||t.loseContextExtension.restoreContext())}catch(e){c("webgl restoreContext exception",e)}},me.prototype.webgGLContextLostCallback=function(e){u("webglcontextlost event: canvas listener size=".concat(de.length,",  canvas id: ").concat(this.canvasID,", , ids:").concat(de.join())),e.preventDefault(),this.contextGL.glInitSucceed=0,this.contextOptions&&this.contextOptions.webglcontextlostCallback&&this.contextOptions.webglcontextlostCallback(e,this.contextOptions.params)},me.prototype.removeEventListener=function(e,t){if(e&&t){e.restoreTimeoutId&&(clearTimeout(e.restoreTimeoutId),e.restoreTimeoutId=void 0),e.removeEventListener("webglcontextlost",t.contextLostHandler),e.removeEventListener("webglcontextrestored",t.contextRestoredHandler);const r=de.indexOf(this.canvasID);de.splice(r,1),fe.delete(e)}},me.prototype.webGLContextRestoredCallback=function(e){var t,r;u("webglcontextrestored event from canvas id: ".concat(this.canvasID)),this.canvasElement.restoreTimeoutId&&(clearTimeout(this.canvasElement.restoreTimeoutId),this.canvasElement.restoreTimeoutId=void 0),this.webglVertexPos=[0,0,0,0],this.webglTexturePos=[0,0,0,0],this.reinit(),null===(t=this.contextOptions)||void 0===t||null===(r=t.webglcontextrestoredCallback)||void 0===r||r.call(t,e,this.contextOptions.params)},me.prototype.webGLContextLostProtect=function(){this.canvasElement&&!this.canvasElement.loseContextExtension&&(this.canvasElement.loseContextExtension=J(this.contextGL,"WEBGL_lose_context"));let e=this.canvasElement,t=fe.get(e);t&&this.removeEventListener(e,t),fe.set(e,this),this.contextLostHandler=this.webgGLContextLostCallback.bind(this),this.contextRestoredHandler=this.webGLContextRestoredCallback.bind(this),e.addEventListener("webglcontextlost",this.contextLostHandler,{capture:!1}),e.addEventListener("webglcontextrestored",this.contextRestoredHandler,{capture:!1}),-1===de.indexOf(this.canvasID)&&(de.push(this.canvasID),de.length>4&&u("webglcanvas listener size=".concat(de.length,", ids:").concat(de.join())))},me.prototype.isWebGL=function(){return this.contextGL},me.prototype.isAvaiable=function(){return this.contextGL&&!this.contextGL.isContextLost()&&this.contextGL.glInitSucceed},me.prototype.initContextGL=function(){for(var e,t,r,i=this.canvasElement,s=null,n=["webgl","experimental-webgl","moz-webgl","webkit-3d"],o=0;!s&&o<n.length;){var a=n[o];try{if(d().config.isEnableCanvasCtxOptionsOpt()){let e={depth:!1,stencil:!1,antialias:!1,alpha:this.isEnableCanvasAlphaChannel};if(this.contextOptions){let t=le(le({},this.contextOptions),e);s=i.getContext(a,t)}else s=i.getContext(a,e)}else s=this.contextOptions?i.getContext(a,this.contextOptions):i.getContext(a)}catch(e){s=null}s&&"function"==typeof s.getParameter||(s=null),++o}if(this.contextGL=s,!s||s.isContextLost())return c("Failed when trying to get WebGLContext on canvas(".concat(null===(e=this.canvasElement)||void 0===e?void 0:e.width,",").concat(null===(t=this.canvasElement)||void 0===t?void 0:t.height,"), gl=").concat(s,", lost=").concat(null===(r=s)||void 0===r?void 0:r.isContextLost())),void l("InitWebGLFail");s.glInitSucceed=0},me.prototype.initProgram=function(){var e=this.contextGL,t=e.createShader(e.VERTEX_SHADER);e.shaderSource(t,"\n    attribute vec4 vertexPos;\n    attribute vec4 texturePos;\n    attribute vec4 masktexturePos;\n    varying vec2 textureCoord;\n    varying vec2 masktextureCoord;\n\n    void main() {\n        gl_Position = vertexPos;\n        textureCoord = texturePos.xy;\n        masktextureCoord = masktexturePos.xy;\n    }\n  "),e.compileShader(t),e.getShaderParameter(t,e.COMPILE_STATUS)||e.isContextLost()||u("webgl Vertex shader failed to compile: "+e.getShaderInfoLog(t));var r=e.createShader(e.FRAGMENT_SHADER);e.shaderSource(r,"\n    precision highp float;\n    varying highp vec2 textureCoord;\n    varying highp vec2 masktextureCoord;\n\n    uniform sampler2D ySampler;\n    uniform sampler2D uSampler;\n    uniform sampler2D vSampler;\n    uniform sampler2D cursorSampler;\n    uniform sampler2D waterMarkSampler;\n    uniform sampler2D previewVideoSampler;\n    uniform sampler2D maskSampler;\n\n    uniform vec4 cursorInfo;\n    uniform int onlyRGBA;\n    uniform int bgraMode;\n    uniform int colorRange;\n    uniform int waterMarkFlag;\n    uniform int cursorFlag;\n    uniform int yuvmode;\n\n    const int MAX_ELLIPSE_COUNT = 10;\n    uniform int maskFlag;                       // 0: mask disabled; 1: mask enabled;\n    uniform int maskMode;                       // 0: static mask; 1: dynamic mask;\n    uniform vec4 uEllipses[MAX_ELLIPSE_COUNT];  // each ellipse contains (cx, cy, rx, ry) 4-coords\n    uniform int uEllipseCount;                  // how many ellipses will draw\n\n    // rounded corner feature in gl shader\n    uniform float u_enable_rounded_corner;\n    uniform float u_radius_lt_x;\n    uniform float u_radius_lt_y;\n    uniform float u_radius_lb_x;\n    uniform float u_radius_lb_y;\n    uniform float u_radius_rt_x;\n    uniform float u_radius_rt_y;\n    uniform float u_radius_rb_x;\n    uniform float u_radius_rb_y;\n    uniform float u_aa_width;\n    uniform vec4 u_viewport_rect;\n\n    const mat4 YUV2RGB_L = mat4(\n      1.1643828125, 0, 1.59602734375, -0.87078515625,\n      1.1643828125, -0.39176171875, -0.81296875, 0.52959375,\n      1.1643828125, 2.017234375, 0, -1.081390625,\n      0, 0, 0, 1\n    );\n\n    const mat4 YUV2RGB_F = mat4(\n      1.0, 0, 1.402, -0.701,\n      1.0, -0.34413, -0.71414, 0.529135,\n      1.0, 1.772, 0, -0.886,\n      0, 0, 0, 1\n    );\n\n    void main(void) {\n      vec4 c;\n      if (waterMarkFlag != 1) {\n        if (onlyRGBA == 0) {\n          highp float y = texture2D(ySampler, textureCoord).r;\n          highp float u;\n          highp float v;\n\n          if (yuvmode == 1) {\n            u = texture2D(uSampler, textureCoord).r;\n            v = texture2D(vSampler, textureCoord).r;\n          } else {\n            u = texture2D(uSampler, textureCoord).r;\n            v = texture2D(uSampler, textureCoord).a;\n          }\n\n          if (colorRange == 0) {\n            c = vec4(y, u, v, 1) * YUV2RGB_L;\n          } else {\n            c = vec4(y, u, v, 1) * YUV2RGB_F;\n          }\n\n          if (cursorFlag == 1) {\n            if (cursorInfo.z > 0.0 &&\n                textureCoord.x >= cursorInfo.x &&\n                textureCoord.y >= cursorInfo.y &&\n                textureCoord.x < cursorInfo.x + cursorInfo.z &&\n                textureCoord.y < cursorInfo.y + cursorInfo.w) {\n\n              vec2 cursorCoord = textureCoord - cursorInfo.xy;\n              cursorCoord /= cursorInfo.zw;\n              vec4 cursor = texture2D(cursorSampler, cursorCoord);\n              c = c * (1.0 - cursor.a) + cursor * cursor.a;\n            }\n          }\n        } else {\n          c = texture2D(previewVideoSampler, textureCoord);\n          if (bgraMode == 1) {\n            c = vec4(c.b, c.g, c.r, c.a);\n          }\n        }\n      } else {\n        c = texture2D(waterMarkSampler, textureCoord);\n        if (c.r == 0.0 && c.g == 0.0 && c.b == 0.0) {\n          c.a = 0.0;\n        }\n      }\n\n      if (maskFlag == 1 && waterMarkFlag != 1) {\n        vec4 mask = texture2D(maskSampler, masktextureCoord);\n        if (maskMode == 0) {\n          // -- handle static mask --\n          if (mask.r != 0.0 || mask.g != 0.0 || mask.b != 0.0) {\n            c = mask * mask.a + c * (1.0 - mask.a);\n          }\n        } else if (maskMode == 1) {\n          // -- handle dynamic mask --\n          bool inEllipse = false; // variable for checking whether the pixel to be drawn hits ellipse\n          for (int i = 0; i < MAX_ELLIPSE_COUNT; i++) {\n            if (i > uEllipseCount) break;\n\n            vec2 ellipseCenter = uEllipses[i].xy;\n            vec2 ellipseRadii = uEllipses[i].zw;\n            vec2 ellipsePos = masktextureCoord - ellipseCenter;\n\n            float ellipseEq = (ellipsePos.x * ellipsePos.x) / (ellipseRadii.x * ellipseRadii.x) +\n                              (ellipsePos.y * ellipsePos.y) / (ellipseRadii.y * ellipseRadii.y);\n            if (ellipseEq <= 1.0) {\n              // the pixel in the ellipse range\n              inEllipse = true;\n              break;\n            }\n          }\n\n          if (inEllipse) {\n            c = mask * mask.a + c * (1.0 - mask.a);\n          }\n        }\n      }\n\n      if (waterMarkFlag != 1) {\n        c.a = 1.0;\n      }\n\n      if (u_enable_rounded_corner < 0.5) {\n        gl_FragColor = c;\n        return;\n      }\n\n      // step 1: viewport coordinate mapping\n      // convert the fragment coordinate(canvas coordinate) to the viewport coordinate\n      // for example, a viewport={x: 100, y: 100, w: 200, h: 160}, a fragCoord.xy={x:120, y: 120}\n      // we can get the pos={x: 20, y: 20}\n      vec2 pos = gl_FragCoord.xy - u_viewport_rect.xy;\n      vec2 viewportSize = u_viewport_rect.zw;\n\n      // convert the normalized radius to pixel value\n      float r_lt_x = u_radius_lt_x * viewportSize.x;\n      float r_lt_y = u_radius_lt_y * viewportSize.y;\n      float r_rt_x = u_radius_rt_x * viewportSize.x;\n      float r_rt_y = u_radius_rt_y * viewportSize.y;\n      float r_lb_x = u_radius_lb_x * viewportSize.x;\n      float r_lb_y = u_radius_lb_y * viewportSize.y;\n      float r_rb_x = u_radius_rb_x * viewportSize.x;\n      float r_rb_y = u_radius_rb_y * viewportSize.y;\n\n      // step 2: calculate the rounded corner mask (as alpha)\n      float alpha = 1.0;\n\n      // --- calculation of the left-top corner ---\n      // Condition: if (pos.x < r_lt_x && pos.y < r_lt_y)\n      float in_lt = (1.0 - step(r_lt_x, pos.x)) * (1.0 - step(r_lt_y, pos.y));\n      // the circle center of the left-top corner in pixel coordinate\n      vec2 center_lt = vec2(r_lt_x, r_lt_y);\n      // calculate and normalize the distance between the fragment and the center\n      vec2 diff_lt = (pos - center_lt) / vec2(r_lt_x, r_lt_y);\n      float normDist_lt = length(diff_lt);\n      // smoothstep function is used to calculate the alpha value\n      float mask_lt = 1.0 - smoothstep(1.0 - u_aa_width, 1.0, normDist_lt);\n      float final_lt = mix(1.0, mask_lt, in_lt);\n\n      // --- calculation of the right-top corner ---\n      float in_rt = (1.0 - step(r_rt_x, viewportSize.x - pos.x)) * (1.0 - step(r_rt_y, pos.y));\n      vec2 center_rt = vec2(viewportSize.x - r_rt_x, r_rt_y);\n      vec2 diff_rt = (pos - center_rt) / vec2(r_rt_x, r_rt_y);\n      float normDist_rt = length(diff_rt);\n      float mask_rt = 1.0 - smoothstep(1.0 - u_aa_width, 1.0, normDist_rt);\n      float final_rt = mix(1.0, mask_rt, in_rt);\n\n      // --- calculation of the left-bottom corner ---\n      float in_lb = (1.0 - step(r_lb_x, pos.x)) * (1.0 - step(r_lb_y, viewportSize.y - pos.y));\n      vec2 center_lb = vec2(r_lb_x, viewportSize.y - r_lb_y);\n      vec2 diff_lb = (pos - center_lb) / vec2(r_lb_x, r_lb_y);\n      float normDist_lb = length(diff_lb);\n      float mask_lb = 1.0 - smoothstep(1.0 - u_aa_width, 1.0, normDist_lb);\n      float final_lb = mix(1.0, mask_lb, in_lb);\n\n      // --- calculation of the right-bottom corner ---\n      float in_rb = (1.0 - step(r_rb_x, viewportSize.x - pos.x)) * (1.0 - step(r_rb_y, viewportSize.y - pos.y));\n      vec2 center_rb = vec2(viewportSize.x - r_rb_x, viewportSize.y - r_rb_y);\n      vec2 diff_rb = (pos - center_rb) / vec2(r_rb_x, r_rb_y);\n      float normDist_rb = length(diff_rb);\n      float mask_rb = 1.0 - smoothstep(1.0 - u_aa_width, 1.0, normDist_rb);\n      float final_rb = mix(1.0, mask_rb, in_rb);\n\n      // Get the minimum value from the four corners (to ensure that if any corner requires transparency it is applied)\n      float finalAlpha = min(min(final_lt, final_rt), min(final_lb, final_rb));\n\n      // Final output color\n      gl_FragColor = vec4(c.rgb, c.a * finalAlpha);\n    }\n"),e.compileShader(r),e.getShaderParameter(r,e.COMPILE_STATUS)||e.isContextLost()||u("webgl Fragment shader failed to compile: "+e.getShaderInfoLog(r));var i=e.createProgram();e.attachShader(i,t),e.attachShader(i,r),e.linkProgram(i),e.getProgramParameter(i,e.LINK_STATUS)||e.isContextLost()||u("webgl Program failed to compile: "+e.getProgramInfoLog(i)),e.useProgram(i),this.shaderProgram=i},me.prototype.initBuffers=function(){var e=this.contextGL,t=this.shaderProgram,r=e.createBuffer();e.bindBuffer(e.ARRAY_BUFFER,r),e.bufferData(e.ARRAY_BUFFER,new Float32Array([1,1,-1,1,1,-1,-1,-1,1,1,-1,1,1,-1,-1,-1]),e.STATIC_DRAW);var i=e.getAttribLocation(t,"vertexPos");e.enableVertexAttribArray(i),e.vertexAttribPointer(i,2,e.FLOAT,!1,0,0),this.vertexPosBuffer=r;var s=e.createBuffer();e.bindBuffer(e.ARRAY_BUFFER,s),e.bufferData(e.ARRAY_BUFFER,new Float32Array([1,0,0,0,1,1,0,1,1,0,0,0,1,1,0,1]),e.STATIC_DRAW);var n=e.getAttribLocation(t,"texturePos");if(e.enableVertexAttribArray(n),e.vertexAttribPointer(n,2,e.FLOAT,!1,0,0),this.initmask&&!this.masktexturePosBuffer){var o=e.createBuffer();e.bindBuffer(e.ARRAY_BUFFER,o),e.bufferData(e.ARRAY_BUFFER,new Float32Array([1,0,0,0,1,1,0,1]),e.STATIC_DRAW);var a=e.getAttribLocation(t,"masktexturePos");e.enableVertexAttribArray(a),e.vertexAttribPointer(a,2,e.FLOAT,!1,0,0),this.masktexturePosBuffer=o}this.texturePosBuffer=s},me.prototype.initTextures=function(e){var t=this.contextGL,r=this.shaderProgram;t.pixelStorei(t.UNPACK_ALIGNMENT,1);var i=this.initTexture();this.yTextureRef=i,this.oyTextureRef=i;var s=this.initTexture();this.uTextureRef=s,this.ouTextureRef=s;var n=this.initTexture();this.vTextureRef=n,this.ovTextureRef=n,e&&this.BindTextures(1),this.waterMarkTextureRef=this.initTexture();var o=t.getUniformLocation(r,"waterMarkSampler");t.uniform1i(o,5),this.waterMarkSamplerRef=o;var a=this.initTexture(),c=t.getUniformLocation(r,"cursorSampler");if(t.uniform1i(c,4),this.cursorTextureRef=a,this.cursorSamplerRef=c,this.cursorInfoRef=t.getUniformLocation(r,"cursorInfo"),this.initmask){t.pixelStorei(t.UNPACK_FLIP_Y_WEBGL,1);var h=this.initTexture(),u=t.getUniformLocation(r,"maskSampler");t.uniform1i(u,4),this.maskTextureRef=h}this.colorRangeRef=t.getUniformLocation(r,"colorRange"),this.onlyRGBARef=t.getUniformLocation(r,"onlyRGBA"),this.bgraModeRef=t.getUniformLocation(r,"bgraMode"),this.waterMarkFlagRef=t.getUniformLocation(r,"waterMarkFlag"),this.maskFlagRef=t.getUniformLocation(r,"maskFlag"),this.cursorFlagRef=t.getUniformLocation(r,"cursorFlag"),this.yuvmodeRef=t.getUniformLocation(r,"yuvmode"),this.ul_enable_rounded_corner=t.getUniformLocation(r,"u_enable_rounded_corner"),this.ul_radius_lt_x=t.getUniformLocation(r,"u_radius_lt_x"),this.ul_radius_lt_y=t.getUniformLocation(r,"u_radius_lt_y"),this.ul_radius_lb_x=t.getUniformLocation(r,"u_radius_lb_x"),this.ul_radius_lb_y=t.getUniformLocation(r,"u_radius_lb_y"),this.ul_radius_rt_x=t.getUniformLocation(r,"u_radius_rt_x"),this.ul_radius_rt_y=t.getUniformLocation(r,"u_radius_rt_y"),this.ul_radius_rb_x=t.getUniformLocation(r,"u_radius_rb_x"),this.ul_radius_rb_y=t.getUniformLocation(r,"u_radius_rb_y"),this.ul_aa_width=t.getUniformLocation(r,"u_aa_width"),this.ul_viewport_rect=t.getUniformLocation(r,"u_viewport_rect")},me.prototype.BindTextures=function(e){var t=this.contextGL,r=this.shaderProgram;if(t.pixelStorei(t.UNPACK_ALIGNMENT,1),t.activeTexture(t.TEXTURE0+0),t.bindTexture(t.TEXTURE_2D,this.yTextureRef),t.activeTexture(t.TEXTURE0+1),t.bindTexture(t.TEXTURE_2D,this.uTextureRef),t.activeTexture(t.TEXTURE0+2),t.bindTexture(t.TEXTURE_2D,this.vTextureRef),1==e){let e=t.getUniformLocation(r,"ySampler");t.uniform1i(e,0);let i=t.getUniformLocation(r,"uSampler");t.uniform1i(i,1);let s=t.getUniformLocation(r,"vSampler");t.uniform1i(s,2)}else if(this.isRGBAMode(e)){let e=t.getUniformLocation(r,"previewVideoSampler");t.uniform1i(e,0);let i=t.getUniformLocation(r,"ySampler");t.uniform1i(i,0);let s=t.getUniformLocation(r,"uSampler");t.uniform1i(s,0);let n=t.getUniformLocation(r,"vSampler");t.uniform1i(n,0)}else if(2==e){let e=t.getUniformLocation(r,"ySampler");t.uniform1i(e,0);let i=t.getUniformLocation(r,"uSampler");t.uniform1i(i,1);let s=t.getUniformLocation(r,"vSampler");t.uniform1i(s,0)}let i=t.getUniformLocation(r,"previewVideoSampler");t.uniform1i(i,0);let s=t.getUniformLocation(r,"maskSampler");this.initmask?(t.activeTexture(t.TEXTURE0+4),t.bindTexture(t.TEXTURE_2D,this.maskTextureRef),t.uniform1i(s,4)):t.uniform1i(s,0);let n=t.getUniformLocation(r,"cursorSampler");t.uniform1i(n,0);let o=t.getUniformLocation(this.shaderProgram,"waterMarkSampler");t.uniform1i(o,5)},me.prototype.initTexture=function(){var e=this.contextGL,t=e.createTexture();return e.bindTexture(e.TEXTURE_2D,t),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,e.LINEAR),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,e.LINEAR),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE),e.bindTexture(e.TEXTURE_2D,null),t},me.prototype.clearDisplay=function(){var e=this.contextGL;e&&(e.clearColor(0,0,0,0),e.clear(e.COLOR_BUFFER_BIT))},me.prototype.cleanup=function(){let e=this.canvasElement,t=fe.get(e);if(t&&this.removeEventListener(e,t),e.defaultContextLostHandler||(e.defaultContextLostHandler=pe,e.addEventListener("webglcontextlost",pe,{capture:!1})),this.cleanupRoundedCornerRadius(),this.isAvaiable()){var r=this.contextGL;r.deleteProgram(this.program),r.activeTexture(r.TEXTURE0),r.bindTexture(r.TEXTURE_2D,null),r.activeTexture(r.TEXTURE1),r.bindTexture(r.TEXTURE_2D,null),r.activeTexture(r.TEXTURE2),r.bindTexture(r.TEXTURE_2D,null),r.activeTexture(r.TEXTURE3),r.bindTexture(r.TEXTURE_2D,null),r.activeTexture(r.TEXTURE4),r.bindTexture(r.TEXTURE_2D,null),r.activeTexture(r.TEXTURE5),r.bindTexture(r.TEXTURE_2D,null),r.bindBuffer(r.ARRAY_BUFFER,null),r.deleteTexture(this.yTextureRef),r.deleteTexture(this.uTextureRef),r.deleteTexture(this.vTextureRef),r.deleteTexture(this.cursorTextureRef),r.deleteTexture(this.waterMarkTextureRef),r.deleteBuffer(this.vertexPosBuffer),r.deleteBuffer(this.texturePosBuffer),this.maskTextureRef&&r.deleteTexture(this.maskTextureRef),this.masktexturePosBuffer&&r.deleteBuffer(this.masktexturePosBuffer),r.glInitSucceed=0}},me.prototype.updataVertexInfoForSharing=function(){const[e,t,r,i]=this.vertexPos,s=this.webglVertexPos[0],n=this.webglVertexPos[3];if(e!=s||n!=i){this.webglVertexPos[0]=e,this.webglVertexPos[1]=t,this.webglVertexPos[2]=r,this.webglVertexPos[3]=i;var o=new Float32Array([r,t,e,t,r,i,e,i,1,1,-1,1,1,-1,-1,-1]),a=this.contextGL;a.bindBuffer(a.ARRAY_BUFFER,this.vertexPosBuffer),a.bufferData(a.ARRAY_BUFFER,o,a.DYNAMIC_DRAW)}},me.prototype.updateTextureInfoForSharing=function(){const[e,t,r,i]=this.texturePos,s=this.webglTexturePos[0],n=this.webglTexturePos[3];if(e!=s||n!=i){this.webglTexturePos[0]=e,this.webglTexturePos[1]=t,this.webglTexturePos[2]=r,this.webglTexturePos[3]=i;var o=new Float32Array([r,t,e,t,r,i,e,i,1,0,0,0,1,1,0,1]),a=this.contextGL;a.bindBuffer(a.ARRAY_BUFFER,this.texturePosBuffer),a.bufferData(a.ARRAY_BUFFER,o,a.DYNAMIC_DRAW)}},me.prototype.updateVertexInfoForMultiView=function(e,t,r,i,s){var n,o,a,c,h=this.contextGL;if(this.isUseFillMode({width:r,height:i,rotation:s}))n=0,o=0,a=1,c=1;else{var u=s==this.ROTATION_CLOCK90||s==this.ROTATION_CLOCK270?i:r,l=s==this.ROTATION_CLOCK90||s==this.ROTATION_CLOCK270?r:i,f=u/l*t;f>e?(n=0,a=1,c=1-(o=(t-l/u*e)/2/t)):(o=0,c=1,a=1-(n=(e-f)/2/e))}n=2*n-1,a=2*a-1,o=1-2*o,c=1-2*c;var d=new Float32Array([a,o,n,o,a,c,n,c,1,1,-1,1,1,-1,-1,-1]);this.viewPostion=d,h.bindBuffer(h.ARRAY_BUFFER,this.vertexPosBuffer),h.bufferData(h.ARRAY_BUFFER,d,h.DYNAMIC_DRAW)},me.prototype.getViewPosition=function(){let e=[0,0,1,1];if(!this.viewPostion)return e;const t=this.viewPostion[0],r=this.viewPostion[1],i=this.viewPostion[2],s=this.viewPostion[5];return e[0]=(1-r)/2,e[1]=(1+i)/2,e[2]=(1-s)/2,e[3]=(1+t)/2,e},me.prototype.updateTextureInfoForMultiView=function(e,t,r,i,s,n,o){var a,c,h,u,l=this.contextGL;if(this.isUseFillMode({width:r.width,height:r.height,rotation:i})){const s=i==this.ROTATION_CLOCK90||i==this.ROTATION_CLOCK270?o/n:n/o,l=r.left||0,f=r.top||0;if(r.width/r.height>s){const i=r.height*s;a=f/t,c=(Math.round((r.width-i)/2)+l)/e,h=(f+r.height)/t,u=c+i/e}else{const i=r.width/s;h=(a=(Math.round((r.height-i)/2)+f)/t)+i/t,u=(c=l/e)+r.width/e}}else a=_(r.top/t,2),c=_(r.left/e,2),h=v((r.top+r.height)/t,2),u=v((r.width+r.left)/e,2);var f=[c,a,u,a,u,h,c,h];i==this.ROTATION_CLOCK90&&(f.unshift(f[6],f[7]),f=f.slice(0,8)),i==this.ROTATION_CLOCK180&&(f.unshift(f[4],f[5],f[6],f[7]),f=f.slice(0,8)),i==this.ROTATION_CLOCK270&&(f.push(f[0],f[1]),f=f.slice(2,10));var d=f[0],p=f[1];if(f[0]=f[2],f[1]=f[3],f[2]=d,f[3]=p,s)if(i==this.ROTATION_CLOCK90||i==this.ROTATION_CLOCK270){let e=f[1];f[1]=f[3],f[3]=e,e=f[5],f[5]=f[7],f[7]=e}else f[0]=1-f[0],f[2]=1-f[2],f[4]=1-f[4],f[6]=1-f[6];var m=new Float32Array([...f,1,0,0,0,1,1,0,1]);l.bindBuffer(l.ARRAY_BUFFER,this.texturePosBuffer),l.bufferData(l.ARRAY_BUFFER,m,l.DYNAMIC_DRAW)},me.prototype.drawNextOutputPictureFrame=function(e,t,r,i,s){let n=!(arguments.length>5&&void 0!==arguments[5])||arguments[5],o=arguments.length>6?arguments[6]:void 0,a=!(arguments.length>7&&void 0!==arguments[7])||arguments[7];if(!this.isAvaiable())return;var c=this.contextGL,h=this.yTextureRef,u=this.uTextureRef,l=this.vTextureRef;c.enable(c.BLEND),c.blendFunc(c.SRC_ALPHA,c.ONE_MINUS_SRC_ALPHA),s=s||this.ROTATION_CLOCK0;var f=(r=r||{top:0,left:0,width:e,height:t}).width!=this.croppingParams.width||r.height!=this.croppingParams.height,d=(r.top!=this.croppingParams.top||(r.left,this.croppingParams.left),o.width!=this.viewWidth||o.height!=this.viewHeight),p=(e!=this.textureWidth||this.textureHeight,s!=this.picRotation);(f||d||p)&&function(e,t,r,i,s){let n=s.width,o=s.height;var a,c,h,u,l=i==e.ROTATION_CLOCK90||i==e.ROTATION_CLOCK270?r:t,f=i==e.ROTATION_CLOCK90||i==e.ROTATION_CLOCK270?t:r,d=l/f*o;d>n?(a=0,h=1,u=1-(c=(o-f/l*n)/2/o)):(c=0,u=1,h=1-(a=(n-d)/2/n)),a=parseFloat((2*a-1).toFixed(3)),h=parseFloat((2*h-1).toFixed(3)),c=parseFloat((1-2*c).toFixed(3)),u=parseFloat((1-2*u).toFixed(3)),e.vertexPos=[a,c,h,u]}(this,r.width,r.height,s,o),this.updataVertexInfoForSharing(),function(e,t,r,i,s){var n=i.top/r,o=i.left/t,a=(i.top+i.height)/r,c=(i.left+i.width)/t,h=[o,n,c,n,c,a,o,a];s==e.ROTATION_CLOCK90&&(h.unshift(h[6],h[7]),h=h.slice(0,8)),s==e.ROTATION_CLOCK180&&(h.unshift(h[4],h[5],h[6],h[7]),h=h.slice(0,8)),s==e.ROTATION_CLOCK270&&(h.push(h[0],h[1]),h=h.slice(2));var u=h[0],l=h[1];h[0]=h[2],h[1]=h[3],h[2]=u,h[3]=l;var f=new Float32Array([...h,1,0,0,0,1,1,0,1]),d=e.contextGL;d.bindBuffer(d.ARRAY_BUFFER,e.texturePosBuffer),d.bufferData(d.ARRAY_BUFFER,f,d.DYNAMIC_DRAW)}(this,e,t,r,s);let m=n?0:1;m!=this.colorRange&&(c.uniform1i(this.colorRangeRef,m),this.colorRange=m),c.viewport(o.x,o.y,o.width,o.height),this.viewport_rect||(this.viewport_rect=new Float32Array(4)),this.viewport_rect.set([o.x,o.y,o.width,o.height],0),c.uniform4fv(this.ul_viewport_rect,this.viewport_rect),c.uniform1i(this.onlyRGBARef,0),c.uniform1i(this.yuvmodeRef,1),Object.assign(this.croppingParams,r),this.textureWidth=e,this.textureHeight=t,this.picRotation=s,this.viewWidth=o.width,this.viewHeight=o.height;var v=i,_=e*t;if(c.activeTexture(c.TEXTURE0),c.bindTexture(c.TEXTURE_2D,h),a){var g=v.subarray(0,_);c.texImage2D(c.TEXTURE_2D,0,c.LUMINANCE,e,t,0,c.LUMINANCE,c.UNSIGNED_BYTE,g)}var y=e/2*t/2;if(c.activeTexture(c.TEXTURE1),c.bindTexture(c.TEXTURE_2D,u),a){var b=v.subarray(_,_+y);c.texImage2D(c.TEXTURE_2D,0,c.LUMINANCE,e/2,t/2,0,c.LUMINANCE,c.UNSIGNED_BYTE,b)}var x=y;if(c.activeTexture(c.TEXTURE2),c.bindTexture(c.TEXTURE_2D,l),a){var w=v.subarray(_+y,_+y+x);c.texImage2D(c.TEXTURE_2D,0,c.LUMINANCE,e/2,t/2,0,c.LUMINANCE,c.UNSIGNED_BYTE,w)}c.activeTexture(c.TEXTURE0+4),c.bindTexture(c.TEXTURE_2D,this.cursorTextureRef),this.hasCursor?c.uniform1i(this.cursorFlagRef,1):a&&c.texImage2D(c.TEXTURE_2D,0,c.RGBA,1,1,0,c.RGBA,c.UNSIGNED_BYTE,this.dummpyCursor),c.uniform4f(this.cursorInfoRef,this.cx,this.cy,this.cw,this.ch),this.render(),this.hasWholeFrame=1},me.prototype.updateCursor=function(e,t,r,i){if(this.isAvaiable()){var s=this.contextGL;e<=0||t<=0||!r||r.length!=e*t*4||i!=this.lastcursorSyncId&&(this.lastcursorSyncId=i,s.activeTexture(s.TEXTURE0+4),s.bindTexture(s.TEXTURE_2D,this.cursorTextureRef),s.texImage2D(s.TEXTURE_2D,0,s.RGBA,e,t,0,s.RGBA,s.UNSIGNED_BYTE,r),this.cursorWidth=e,this.cursorHeight=t,this.hasCursor=1)}},me.prototype.updateCursorPosInfo=function(e,t,r,i,s){if(e&&this.hasCursor){let e=t/this.croppingParams.width,n=r/this.croppingParams.height,o=i/this.croppingParams.width,a=s/this.croppingParams.height;this.cx=e,this.cy=n,this.cw=o,this.ch=a}else this.cx=0,this.cy=0,this.cw=0,this.ch=0},me.prototype.isHasWholeFrame=function(){return this.hasWholeFrame},me.prototype.updateWatermark=function(e,t,r){if(this.isAvaiable()){var i=this.contextGL;e<=0||t<=0||!r||r.length!=e*t*4||(this.hasWaterMark=1,this.watermarkWidth=e,this.watermarkHeight=t,i.activeTexture(i.TEXTURE0+5),i.bindTexture(i.TEXTURE_2D,this.waterMarkTextureRef),i.texImage2D(i.TEXTURE_2D,0,i.RGBA,this.watermarkWidth,this.watermarkHeight,0,i.RGBA,i.UNSIGNED_BYTE,r))}},me.prototype.drawWatermark=function(){if(this.isAvaiable()){var e=this.contextGL;this.isSetWatermark()&&this.watermarkWidth&&this.watermarkHeight&&(e.uniform1i(this.waterMarkFlagRef,1),e.activeTexture(e.TEXTURE0+5),e.bindTexture(e.TEXTURE_2D,this.waterMarkTextureRef),e.enable(e.BLEND),e.blendFunc(e.SRC_ALPHA,e.ONE_MINUS_SRC_ALPHA),e.drawArrays(e.TRIANGLE_STRIP,4,4))}},me.prototype.drawRoundedCorner=function(){if(this.isAvaiable()){var e=this.contextGL;e.enable(e.BLEND),e.blendFunc(e.SRC_ALPHA,e.ONE_MINUS_SRC_ALPHA),e.uniform1f(this.ul_enable_rounded_corner,this.enable_rounded_corner),e.uniform1f(this.ul_radius_lt_x,this.radius_lt_x),e.uniform1f(this.ul_radius_lt_y,this.radius_lt_y),e.uniform1f(this.ul_radius_lb_x,this.radius_lb_x),e.uniform1f(this.ul_radius_lb_y,this.radius_lb_y),e.uniform1f(this.ul_radius_rt_x,this.radius_rt_x),e.uniform1f(this.ul_radius_rt_y,this.radius_rt_y),e.uniform1f(this.ul_radius_rb_x,this.radius_rb_x),e.uniform1f(this.ul_radius_rb_y,this.radius_rb_y),e.uniform1f(this.ul_aa_width,this.aa_width)}},me.prototype.cleanupRoundedCornerRadius=function(){this.enable_rounded_corner=0,this.radius_lt_x=0,this.radius_lt_y=0,this.radius_lb_x=0,this.radius_lb_y=0,this.radius_rt_x=0,this.radius_rt_y=0,this.radius_rb_x=0,this.radius_rb_y=0,this.aa_width=m,this.viewport_rect=null},me.prototype.render=function(){if(this.isAvaiable()){var e=this.contextGL;this.drawRoundedCorner(),e.uniform1i(this.waterMarkFlagRef,0),e.drawArrays(e.TRIANGLE_STRIP,0,4),this.drawWatermark()}},me.prototype.clear=function(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.hasCursor=0,this.watermarkHeight=0,this.watermarkWidth=0,this.watermarkRepeated=!1,this.hasWholeFrame=0,this.lastcursorSyncId=-1,this.cleanupRoundedCornerRadius(),e&&this.clearCanvas({R:0,G:0,B:0,A:0})},me.prototype.clearCanvas=function(e){if(this.cleanupRoundedCornerRadius(),this.isAvaiable()){var t=this.contextGL;e?t.clearColor(e.R,e.G,e.B,e.A):t.clearColor(this.bgColor[0],this.bgColor[1],this.bgColor[2],255),t.clear(t.COLOR_BUFFER_BIT)}},me.prototype.isRGBAMode=function(e){return-1!==[ce,he].indexOf(e)},me.prototype.updateRemoteVideoTextures=function(e,t,r,i,s){let n=!(arguments.length>5&&void 0!==arguments[5])||arguments[5],o=arguments.length>6?arguments[6]:void 0,a=!(arguments.length>8&&void 0!==arguments[8])||arguments[8];if(!this.isAvaiable())return;var c=this.contextGL,h=this.yTextureRef,u=this.uTextureRef,l=this.vTextureRef;c.enable(c.BLEND),c.blendFunc(c.SRC_ALPHA,c.ONE_MINUS_SRC_ALPHA);const f=this.isRGBAMode(this.videoMode);if(e<=0||t<=0||!i||!i.length||i.length!=e*t*3/2&&!f||r&&(r.top<0||r.left<0||r.left+r.width>e||r.top+r.height>t))return!1;let d=n?0:1;if(this.colorRange=d,this.rotation=s,Object.assign(this.croppingParams,r),this.textureWidth=e,this.textureHeight=t,this.viewWidth=o.width,this.viewHeight=o.height,!a)return;if(c.bindTexture(c.TEXTURE_2D,h),f)return void c.texImage2D(c.TEXTURE_2D,0,c.RGBA,e,t,0,c.RGBA,c.UNSIGNED_BYTE,i);var p=i,m=e*t,v=p.subarray(0,m);c.texImage2D(c.TEXTURE_2D,0,c.LUMINANCE,e,t,0,c.LUMINANCE,c.UNSIGNED_BYTE,v);let _=0,g=0;1==this.videoMode?(_=e/2*t/2,g=_):2==this.videoMode&&(_=e*t/2,g=0);var y=p.subarray(m,m+_);if(c.bindTexture(c.TEXTURE_2D,u),g){c.texImage2D(c.TEXTURE_2D,0,c.LUMINANCE,e/2,t/2,0,c.LUMINANCE,c.UNSIGNED_BYTE,y);var b=p.subarray(m+_,m+_+g);c.bindTexture(c.TEXTURE_2D,l),c.texImage2D(c.TEXTURE_2D,0,c.LUMINANCE,e/2,t/2,0,c.LUMINANCE,c.UNSIGNED_BYTE,b)}else c.texImage2D(c.TEXTURE_2D,0,c.LUMINANCE_ALPHA,e/2,t/2,0,c.LUMINANCE_ALPHA,c.UNSIGNED_BYTE,y);return!0},me.prototype.updateRemoteVideoTexturesImageBitmap=function(e,t,r,i,s){let n=!(arguments.length>5&&void 0!==arguments[5])||arguments[5];if(e<=0||t<=0||!r)return;if(!this.isAvaiable())return;var o=this.contextGL;if(this.textureWidth=e,this.textureHeight=t,Number.isNaN(s)||(this.rotation=s),Object.assign(this.croppingParams,i),!n)return;o.bindTexture(o.TEXTURE_2D,this.yTextureRef);const a=o.RGBA,c=o.RGBA,h=o.UNSIGNED_BYTE;o.texImage2D(o.TEXTURE_2D,0,a,c,h,r)},me.prototype.updateSelfMaskImage=function(e,t,r){if(!(e<=0||t<=0)&&r&&r.length==e*t*4&&this.isAvaiable()){var i=this.contextGL;i.bindTexture(i.TEXTURE_2D,this.maskTextureRef),i.texImage2D(i.TEXTURE_2D,0,i.RGBA,e,t,0,i.RGBA,i.UNSIGNED_BYTE,r)}},me.prototype.VideoFlip=function(){if(this.isAvaiable()){var e=this.contextGL;e.pixelStorei(e.UNPACK_FLIP_Y_WEBGL,1)}},me.prototype.drawRemoteVideo=function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!this.isAvaiable())return;var r=this.contextGL;let i=this.isRGBAMode(this.videoMode)?1:0;r.uniform1i(this.colorRangeRef,this.colorRange),this.setUniformFlag(i,this.hasCursor,this.videoMode),this.initmask&&r.uniform1i(this.maskFlagRef,1),this.updateTextureInfoForMultiView(this.textureWidth,this.textureHeight,this.croppingParams,this.rotation,t,e.width,e.height),r.viewport(e.x,e.y,e.width,e.height),this.viewport_rect||(this.viewport_rect=new Float32Array(4)),this.viewport_rect.set([e.x,e.y,e.width,e.height],0),r.uniform4fv(this.ul_viewport_rect,this.viewport_rect),this.updateVertexInfoForMultiView(e.width,e.height,this.croppingParams.width,this.croppingParams.height,this.rotation),this.BindTextures(this.videoMode),r.enable(r.BLEND),r.blendFunc(r.SRC_ALPHA,r.ONE_MINUS_SRC_ALPHA),this.render()},me.prototype.readPixelsSyncRequest=function(e,t,r,i){if(this.isAvaiable()){var s,n=this.contextGL;return this.destination&&this.destination.length==r*i*4||(this.destination=new Uint8Array(r*i*4)),s=this.destination,n.flush(),n.readPixels(e,t,r,i,n.RGBA,n.UNSIGNED_BYTE,s),s}},me.prototype.updateSelfVideoTextures=function(e,t,r,i){let s=!(arguments.length>4&&void 0!==arguments[4])||arguments[4],n=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0;if(!(e<=0||t<=0)&&r&&r.length%4==0&&this.isAvaiable()){var o=this.contextGL;this.textureWidth=e,this.textureHeight=t,this.rotation=n,Object.assign(this.croppingParams,i),s&&(o.bindTexture(o.TEXTURE_2D,this.yTextureRef),o.texImage2D(o.TEXTURE_2D,0,o.RGBA,e,t,0,o.RGBA,o.UNSIGNED_BYTE,r))}},me.prototype.drawSelfVideo=function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(this.isAvaiable()){var i=this.contextGL;this.setUniformFlag(1,this.hasCursor,this.videoMode),this.updateTextureInfoForMultiView(this.textureWidth,this.textureHeight,this.croppingParams,this.rotation,r,e.width,e.height),i.viewport(e.x,e.y,e.width,e.height),this.viewport_rect||(this.viewport_rect=new Float32Array(4)),this.viewport_rect.set([e.x,e.y,e.width,e.height],0),i.uniform4fv(this.ul_viewport_rect,this.viewport_rect),t?(i.enable(i.BLEND),i.blendFunc(i.ZERO,i.ZERO),this.updateVertexInfoForMultiView(e.width,e.height,e.width,e.height,this.ROTATION_CLOCK0)):(i.enable(i.BLEND),i.blendFunc(i.SRC_ALPHA,i.ONE_MINUS_SRC_ALPHA),this.updateVertexInfoForMultiView(e.width,e.height,this.croppingParams.width,this.croppingParams.height,this.rotation)),this.BindTextures(ce),this.render()}},me.prototype.isSetWatermark=function(){return this.hasWaterMark},me.prototype.setWatermarkFlag=function(e){this.hasWaterMark=e,e||(this.setWatermarkRepeated(!1),this.setWatermarkOpacity(),this.setWatermarkPosition(16))},me.prototype.setUniformFlag=function(e,t,r){if(this.isAvaiable()){var i=this.contextGL;i.uniform1i(this.onlyRGBARef,e),i.uniform1i(this.bgraModeRef,e&&r===he?1:0),i.uniform1i(this.cursorFlagRef,t),e||i.uniform1i(this.yuvmodeRef,r)}},me.prototype.setVideoMode=function(e){this.videoMode=e},me.prototype.getVideoMode=function(e){return this.videoMode},me.prototype.setWatermarkRepeated=function(e){this.watermarkRepeated=e},me.prototype.isWatermarkRepeated=function(){return!!this.watermarkRepeated},me.prototype.setWatermarkOpacity=function(e){this.watermarkOpacity=e||.15},me.prototype.getWatermarkOpacity=function(){return this.watermarkOpacity},me.prototype.setWatermarkPosition=function(e){this.watermarkPosition=e||16},me.prototype.getWatermarkPosition=function(){return this.watermarkPosition},me.prototype.setMultiView=function(e){return this.isMultiView=e},me.prototype.getRepeatedWatermarkUniformValue=function(){return this.isMultiView?30:7},me.prototype.getRepeatedWatermarkTextureValue=function(e){return this.isMultiView?e.TEXTURE30:e.TEXTURE7},me.prototype.setFillMode=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;this.fillMode=e,this.fillModeForResolution=t},me.prototype.getFillMode=function(){return this.fillMode},me.prototype.getFillModeForResolution=function(){return this.fillModeForResolution},me.prototype.getTextureIndex=function(){return this.textureindex},me.prototype.getTextureWidth=function(){return this.textureWidth},me.prototype.getTextureHeight=function(){return this.textureHeight},me.prototype.getRotation=function(){return this.rotation},me.prototype.getCroppingParams=function(){return this.croppingParams},me.prototype.getIndex=function(){return this.textureindex},me.prototype.getWatermarkWidth=function(){return this.watermarkWidth},me.prototype.getWatermarkHeight=function(){return this.watermarkHeight},me.prototype.getWatermarkOpacity=function(){return this.watermarkOpacity},me.prototype.getAttachedCanvas=function(){return this.canvasElement},me.prototype.getCanvasId=function(){return this.canvasID},me.prototype.resizeCanvasTo=function(e,t){this.contextGL.canvas.width=e,this.contextGL.canvas.height=t},me.prototype.isUseFillMode=function(e){let{width:t,height:r,rotation:i}=e;if(!this.fillMode)return!1;if(!this.fillModeForResolution)return!0;if(!t||!r)return!1;const s=i===this.ROTATION_CLOCK90||i==this.ROTATION_CLOCK270?r/t:t/r;return(Array.isArray(this.fillModeForResolution)?this.fillModeForResolution:[this.fillModeForResolution]).some((e=>Math.abs(s-e)<.01))},me.prototype.setRoundedCornerRadius=function(e){e?(this.radius_lt_x=e.radius_lt_x,this.radius_lt_y=e.radius_lt_y,this.radius_lb_x=e.radius_lb_x,this.radius_lb_y=e.radius_lb_y,this.radius_rt_x=e.radius_rt_x,this.radius_rt_y=e.radius_rt_y,this.radius_rb_x=e.radius_rb_x,this.radius_rb_y=e.radius_rb_y,0===this.radius_lt_x&&0===this.radius_lt_y&&0===this.radius_lb_x&&0===this.radius_lb_y&&0===this.radius_rt_x&&0===this.radius_rt_y&&0===this.radius_rb_x&&0===this.radius_rb_y?this.enable_rounded_corner=0:this.enable_rounded_corner=1):this.enable_rounded_corner=0},me.prototype.setAntialiasWidth=function(e){(e<=0||e>=1)&&(e=m),this.aa_width=e};const ve=me;class _e{constructor(e,t){this.isMirror=!1,this.display=new ve(e,t,0,void 0,{preserveDrawingBuffer:!1},void 0,!1,!1)}renderFrame(e,t,r,i){if(this.display){let s={x:0,y:0,width:this.display.canvasElement.width,height:this.display.canvasElement.height};this.display.updateRemoteVideoTextures(e,t,i,r,0,!0,s,!1),this.display.drawRemoteVideo(s,this.isMirror)}}render(e){return t=this,r=void 0,s=function*(){let t=ce;if("data_ptr"in e){const{data:t,format_width:r,format_height:i,valid_x:s,valid_y:n,valid_width:o,valid_height:a}=e;let c={top:n,left:s,width:o,height:a};this.display.setVideoMode(1),this.renderFrame(r,i,t,c)}else if(self.VideoFrame&&e instanceof VideoFrame){const{format:r,visibleRect:i}=e;if(r&&i){if("I420"===r||"I420A"===r)t=1;else if("NV12"===r)t=2;else{if("BGRA"!==r)return void(this.onUnsupportedFrame&&this.onUnsupportedFrame(r));t=he}const{width:s,height:n}=i,o=new Uint8Array(e.allocationSize()),a={top:0,left:0,width:s,height:n};this.display.setVideoMode(t);try{yield e.copyTo(o),this.renderFrame(s,n,o,a)}catch(e){}e.close()}}else if(e instanceof ImageData){const{width:t,height:r}=e,i={top:0,left:0,width:t,height:r};this.display.setVideoMode(ce),this.renderFrame(t,r,e.data,i)}},new((i=void 0)||(i=Promise))((function(e,n){function o(e){try{c(s.next(e))}catch(e){n(e)}}function a(e){try{c(s.throw(e))}catch(e){n(e)}}function c(t){var r;t.done?e(t.value):(r=t.value,r instanceof i?r:new i((function(e){e(r)}))).then(o,a)}c((s=s.apply(t,r||[])).next())}));var t,r,i,s}updateSize(e,t){this.display.canvasElement.width=e,this.display.canvasElement.height=t}setMirror(e){this.isMirror=e}}function ge(e){self.postMessage({cmd:Y.VB_WORKER_ERROR,payload:e.error||e.reason||e})}self.wcl_trace_log=function(){},self.addEventListener("error",ge),self.addEventListener("unhandledrejection",ge);const ye=new class{constructor(){this.vbRender=null,this.frameRate=24,this.frameReader=null,this.videoStream=null,this.requestTimer=null,this.isVBEnabled=!0,this.isStreamEnabled=!1,this.vbWritableStream=null,this.vbFrameWriter=null,this.streamRender=null,this.manualFreeMemory=!1,this.isWaitingFirstFrame=!1,this.fps=0,this.statsTimer=null,this.receivingFps=0,this.receivedFrames=0,this.generatedFrames=0,this.width=0,this.height=0,this.frameReadTimer=null,this.handleMessage=this.handleMessage.bind(this),this.requestFrame=this.requestFrame.bind(this),this.updateStats=this.updateStats.bind(this),this.handleUnsupportedFrame=this.handleUnsupportedFrame.bind(this)}updateStats(){this.receivedFrames+=this.receivingFps,this.generatedFrames+=this.fps,this.postMessage({cmd:Y.VB_UPDATE_STATS,payload:{fps:this.fps,receivingFps:this.receivingFps,generatedFrames:this.generatedFrames,receivedFrames:this.receivedFrames,width:this.width,height:this.height}}),this.fps=0,this.receivingFps=0}postMessage(e){self.postMessage(e)}start(){this.statsTimer&&(clearInterval(this.statsTimer),this.fps=0,this.receivingFps=0,this.receivedFrames=0,this.generatedFrames=0),this.requestTimer&&(this.videoStream?clearTimeout(this.requestTimer):clearInterval(this.requestTimer)),this.videoStream&&!this.frameReader&&(this.frameReader=this.videoStream.getReader()),this.requestFrame(),this.statsTimer=setInterval(this.updateStats,1e3)}stop(e){if(clearInterval(this.statsTimer),this.frameReadTimer&&clearTimeout(this.frameReadTimer),this.fps=0,this.receivingFps=0,this.receivedFrames=0,this.generatedFrames=0,this.updateStats(),clearTimeout(this.requestTimer),this.requestTimer=null,e&&this.videoStream){const e=this.frameReader,t=this.videoStream;this.videoStream=null,this.frameReader=null,e.cancel().then((()=>{e.releaseLock(),t.cancel()})).catch((e=>{this.postMessage({cmd:Y.VB_WORKER_ERROR,payload:e.error||e.reason||e})}))}}requestFrame(){this.frameReader?(this.frameReadTimer=setTimeout((()=>{ge(new Error("VB_FRAMEREAD_TIMEOUT"))}),1e4),this.frameReader.read().then((e=>{let{value:t,done:r}=e;if(clearTimeout(this.frameReadTimer),r)clearTimeout(this.requestTimer),this.requestTimer=null;else{const{timestamp:e,displayWidth:r,displayHeight:i}=t;this.frameTimestamp=e,this.frameDisplayHeight=i,this.frameDisplayWidth=r,this.sendFrame(t),this.requestTimer=setTimeout(this.requestFrame,1e3/this.frameRate-4)}})).catch((e=>{clearTimeout(this.frameReadTimer),clearTimeout(this.requestTimer),this.requestTimer=null,ge(e)}))):this.requestTimer=setInterval((()=>{this.postMessage({cmd:Y.VB_REQUEST_FRAME})}),1e3/this.frameRate-4)}handleUnsupportedFrame(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";this.postMessage({cmd:Y.VB_VIDEO_FORMAT_UNSUPPORTED,payload:e})}sendFrame(e){var t;this.receivingFps++,this.isVBEnabled?this.vb.generateVBFrame(e):(null===(t=this.vbRender)||void 0===t||t.render(e),this.writeVBFrameToStream(e))}writeVBFrameToStream(e){if(this.isStreamEnabled)if(this.vbFrameWriter){let t;if("format"in e)t=e;else if("data_ptr"in e){const{format_width:r,format_height:i,valid_x:s,valid_y:n,valid_width:o,valid_height:a,data:c}=e;t=new VideoFrame(c,{format:"I420",timestamp:this.frameTimestamp,codedWidth:r,codedHeight:i,visibleRect:{x:s,y:n,width:o,height:a},displayHeight:this.frameDisplayHeight,displayWidth:this.frameDisplayWidth})}t&&(this.vbFrameWriter.write(t),t.close())}else this.streamRender&&this.streamRender.render(e)}handleMessage(e){return t=this,r=void 0,s=function*(){var t,r,i;const{cmd:s}=e.data;switch(s){case Y.VB_SEND_FRAME:{const t=e.data.payload;this.sendFrame(t);break}case Y.VB_UPDATE_BG:{const t=e.data.payload;"blur"===t?this.vb.blur():this.vb.setBackgroundImage(t);break}case Y.VB_FREE_MEMORY:this.vb.free(e.data.payload);break;case Y.VB_WORKER_INIT:{const t=e.data.payload;n={enabled:!!t.enableFetchWithCache,reportLog:e=>{this.postMessage({cmd:Y.VB_GLOBAL_TRACING_LOG,payload:JSON.stringify(e)})},resourcePath:t.cdnPath},o=Object.assign({enabled:!0,cacheName:"zm-media",reportLog(e){console.log("FetchCache",e)}},n),k.enabled=o.enabled??!1,k.reportLog=o.reportLog??I,k.cacheName=o.cacheName??"zm-media",k.enableLocalDebugLog=o.enableLocalDebugLog??!1,k.resourcePath=o.resourcePath,X=N&&k.enabled&&k.resourcePath?H:V,O.init(t.renderUserAgentInfo),S.init(t.renderCapabilitiesDesc),C.init(t.renderConfigDesc),f=M,this.manualFreeMemory=t.needFrame||!1,this.vb=new ae,this.vb.onModelReady=()=>{this.postMessage({cmd:Y.VB_MODEL_READY})},this.vb.onPredictDone=()=>{this.postMessage({cmd:Y.VB_PREDICT_DONE,payload:this.vb.backend})},this.vb.onUnsupportedFrame=this.handleUnsupportedFrame,this.vb.onVBFrame=e=>{this.fps++;const{valid_width:t,valid_height:r}=e;this.writeVBFrameToStream(e),this.vbRender&&this.vbRender.render(e),this.vb.manualFreeMemory&&this.postMessage({cmd:Y.VB_GENERATED_FRAME,payload:e}),this.isWaitingFirstFrame&&(this.isWaitingFirstFrame=!1,this.postMessage({cmd:Y.VB_GENERATE_FIRST_FRAME})),this.width===t&&this.height===r||(this.postMessage({cmd:Y.VB_RESOLUTION_CHANGE,payload:{width:t,height:r}}),this.width=e.valid_width,this.height=e.valid_height)},this.vb.manualFreeMemory=this.manualFreeMemory;try{yield this.vb.initialize(t),self.postMessage({cmd:Y.VB_INIT_SUCCESS})}catch(e){this.postMessage({cmd:Y.VB_INIT_FAILED,payload:e})}break}case Y.VB_RENDER_CANVAS:{const t=e.data.payload;this.vbRender=new _e(t,"VB_MODULE_CANVAS"),this.vbRender.onUnsupportedFrame=this.handleUnsupportedFrame;break}case Y.VB_RENDER_FRAME:{const r=e.data.payload;null===(t=this.vbRender)||void 0===t||t.render(r);break}case Y.VB_START:{const{videoStream:t,frameRate:r}=e.data.payload||{};this.frameRate=r||this.frameRate,t&&(this.videoStream=t),this.start(),this.isWaitingFirstFrame=!0;break}case Y.VB_TOGGLE_VB:this.isVBEnabled=e.data.payload;break;case Y.VB_STOP:this.stop(e.data.payload),this.isWaitingFirstFrame=!1;break;case Y.VB_MIRROR:null===(r=this.vbRender)||void 0===r||r.setMirror(e.data.payload);break;case Y.VB_GENERATE_STREAM:{const t=e.data.payload;t?"getWriter"in t?(this.vbWritableStream=t,this.vbFrameWriter=this.vbWritableStream.getWriter()):this.streamRender=new _e(t,"VB_STREAM_CANVAS_IN_WORKER"):this.vb.manualFreeMemory=!0,this.isStreamEnabled=!0;break}case Y.VB_CHANGE_STREAM_CANVAS_SIZE:{const{width:t,height:r}=e.data.payload;null===(i=this.streamRender)||void 0===i||i.updateSize(t,r);break}case Y.VB_STOP_STREAM:this.isStreamEnabled=!1,this.manualFreeMemory||(this.vb.manualFreeMemory=!1);break;case Y.VB_UPDATE_NEED_FRAME:{const{payload:t}=e.data;this.manualFreeMemory=t,(t||!this.isStreamEnabled||this.vbWritableStream||this.streamRender)&&(this.vb.manualFreeMemory=t);break}case Y.VB_UPDATE_FRAME_RATE:this.frameRate=e.data.payload,this.start();break;default:console.warn("unrecognize")}var n,o},new((i=void 0)||(i=Promise))((function(e,n){function o(e){try{c(s.next(e))}catch(e){n(e)}}function a(e){try{c(s.throw(e))}catch(e){n(e)}}function c(t){var r;t.done?e(t.value):(r=t.value,r instanceof i?r:new i((function(e){e(r)}))).then(o,a)}c((s=s.apply(t,r||[])).next())}));var t,r,i,s}};self.addEventListener("message",ye.handleMessage)})()})();
//# sourceMappingURL=https://d1cdksi819e9z7.cloudfront.net/sourcemap/vb_worker.min.js-44ee2037556d778263f8.map